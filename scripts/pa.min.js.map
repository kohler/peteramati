{"version":3,"file":"pa.min.js","mappings":"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","sources":["webpack:///./scriptsrc/ui-autogrow.js","webpack:///webpack/bootstrap","webpack:///./scriptsrc/utils.js","webpack:///./scriptsrc/ui.js","webpack:///./scriptsrc/ui-key.js","webpack:///./scriptsrc/hoturl.js","webpack:///./scriptsrc/utils-errors.js","webpack:///./scriptsrc/ui-range.js","webpack:///./scriptsrc/xhr.js","webpack:///./scriptsrc/ui-sessionlist.js","webpack:///./scriptsrc/encoders.js","webpack:///./scriptsrc/tooltip.js","webpack:///./scriptsrc/markdown-minihtml.js","webpack:///./scriptsrc/markdown-attributes.js","webpack:///./scriptsrc/markdown-deflist.js","webpack:///./scriptsrc/render.js","webpack:///./scriptsrc/pset.js","webpack:///./scriptsrc/dropmenu.js","webpack:///./scriptsrc/diff.js","webpack:///./scriptsrc/diff-markdown.js","webpack:///./scriptsrc/note.js","webpack:///./scriptsrc/gc.js","webpack:///./scriptsrc/gradeentry.js","webpack:///./scriptsrc/note-edit.js","webpack:///./scriptsrc/render-terminal.js","webpack:///./scriptsrc/grade-ui.js","webpack:///./scriptsrc/run.js","webpack:///./scriptsrc/run-settings.js","webpack:///./scriptsrc/svgpathutil.js","webpack:///./scriptsrc/ui-history.js","webpack:///./scriptsrc/intervalseq.js","webpack:///./scriptsrc/grgraph.js","webpack:///./scriptsrc/gradestats.js","webpack:///./scriptsrc/grgraph-ui.js","webpack:///./scriptsrc/grgraph-highlight.js","webpack:///./scriptsrc/gc-checkbox.js","webpack:///./scriptsrc/gc-letter.js","webpack:///./scriptsrc/gc-multicheckbox.js","webpack:///./scriptsrc/gc-select.js","webpack:///./scriptsrc/gc-markdown.js","webpack:///./scriptsrc/gc-timermark.js","webpack:///./scriptsrc/gc-text.js","webpack:///./scriptsrc/popup.js","webpack:///./scriptsrc/ptable-grades.js","webpack:///./scriptsrc/ptable-diff.js","webpack:///./scriptsrc/cluster-diff.js","webpack:///./scriptsrc/ptable-run.js","webpack:///./scriptsrc/pinnable.js","webpack:///./scriptsrc/search.js","webpack:///./scriptsrc/ptable.js","webpack:///./node_modules/uc.micro/properties/Any/regex.mjs","webpack:///./node_modules/uc.micro/categories/Cc/regex.mjs","webpack:///./node_modules/uc.micro/categories/Z/regex.mjs","webpack:///./node_modules/uc.micro/categories/P/regex.mjs","webpack:///./node_modules/linkify-it/index.mjs","webpack:///./node_modules/linkify-it/lib/re.mjs","webpack:///./scriptsrc/main.js"],"sourcesContent":["// ui-autogrow.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nlet autogrowers, shadows = {};\n\nfunction get_shadow(elt, width) {\n    const css = window.getComputedStyle(elt);\n    let t = 'font-size:'.concat(css.fontSize,\n        ';font-family:', css.fontFamily,\n        ';font-weight:', css.fontWeight,\n        ';font-style:', css.fontStyle,\n        ';line-height:', css.lineHeight,\n        'px;position:absolute;top:-10000px;left:-10000px;resize:none;word-wrap:break-word;white-space:pre-wrap;');\n    if (elt.tagName !== \"TEXTAREA\") {\n        const pl = parseFloat(css.paddingLeft),\n            pr = parseFloat(css.paddingRight),\n            bl = parseFloat(css.borderLeftWidth),\n            br = parseFloat(css.borderRightWidth);\n        t = t.concat('width:auto;display:table-cell;padding-left:', pl,\n            'px;padding-right:', pl + pr + bl + br, 'px;');\n        if (css.minWidth === \"0px\" && width) {\n            elt.style.minWidth = width + \"px\";\n        }\n        if (css.maxWidth === \"none\" && !elt.classList.contains(\"wide\")) {\n            elt.style.maxWidth = \"640px\";\n        }\n    }\n    let s = shadows[t];\n    if (!s) {\n        s = shadows[t] = {\n            signature: t,\n            elt: document.createElement(\"div\"),\n            refcount: 0\n        };\n        s.elt.setAttribute(\"style\", t);\n        document.body.appendChild(s.elt);\n    }\n    ++s.refcount;\n    return s;\n}\n\nfunction resizer() {\n    for (let ag of autogrowers) {\n        ag[1]();\n    }\n}\n\nfunction remover(self, shadow) {\n    $(self).removeData(\"autogrower\");\n    if (shadow) {\n        if (shadow instanceof Element) {\n            shadow.remove();\n        } else if (--shadow.refcount === 0) {\n            shadow.elt.remove();\n            delete shadows[shadow.signature];\n        }\n    }\n    autogrowers && autogrowers.delete(self);\n}\n\nfunction make_textarea_autogrower(self) {\n    var shadow, minHeight, lineHeight;\n    return function (event) {\n        if (event === false) {\n            return remover(self, shadow);\n        }\n        var width = self.clientWidth;\n        if (width <= 0) {\n            return;\n        }\n        if (!shadow) {\n            shadow = get_shadow(self);\n            minHeight = self.clientHeight;\n            shadow.elt.innerText = \"!\";\n            lineHeight = shadow.elt.clientHeight;\n        }\n\n        // Did enter get pressed?  Resize in this keydown event so that the flicker doesn't occur.\n        var val = self.value;\n        if (event && event.type == \"keydown\" && event.keyCode === 13) {\n            val += \"\\n\";\n        }\n        shadow.elt.style.width = width + \"px\";\n        shadow.elt.innerText = val + \"...\";\n\n        var wh = Math.max($(window).height() - 4 * lineHeight, 4 * lineHeight);\n        $(self).height(Math.min(wh, Math.max(shadow.elt.clientHeight, minHeight)));\n    };\n}\n\nfunction make_input_autogrower(self) {\n    var shadow, minWidth, maxWidth;\n    return function (event) {\n        if (event === false) {\n            return remover(self, shadow);\n        }\n        var width = 0;\n        try {\n            width = self.offsetWidth;\n        } catch { // IE11 is annoying here\n        }\n        if (width <= 0) {\n            return;\n        }\n        if (!shadow) {\n            shadow = get_shadow(self, width);\n            let css = window.getComputedStyle(self);\n            minWidth = parseFloat(css.minWidth);\n            maxWidth = parseFloat(css.maxWidth);\n        }\n        shadow.elt.innerText = self.value + \"  \";\n        let outerWidth = Math.min(shadow.elt.offsetWidth, $(window).width());\n        if (maxWidth === maxWidth) { // i.e., isn't NaN\n            outerWidth = Math.min(outerWidth, maxWidth);\n        }\n        $(self).outerWidth(Math.max(outerWidth, minWidth));\n    };\n}\n\n$.fn.autogrow = function () {\n    this.each(function () {\n        var $self = $(this), f = $self.data(\"autogrower\");\n        if (!f && this.classList.contains(\"need-autogrow\")) {\n            this.classList.remove(\"need-autogrow\");\n            if (this.tagName === \"TEXTAREA\") {\n                f = make_textarea_autogrower(this);\n            } else if (this.tagName === \"INPUT\" && this.type === \"text\") {\n                f = make_input_autogrower(this);\n            }\n            if (f) {\n                $self.data(\"autogrower\", f).on(\"change input\", f);\n                if (!autogrowers) {\n                    autogrowers = new Map;\n                    $(window).resize(resizer);\n                }\n                autogrowers.set(this, f);\n            }\n        }\n        if (f && $self.val() !== \"\") {\n            f();\n        }\n    });\n    return this;\n};\n\n$.fn.unautogrow = function () {\n    this.each(function () {\n        var f = $(this).data(\"autogrower\");\n        f && f(false);\n    });\n    return this;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// utils.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let wstorage = function () { return false; };\ntry {\n    if (window.localStorage && window.JSON)\n        wstorage = function (is_session, key, value) {\n            try {\n                var s = is_session ? window.sessionStorage : window.localStorage;\n                if (typeof key === \"undefined\")\n                    return !!s;\n                else if (typeof value === \"undefined\")\n                    return s.getItem(key);\n                else if (value === null)\n                    return s.removeItem(key);\n                else if (typeof value === \"object\")\n                    return s.setItem(key, JSON.stringify(value));\n                else\n                    return s.setItem(key, value);\n            } catch {\n                return false;\n            }\n        };\n} catch {\n}\nwstorage.json = function (is_session, key) {\n    var x = wstorage(is_session, key);\n    return x ? JSON.parse(x) : false;\n};\nwstorage.site = function (is_session, key, value) {\n    if (siteinfo.base !== \"/\")\n        key = siteinfo.base + key;\n    return wstorage(is_session, key, value);\n};\nwstorage.site_json = function (is_session, key) {\n    if (siteinfo.base !== \"/\")\n        key = siteinfo.base + key;\n    return wstorage.json(is_session, key);\n};\n\n\nexport function sprintf(fmt) {\n    var words = fmt.split(/(%(?:%|-?(?:\\d*|\\*?)(?:\\.\\d*)?[sdefgroxX]))/), wordno, word,\n        arg, argno, conv, pad, t = \"\";\n    for (wordno = 0, argno = 1; wordno != words.length; ++wordno) {\n        word = words[wordno];\n        if (word.charAt(0) != \"%\")\n            t += word;\n        else if (word.charAt(1) == \"%\")\n            t += \"%\";\n        else {\n            arg = arguments[argno];\n            ++argno;\n            conv = word.match(/^%(-?)(\\d*|\\*?)(?:|[.](\\d*))(\\w)/);\n            if (conv[2] == \"*\") {\n                conv[2] = arg.toString();\n                arg = arguments[argno];\n                ++argno;\n            }\n            if (conv[4] >= \"e\" && conv[4] <= \"g\" && conv[3] == null) {\n                conv[3] = 6;\n            }\n            if (conv[4] === \"g\") {\n                arg = Number(arg).toPrecision(conv[3]).toString();\n                arg = arg.replace(/\\.(\\d*[1-9])?0+(|e.*)$/,\n                                  function (match, p1, p2) {\n                                      return (p1 == null ? \"\" : \".\" + p1) + p2;\n                                  });\n            } else if (conv[4] === \"f\") {\n                arg = Number(arg).toFixed(conv[3]);\n            } else if (conv[4] === \"e\") {\n                arg = Number(arg).toExponential(conv[3]);\n            } else if (conv[4] === \"r\") {\n                arg = Number(arg).toFixed(+(conv[3] || 0));\n                if (+(conv[3] || 0))\n                    arg = arg.replace(/\\.?0*$/, \"\");\n            } else if (conv[4] === \"d\") {\n                arg = Math.floor(arg);\n            } else if (conv[4] === \"o\") {\n                arg = Math.floor(arg).toString(8);\n            } else if (conv[4] === \"x\") {\n                arg = Math.floor(arg).toString(16);\n            } else if (conv[4] === \"X\") {\n                arg = Math.floor(arg).toString(16).toUpperCase();\n            }\n            arg = arg.toString();\n            if (conv[2] !== \"\" && conv[2] !== \"0\") {\n                pad = conv[2].charAt(0) === \"0\" ? \"0\" : \" \";\n                while (arg.length < parseInt(conv[2], 10)) {\n                    arg = conv[1] ? arg + pad : pad + arg;\n                }\n            }\n            t += arg;\n        }\n    }\n    return t;\n}\n\n\nfunction pad(num, str, n) {\n    str += num.toString();\n    return str.length <= n ? str : str.substring(str.length - n);\n}\n\nfunction unparse_q(d, alt, is24) {\n    if (is24 && alt && !d.getSeconds()) {\n        return strftime(\"%H:%M\", d);\n    } else if (is24) {\n        return strftime(\"%H:%M:%S\", d);\n    } else if (alt && d.getSeconds()) {\n        return strftime(\"%#l:%M:%S%P\", d);\n    } else if (alt && d.getMinutes()) {\n        return strftime(\"%#l:%M%P\", d);\n    } else if (alt) {\n        return strftime(\"%#l%P\", d);\n    } else {\n        return strftime(\"%I:%M:%S %p\", d);\n    }\n}\n\nconst unparsers = {\n    a: function (d) { return ([\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"])[d.getDay()]; },\n    A: function (d) { return ([\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"])[d.getDay()]; },\n    d: function (d) { return pad(d.getDate(), \"0\", 2); },\n    e: function (d, alt) { return pad(d.getDate(), alt ? \"\" : \" \", 2); },\n    u: function (d) { return d.getDay() || 7; },\n    w: function (d) { return d.getDay(); },\n    b: function (d) { return ([\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"])[d.getMonth()]; },\n    B: function (d) { return ([\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"])[d.getMonth()]; },\n    h: function (d) { return unparsers.b(d); },\n    m: function (d) { return pad(d.getMonth() + 1, \"0\", 2); },\n    y: function (d) { return d.getFullYear() % 100; },\n    Y: function (d) { return d.getFullYear(); },\n    H: function (d) { return pad(d.getHours(), \"0\", 2); },\n    k: function (d, alt) { return pad(d.getHours(), alt ? \"\" : \" \", 2); },\n    I: function (d) { return pad(d.getHours() % 12 || 12, \"0\", 2); },\n    l: function (d, alt) { return pad(d.getHours() % 12 || 12, alt ? \"\" : \" \", 2); },\n    M: function (d) { return pad(d.getMinutes(), \"0\", 2); },\n    X: function (d) { return strftime(\"%#e %b %Y %#q\", d); },\n    p: function (d) { return d.getHours() < 12 ? \"AM\" : \"PM\"; },\n    P: function (d) { return d.getHours() < 12 ? \"am\" : \"pm\"; },\n    q: function (d, alt) { return unparse_q(d, alt, strftime.is24); },\n    r: function (d, alt) { return unparse_q(d, alt, false); },\n    R: function (d, alt) { return unparse_q(d, alt, true); },\n    S: function (d) { return pad(d.getSeconds(), \"0\", 2); },\n    T: function (d) { return strftime(\"%H:%M:%S\", d); },\n    /* XXX z Z */\n    D: function (d) { return strftime(\"%m/%d/%y\", d); },\n    F: function (d) { return strftime(\"%Y-%m-%d\", d); },\n    s: function (d) { return Math.floor(d.getTime() / 1000); },\n    n: function () { return \"\\n\"; },\n    t: function () { return \"\\t\"; },\n    \"%\": function () { return \"%\"; }\n};\n\nexport function strftime(fmt, d) {\n    var words = fmt.split(/(%#?\\S)/), wordno, word, alt, f, t = \"\";\n    if (d == null)\n        d = new Date;\n    else if (typeof d == \"number\")\n        d = new Date(d * 1000);\n    for (wordno = 0; wordno != words.length; ++wordno) {\n        word = words[wordno];\n        alt = word.charAt(1) == \"#\";\n        if (word.charAt(0) == \"%\"\n            && (f = unparsers[word.charAt(1 + alt)]))\n            t += f(d, alt);\n        else\n            t += word;\n    }\n    return t;\n}\n\nexport function sec2text(s, style) {\n    s = Math.round(s);\n    if (s > -60 && s < 60) {\n        return s + \"s\";\n    }\n    let t = s < 0 ? \"-\" : \"\";\n    s = Math.abs(s);\n    if (s >= 3600) {\n        if (s % 900 === 0 && style === \"quarterhour\") {\n            t = t.concat(s / 3600, \"h\");\n            s = 0;\n        } else {\n            const h = Math.floor(s / 3600);\n            t = t.concat(h, \"h\");\n            s -= h * 3600;\n            if (s < 60) {\n                t += \"0m\";\n            }\n        }\n    }\n    if (s >= 60) {\n        const m = Math.floor(s / 60);\n        t = t.concat(m, \"m\");\n        s -= m * 60;\n    }\n    if (s !== 0) {\n        t = t.concat(s, \"s\");\n    }\n    return t;\n}\n\n\nif (!window.JSON || !window.JSON.parse) {\n    window.JSON = {parse: $.parseJSON};\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n        return $(this).closest(s)[0];\n    };\n}\n\nif (!Element.prototype.replaceChildren) {\n    Element.prototype.replaceChildren = function () {\n        while (this.lastChild) {\n            this.removeChild(this.lastChild);\n        }\n        for (let i = 0; i !== arguments.length; ++i) {\n            this.append(arguments[i]);\n        }\n    };\n}\n\nif (!Element.prototype.checkVisibility) {\n    Element.prototype.checkVisibility = function () {\n        return this.offsetParent != null;\n    };\n}\n\nif (!String.prototype.startsWith) {\n    String.prototype.startsWith = function (search, pos) {\n        pos = !pos || pos < 0 ? 0 : +pos;\n        return this.substring(pos, pos + search.length) === search;\n    };\n}\n\nif (!String.prototype.endsWith) {\n    String.prototype.endsWith = function (search, this_len) {\n        if (this_len === undefined || this_len > this.length) {\n            this_len = this.length;\n        }\n        return this.substring(this_len - search.length, this_len) === search;\n    };\n}\n\nif (!String.prototype.trimStart) {\n    String.prototype.trimStart = function () {\n        return this.replace(/^[\\s\\uFEFF\\xA0]+/, '');\n    };\n}\n\nif (!Object.hasOwn) {\n    Object.defineProperty(Object, \"hasOwn\", {\n        value: Object.prototype.hasOwnProperty, configurable: true, writable: true\n    });\n}\n\n\nexport class ImmediatePromise {\n    constructor(value) {\n        this.value = value;\n    }\n    then(executor) {\n        try {\n            const v = executor(this.value);\n            if (v instanceof Promise || v instanceof ImmediatePromise) {\n                return v;\n            } else {\n                return new ImmediatePromise(v);\n            }\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    catch() {\n        return this;\n    }\n    finally(executor) {\n        try {\n            executor();\n        } catch {\n        }\n        return this;\n    }\n}\n\n\nexport function text_eq(a, b) {\n    if (a === b) {\n        return true;\n    } else {\n        a = (a == null ? \"\" : a).replace(/\\r\\n?/g, \"\\n\");\n        b = (b == null ? \"\" : b).replace(/\\r\\n?/g, \"\\n\");\n        return a === b;\n    }\n}\n\n\nexport function string_utf8_index(str, index) {\n    let r = 0, pos = 0;\n    const re = /([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y, len = str.length;\n    while (pos < len && index > 0) {\n        re.lastIndex = pos;\n        const m = re.exec(str);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            const n = Math.min(index, m[1].length);\n            r += n;\n            index -= n;\n        }\n        if (m[2].length) {\n            const n = Math.min(index, m[2].length * 2);\n            r += n / 2;\n            index -= n;\n        }\n        if (m[3].length) {\n            const n = Math.min(index, m[3].length * 3);\n            r += n / 3;\n            index -= n;\n        }\n        if (m[4].length) {\n            const n = Math.min(index, m[4].length * 2);\n            r += n / 2; // surrogate pairs\n            index -= n;\n        }\n        pos += m[0].length;\n    }\n    return r;\n}\n\n\nexport function friendly_boolean(str) {\n    if (str === false || str === true) {\n        return str;\n    } else if (str === 0 || str === 1) {\n        return str === 1;\n    } else if (typeof str !== \"string\") {\n        return null;\n    }\n    const m = /^(?:(y|yes|1|true|t|on)|(n|no|0|false|f|off))$/.exec(str);\n    if (m) {\n        return m[1] ? true : false;\n    }\n    return null;\n}\n","// ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let hasClass, addClass, removeClass, toggleClass, classList;\nif (\"classList\" in document.createElement(\"span\")\n    && !/MSIE|rv:11\\.0/.test(navigator.userAgent || \"\")) {\n    hasClass = function (e, k) {\n        let l = e.classList;\n        return l && l.contains(k);\n    };\n    addClass = function (e, k) {\n        e.classList.add(k);\n    };\n    removeClass = function (e, k) {\n        e.classList.remove(k);\n    };\n    toggleClass = function (e, k, v) {\n        e.classList.toggle(k, v);\n    };\n    classList = function (e) {\n        return e.classList;\n    };\n} else {\n    hasClass = function (e, k) {\n        return $(e).hasClass(k);\n    };\n    addClass = function (e, k) {\n        $(e).addClass(k);\n    };\n    removeClass = function (e, k) {\n        $(e).removeClass(k);\n    };\n    toggleClass = function (e, k, v) {\n        $(e).toggleClass(k, v);\n    };\n    classList = function (e) {\n        let k = $.trim(e.className);\n        return k === \"\" ? [] : k.split(/\\s+/);\n    };\n}\n\n\n// ui\nconst callbacks = {};\n\nfunction collect_callbacks(cbs, c, etype) {\n    for (let j = 0; j !== c.length; j += 3) {\n        if (!c[j] || c[j] === etype) {\n            let k = cbs.length;\n            while (k !== 0 && c[j+1] > cbs[k-2]) {\n                k -= 2;\n            }\n            cbs.splice(k, 0, c[j+1], c[j+2]);\n        }\n    }\n}\n\nfunction call_callbacks(cbs, element, event) {\n    for (let i = 0; i !== cbs.length && !event.isImmediatePropagationStopped(); i += 2) {\n        cbs[i+1].call(element, event);\n    }\n}\n\nexport function handle_ui(event) {\n    let e = event.target;\n    if ((e && (hasClass(e, \"ui\") || hasClass(e, \"uin\")))\n        || (this.tagName === \"A\" && hasClass(this, \"ui\"))) {\n        event.preventDefault();\n    }\n    let k = classList(this), cbs = null;\n    for (let i = 0; i < k.length; ++i) {\n        let c = callbacks[k[i]];\n        if (c) {\n            cbs = cbs || [];\n            collect_callbacks(cbs, c, event.type);\n        }\n    }\n    cbs && cbs.length && call_callbacks(cbs, this, event);\n}\n\nhandle_ui.on = function (className, callback, priority) {\n    let dot = className.indexOf(\".\"), type = null;\n    if (dot >= 0) {\n        type = className.substring(0, dot);\n        className = className.substring(dot + 1);\n    }\n    callbacks[className] = callbacks[className] || [];\n    callbacks[className].push(type, priority || 0, callback);\n};\n\nhandle_ui.trigger = function (className, event) {\n    let c = callbacks[className];\n    if (c) {\n        if (typeof event === \"string\") {\n            event = $.Event(event); // XXX IE8: `new Event` is not supported\n        }\n        let cbs = [];\n        collect_callbacks(cbs, c, event.type);\n        cbs.length && call_callbacks(cbs, this, event);\n    }\n};\n\n$(document).on(\"click\", \".ui, .uic\", handle_ui);\n$(document).on(\"change\", \".uich\", handle_ui);\n$(document).on(\"error\", \".ui-error\", handle_ui);\n$(document).on(\"input\", \".uii\", handle_ui);\n$(document).on(\"keydown\", \".uikd\", handle_ui);\n$(document).on(\"load\", \".ui-load\", handle_ui);\n$(document).on(\"mouseup mousedown\", \".uim\", handle_ui);\n$(document).on(\"unfold\", \".ui-unfold\", handle_ui);\n$(document).on(\"focusin\", \".ui-focusin\", handle_ui);\n$(document).on(\"focusout\", \".ui-focusout\", handle_ui);\n\n\nlet in_tab = false;\ndocument.addEventListener(\"keydown\", function (event) {\n    if (event.key === \"Tab\" && !event.metaKey) {\n        in_tab = true;\n    }\n});\ndocument.addEventListener(\"keyup\", function (event) {\n    if (event.key === \"Tab\" && !event.metaKey) {\n        in_tab = false;\n    }\n});\ndocument.addEventListener(\"focusin\", function (event) {\n    if (in_tab && event.target.nodeName === \"TEXTAREA\" && hasClass(event.target, \"ta1\")) {\n        requestAnimationFrame(() => {\n            $(event.target).scrollIntoView();\n            event.target.select();\n        });\n    }\n});\n\n\nexport function fold61(sel, arrowholder, direction) {\n    if (direction != null) {\n        direction = !direction;\n    }\n    toggleClass(sel, \"hidden\", direction);\n    if (arrowholder) {\n        const fa = arrowholder.querySelector(\"span.foldarrow\");\n        fa && fa.classList.toggle(\"isopen\", !hasClass(sel, \"hidden\"));\n    }\n    return false;\n}\n\n\nexport function input_is_checkboxlike(elt) {\n    return elt.type === \"checkbox\" || elt.type === \"radio\";\n}\n\nexport function input_is_buttonlike(elt) {\n    return elt.type === \"button\" || elt.type === \"submit\" || elt.type === \"reset\";\n}\n\nexport function input_successful(elt) {\n    if (elt.disabled || !elt.name)\n        return false;\n    else if (elt.type === \"checkbox\" || elt.type === \"radio\")\n        return elt.checked;\n    else\n        return elt.type !== \"button\" && elt.type !== \"submit\" && elt.type !== \"reset\";\n}\n\nexport function input_default_value(elt) {\n    if (elt.hasAttribute(\"data-default-value\")) {\n        return elt.getAttribute(\"data-default-value\");\n    } else if (input_is_checkboxlike(elt)) {\n        let checked = elt.defaultChecked;\n        if (elt.hasAttribute(\"data-default-checked\")) {\n            checked = elt.getAttribute(\"data-default-checked\") !== \"false\";\n        }\n        return checked ? elt.defaultValue : \"\";\n    } else {\n        return elt.defaultValue;\n    }\n}\n\nexport function input_set_default_value(elt, val) {\n    if (input_is_checkboxlike(elt)) {\n        // set dirty checkedness flag:\n        elt.checked = elt.checked; // eslint-disable-line no-self-assign\n        elt.removeAttribute(\"data-default-checked\");\n        elt.removeAttribute(\"data-default-value\");\n        if (val == null || val == \"\") {\n            elt.defaultChecked = false;\n        } else if (val == elt.value) {\n            elt.defaultChecked = true;\n        } else {\n            elt.setAttribute(\"data-default-value\", val);\n        }\n    } else {\n        // set dirty value flag:\n        elt.value = elt.value; // eslint-disable-line no-self-assign\n        if (elt.type !== \"select\") {\n            elt.removeAttribute(\"data-default-value\");\n            elt.defaultValue = val;\n        } else {\n            elt.setAttribute(\"data-default-value\", val);\n        }\n    }\n}\n\nfunction text_eq(a, b) {\n    if (a !== b) {\n        a = (a == null ? \"\" : a).replace(/\\r\\n?/g, \"\\n\");\n        b = (b == null ? \"\" : b).replace(/\\r\\n?/g, \"\\n\");\n    }\n    return a === b;\n}\n\nexport function input_differs(elt) {\n    const type = elt.type;\n    if (!type) {\n        if (elt instanceof RadioNodeList) {\n            for (let i = 0; i !== elt.length; ++i) {\n                if (input_differs(elt[i]))\n                    return true;\n            }\n        }\n        return false;\n    } else if (type === \"button\" || type === \"submit\" || type === \"reset\") {\n        return false;\n    } else if (type === \"checkbox\" || type === \"radio\") {\n        return elt.checked !== input_default_value(elt);\n    } else {\n        return !text_eq(elt.value, input_default_value(elt));\n    }\n}\n\nexport function form_differs(form) {\n    let coll;\n    if (form instanceof HTMLFormElement) {\n        coll = form.elements;\n    } else {\n        coll = $(form).find(\"input, select, textarea\");\n        coll.length || (coll = $(form).filter(\"input, select, textarea\"));\n    }\n    const colllen = coll.length;\n    for (let i = 0; i !== colllen; ++i) {\n        const e = coll[i];\n        if (e.name\n            && !hasClass(e, \"ignore-diff\")\n            && !e.disabled\n            && input_differs(e))\n            return e;\n    }\n    return null;\n}\n\nexport function check_form_differs(form, elt) {\n    (form instanceof HTMLElement) || (form = $(form)[0]);\n    const differs = (elt && form_differs(elt)) || form_differs(form);\n    toggleClass(form, \"differs\", !!differs);\n    if (form.hasAttribute(\"data-differs-toggle\")) {\n        $(\".\" + form.getAttribute(\"data-differs-toggle\")).toggleClass(\"hidden\", !differs);\n    }\n}\n\nexport function $e(tag, attr) {\n    const e = document.createElement(tag);\n    if (!attr) {\n        // nothing\n    } else if (typeof attr === \"string\") {\n        e.className = attr;\n    } else {\n        for (const i in attr) {\n            if (attr[i] == null) {\n                // skip\n            } else if (typeof attr[i] === \"boolean\") {\n                attr[i] ? e.setAttribute(i, \"\") : e.removeAttribute(i);\n            } else {\n                e.setAttribute(i, attr[i]);\n            }\n        }\n    }\n    for (let i = 2; i < arguments.length; ++i) {\n        if (arguments[i] != null) {\n            e.append(arguments[i]);\n        }\n    }\n    return e;\n}\n\nfunction awakenf() {\n    /*if (hasClass(this, \"need-diff-check\")) {\n        hotcrp.add_diff_check(this);\n    }*/\n    if (hasClass(this, \"need-autogrow\")) {\n        $(this).autogrow();\n    }\n    /*if (hasClass(this, \"need-suggest\")) {\n        hotcrp.suggest.call(this);\n    }*/\n    if (hasClass(this, \"need-tooltip\")) {\n        $pa.tooltip.call(this);\n    }\n}\n\n$.fn.awaken = function () {\n    this.each(awakenf);\n    //this.find(\".need-diff-check, .need-autogrow, .need-suggest, .need-tooltip\").each(awakenf);\n    this.find(\".need-autogrow, .need-tooltip\").each(awakenf);\n    return this;\n};\n\n$(function () { $(document.body).awaken(); });\n","// ui-key.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass } from \"./ui.js\";\n\n\nconst key_map = {\"Spacebar\": \" \", \"Esc\": \"Escape\"},\n    charCode_map = {\"9\": \"Tab\", \"13\": \"Enter\", \"27\": \"Escape\"},\n    keyCode_map = {\n        \"9\": \"Tab\", \"13\": \"Enter\", \"16\": \"ShiftLeft\", \"17\": \"ControlLeft\",\n        \"18\": \"AltLeft\", \"20\": \"CapsLock\", \"27\": \"Escape\", \"33\": \"PageUp\",\n        \"34\": \"PageDown\", \"37\": \"ArrowLeft\", \"38\": \"ArrowUp\", \"39\": \"ArrowRight\",\n        \"40\": \"ArrowDown\", \"91\": \"OSLeft\", \"92\": \"OSRight\", \"93\": \"OSRight\",\n        \"224\": \"OSLeft\", \"225\": \"AltRight\"\n    },\n    nonprintable_map = {\n        \"Alt\": 2,\n        \"AltLeft\": 2,\n        \"AltRight\": 2,\n        \"CapsLock\": 2,\n        \"Control\": 2,\n        \"ControlLeft\": 2,\n        \"ControlRight\": 2,\n        \"Meta\": 2,\n        \"OSLeft\": 2,\n        \"OSRight\": 2,\n        \"Shift\": 2,\n        \"ShiftLeft\": 2,\n        \"ShiftRight\": 2,\n        \"ArrowLeft\": 1,\n        \"ArrowRight\": 1,\n        \"ArrowUp\": 1,\n        \"ArrowDown\": 1,\n        \"Backspace\": 1,\n        \"Delete\": 1,\n        \"End\": 1,\n        \"Enter\": 1,\n        \"Escape\": 1,\n        \"Home\": 1,\n        \"PageUp\": 1,\n        \"PageDown\": 1,\n        \"Tab\": 1\n    };\n\nexport function event_key(evt) {\n    let x;\n    if (typeof evt === \"string\") {\n        return evt;\n    } else if ((x = evt.key) != null) {\n        return key_map[x] || x;\n    } else if ((x = evt.charCode)) {\n        return charCode_map[x] || String.fromCharCode(x);\n    } else if ((x = evt.keyCode)) {\n        if (keyCode_map[x]) {\n            return keyCode_map[x];\n        } else if ((x >= 48 && x <= 57) || (x >= 65 && x <= 90)) {\n            return String.fromCharCode(x);\n        }\n    } else {\n        return \"\";\n    }\n}\n\nevent_key.printable = function (evt) {\n    return !nonprintable_map[event_key(evt)]\n        && (typeof evt === \"string\" || !(evt.ctrlKey || evt.metaKey));\n};\nevent_key.is_modifier = function (evt) {\n    return nonprintable_map[event_key(evt)] > 1;\n};\nevent_key.is_default_a = function (evt, a) {\n    return !evt.shiftKey && !evt.metaKey && !evt.ctrlKey\n        && evt.button == 0\n        && (!a || !hasClass(\"ui\", a));\n};\nevent_key.modcode = function (evt) {\n    return (evt.shiftKey ? 1 : 0) + (evt.ctrlKey ? 2 : 0) + (evt.altKey ? 4 : 0) + (evt.metaKey ? 8 : 0);\n};\nevent_key.SHIFT = 1; // NB values matter\nevent_key.CTRL = 2;\nevent_key.ALT = 4;\nevent_key.META = 8;\n","// hoturl.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nfunction encodeURIComponentPlus(s) {\n    return encodeURIComponent(s).replace(/%20/g, \"+\");\n}\n\nfunction serialize_object(x) {\n    if (typeof x === \"string\") {\n        return x;\n    } else if (x) {\n        var k, v, a = [\"\"];\n        for (k in x) {\n            if ((v = x[k]) != null)\n                a.push(encodeURIComponent(k), \"=\", encodeURIComponentPlus(v), \"&\");\n        }\n        a[a.length - 1] = \"\";\n        return a.join(\"\");\n    } else {\n        return \"\";\n    }\n}\n\nfunction hoturl_clean_before(x, page_component, prefix) {\n    if (x.first !== false && x.v.length) {\n        for (var i = 0; i < x.v.length; ++i) {\n            var m = page_component.exec(x.v[i]);\n            if (m) {\n                x.pt += prefix + m[1] + \"/\";\n                x.v.splice(i, 1);\n                x.first = m[1];\n                return;\n            }\n        }\n        x.first = false;\n    }\n}\n\nfunction hoturl_clean(x, page_component) {\n    if (x.last !== false && x.v.length) {\n        for (var i = 0; i < x.v.length; ++i) {\n            var m = page_component.exec(x.v[i]);\n            if (m) {\n                x.t += \"/\" + m[1];\n                x.v.splice(i, 1);\n                x.last = m[1];\n                return;\n            }\n        }\n        x.last = false;\n    }\n}\n\nfunction hoturl_psetinfo(elt, page, args) {\n    const p = elt.closest(\".pa-psetinfo\");\n    let v;\n    if ((v = p.getAttribute(\"data-pa-user\") || siteinfo.uservalue)) {\n        args.push(\"u=\" + encodeURIComponent(v));\n    }\n    if ((v = p.getAttribute(\"data-pa-pset\"))) {\n        args.push(\"pset=\" + encodeURIComponent(v));\n    }\n    if ((v = p.getAttribute(\"data-pa-commit\"))) {\n        args.push(\"commit=\" + encodeURIComponent(v));\n    }\n    let sheet;\n    if ((page === \"api/grade\" || page === \"=api/grade\")\n        && (sheet = p.pa__gradesheet)) {\n        const enames = [];\n        for (let i in sheet.entries) {\n            enames.push(i);\n        }\n        args.push(\"knowngrades=\" + encodeURIComponentPlus(enames.join(\" \")));\n    }\n}\n\nexport function hoturl(page, options) {\n    let k, v, m, x, xv, anchor = \"\";\n    if (siteinfo.site_relative == null || siteinfo.suffix == null) {\n        siteinfo.site_relative = siteinfo.suffix = \"\";\n    }\n\n    if (typeof options === \"string\") {\n        if ((m = options.match(/^(.*?)(#.*)$/))) {\n            options = m[1];\n            anchor = m[2];\n        }\n        xv = options.split(/&/);\n    } else {\n        xv = [];\n        for (k in options) {\n            v = options[k];\n            if (v == null) {\n                /* do nothing */\n            } else if (k === \"anchor\") {\n                anchor = \"#\" + v;\n            } else if (k === \"psetinfo\" && v instanceof Element) {\n                hoturl_psetinfo(v, page, xv);\n            } else {\n                xv.push(encodeURIComponent(k).concat(\"=\", encodeURIComponentPlus(v)));\n            }\n        }\n    }\n\n    if (page.startsWith(\"=\")) {\n        xv.push(\"post=\" + siteinfo.postvalue);\n        page = page.substring(1);\n    }\n    x = {pt: \"\", v: xv, t: page + siteinfo.suffix};\n\n    if (page === \"help\") {\n        hoturl_clean(x, /^t=(\\w+)$/);\n    } else if (page.substr(0, 3) === \"api\") {\n        if (page.length > 3) {\n            x.t = \"api\" + siteinfo.suffix;\n            xv.push(\"fn=\" + page.substr(4));\n        }\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n        hoturl_clean(x, /^fn=(\\w+)$/);\n    } else if (page === \"index\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n    } else if (page === \"run\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n    } else if (page === \"pset\") {\n        hoturl_clean_before(x, /^u=([^?&#]+)$/, \"~\");\n        hoturl_clean(x, /^pset=([^?&#]+)$/);\n        hoturl_clean(x, /^commit=([0-9A-Fa-f]+)$/);\n    }\n\n    if (siteinfo.defaults) {\n        xv.push(serialize_object(siteinfo.defaults));\n    }\n    if (xv.length) {\n        x.t += \"?\" + xv.join(\"&\");\n    }\n    return siteinfo.site_relative + x.pt + x.t + anchor;\n}\n\nexport function hoturl_absolute_base() {\n    if (!siteinfo.absolute_base) {\n        siteinfo.absolute_base = new URL(siteinfo.base, document.baseURI).href;\n    }\n    return siteinfo.absolute_base;\n}\n\nexport function hoturl_get_go(page, options) {\n    window.location = hoturl(page, options);\n}\n\nexport function hoturl_post_go(page, options, data) {\n    const form = document.createElement(\"form\");\n    form.setAttribute(\"method\", \"post\");\n    form.setAttribute(\"enctype\", \"multipart/form-data\");\n    form.setAttribute(\"accept-charset\", \"UTF-8\");\n    form.action = hoturl(page, options);\n    data = data || {____empty____: 1};\n    for (let n in data) {\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.name = n;\n        input.value = data[n];\n        form.appendChild(input);\n    }\n    document.body.appendChild(form);\n    form.submit();\n}\n","// utils-errors.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hoturl } from \"./hoturl.js\";\n\nexport function log_jserror(errormsg, error, noconsole) {\n    if (!error && errormsg instanceof Error) {\n        error = errormsg;\n        errormsg = {\"error\": error.toString()};\n    } else if (typeof errormsg === \"string\") {\n        errormsg = {\"error\": errormsg};\n    }\n    if (error && error.fileName && !errormsg.url) {\n        errormsg.url = error.fileName;\n    }\n    if (error && error.lineNumber && !errormsg.lineno) {\n        errormsg.lineno = error.lineNumber;\n    }\n    if (error && error.columnNumber && !errormsg.colno) {\n        errormsg.colno = error.columnNumber;\n    }\n    if (error && error.stack) {\n        errormsg.stack = error.stack;\n    }\n    $.ajax(hoturl(\"=api/jserror\"), {\n        global: false, method: \"POST\", cache: false, data: errormsg\n    });\n    if (error && !noconsole && typeof console === \"object\" && console.error) {\n        console.error(errormsg.error);\n    }\n}\n\n\nlet old_onerror = window.onerror, nerrors_logged = 0;\nwindow.onerror = function (errormsg, url, lineno, colno, error) {\n    if ((url || !lineno)\n        && errormsg.indexOf(\"ResizeObserver loop limit exceeded\") < 0\n        && ++nerrors_logged <= 10) {\n        var x = {error: errormsg, url: url, lineno: lineno};\n        if (colno) {\n            x.colno = colno;\n        }\n        log_jserror(x, error, true);\n    }\n    return old_onerror ? old_onerror.apply(this, arguments) : false;\n};\n\n\n$(function () {\n    function locator(e) {\n        var p = [];\n        while (e && e.nodeName !== \"BODY\" && e.nodeName !== \"MAIN\") {\n            var t = e.nodeName, s = e.className.replace(/\\s+/g, \".\");\n            if (e.id !== \"\") {\n                t += \"#\" + e.id;\n            }\n            if (s !== \"\") {\n                t += \".\" + s;\n            }\n            p.push(t);\n            e = e.parentElement;\n        }\n        p.reverse();\n        return p.join(\">\");\n    }\n    var err = [], elt = [];\n    $(\"button.btn-link,button.btn-qlink,button.btn-qolink,.btn-xlink,.btn-ulink,.btn-disabled,a.qx,a.u,a.x\").each(function () {\n        err.push(locator(this));\n        elt.push(this);\n    });\n    if (err.length > 0) {\n        if (window.console) {\n            console.log(err.join(\"\\n\"));\n            for (var i = 0; i !== elt.length; ++i) {\n                console.log(elt[i]);\n            }\n        }\n        log_jserror(err.join(\"\\n\"));\n    }\n});\n","// ui-range.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\n\nhandle_ui.on(\"js-range-click\", function (event) {\n    if (event.type === \"change\") {\n        return;\n    }\n\n    const f = this.closest(\"form\"),\n        rangeclick_state = f.jsRangeClick || {},\n        kind = this.getAttribute(\"data-range-type\") || this.name;\n    f.jsRangeClick = rangeclick_state;\n\n    let key = false;\n    if (event.type === \"keydown\" && !event_key.modcode(event)) {\n        key = event_key(event);\n    }\n    if (rangeclick_state.__clicking__\n        || (event.type === \"updaterange\" && rangeclick_state[\"__update__\" + kind])\n        || (event.type === \"keydown\" && key !== \"ArrowDown\" && key !== \"ArrowUp\")) {\n        return;\n    }\n\n    // find checkboxes and groups of this type\n    const cbs = [], cbgs = [];\n    for (const cb of f.querySelectorAll(\"input.js-range-click\").values()) {\n        if (kind === (cb.getAttribute(\"data-range-type\") || cb.name)\n            && cb.checkVisibility()) {\n            cbs.push(cb);\n            if (hasClass(cb, \"is-range-group\"))\n                cbgs.push(cb);\n        }\n    }\n\n    // find positions\n    let lastelt = rangeclick_state[kind], thispos, lastpos;\n    for (let i = 0; i !== cbs.length; ++i) {\n        if (cbs[i] === this) {\n            thispos = i;\n        }\n        if (cbs[i] === lastelt) {\n            lastpos = i;\n        }\n    }\n\n    if (key) {\n        if (thispos !== 0 && key === \"ArrowUp\") {\n            --thispos;\n        } else if (thispos < cbs.length - 1 && key === \"ArrowDown\") {\n            ++thispos;\n        }\n        $(cbs[thispos]).focus().scrollIntoView();\n        event.preventDefault();\n        return;\n    }\n\n    // handle click\n    let group = false, single_group = false;\n    if (event.type === \"click\") {\n        rangeclick_state.__clicking__ = true;\n        let i, j;\n\n        if (hasClass(this, \"is-range-group\")) {\n            i = 0;\n            j = cbs.length - 1;\n            group = this.getAttribute(\"data-range-group\");\n        } else {\n            rangeclick_state[kind] = this;\n            if (event.shiftKey && lastelt) {\n                if (lastpos <= thispos) {\n                    i = lastpos;\n                    j = thispos - 1;\n                } else {\n                    i = thispos + 1;\n                    j = lastpos;\n                }\n            } else {\n                i = 1;\n                j = 0;\n                single_group = this.getAttribute(\"data-range-group\");\n            }\n        }\n\n        while (i <= j) {\n            if (cbs[i].checked !== this.checked\n                && !hasClass(cbs[i], \"is-range-group\")\n                && (!group || cbs[i].getAttribute(\"data-range-group\") === group))\n                $(cbs[i]).trigger(\"click\");\n            ++i;\n        }\n\n        delete rangeclick_state.__clicking__;\n    } else if (event.type === \"updaterange\") {\n        rangeclick_state[\"__updated__\" + kind] = true;\n    }\n\n    // update groups\n    for (const cbg of cbgs) {\n        const group = cbg.getAttribute(\"data-range-group\");\n        if (single_group && group !== single_group) {\n            continue;\n        }\n\n        let state = null;\n        for (const cb of cbs) {\n            if (cb.getAttribute(\"data-range-group\") === group\n                && !hasClass(cb, \"is-range-group\")) {\n                if (state === null) {\n                    state = cb.checked;\n                } else if (state !== cb.checked) {\n                    state = \"indeterminate\";\n                    break;\n                }\n            }\n        }\n\n        let changed = false;\n        if (state === \"indeterminate\") {\n            changed = !cbg.indeterminate;\n            cbg.indeterminate = true;\n            cbg.checked = true;\n        } else {\n            changed = cbg.indeterminate || cbg.checked !== state;\n            cbg.indeterminate = false;\n            cbg.checked = state;\n        }\n        if (changed || cbg === event.target) {\n            const event = new CustomEvent(\"rangechange\", {\n                bubbles: true, cancelable: true,\n                detail: {rangeType: kind, rangeGroup: group, newState: state}\n            });\n            f.dispatchEvent(event);\n        }\n    }\n}, -1);\n\n$(function () {\n    $(\".is-range-group\").each(function () {\n        handle_ui.trigger.call(this, \"js-range-click\", \"updaterange\");\n    });\n});\n","// xhr.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { log_jserror } from \"./utils-errors.js\";\n\nfunction jqxhr_error_ftext(jqxhr, status, errormsg) {\n    if (status === \"parsererror\")\n        return \"<0>Internal error: bad response from server\";\n    else if (errormsg)\n        return \"<0>\" + errormsg.toString();\n    else if (status === \"timeout\")\n        return \"<0>Connection timed out\";\n    else if (status)\n        return \"<0>Failed [\" + status + \"]\";\n    else\n        return \"<0>Failed\";\n}\n\n\nfunction check_message_list(data, options) {\n    if (typeof data === \"object\") {\n        if (data.message_list && !$.isArray(data.message_list)) {\n            log_jserror(options.url + \": bad message_list\");\n            data.message_list = [{message: \"<0>Internal error\", status: 2}];\n        } else if (data.error && !data.message_list) {\n            // log_jserror(options.url + \": `error` obsolete\"); // XXX backward compat\n            data.message_list = [{message: \"<0>\" + data.error, status: 2}];\n        } else if (data.warning) {\n            log_jserror(options.url + \": `warning` obsolete\"); // XXX backward compat\n        }\n    }\n}\n\nfunction check_sessioninfo(data, options) {\n    if (siteinfo.user.cid == data.sessioninfo.cid) {\n        siteinfo.postvalue = data.sessioninfo.postvalue;\n        $(\"form\").each(function () {\n            var m = /^([^#]*[&?;]post=)([^&?;#]*)/.exec(this.action);\n            if (m) {\n                this.action = m[1].concat(siteinfo.postvalue, this.action.substring(m[0].length));\n            }\n            this.elements.post && (this.elements.post.value = siteinfo.postvalue);\n        });\n    } else {\n        $(\"form\").each(function () {\n            this.elements.sessionreport && (this.elements.sessionreport = options.url.concat(\": bad response \", JSON.stringify(data.sessioninfo), \", current user \", JSON.stringify(siteinfo.user)));\n        });\n    }\n}\n\n$(document).ajaxError(function (event, jqxhr, settings, httperror) {\n    if (jqxhr.readyState != 4) {\n        return;\n    }\n    let data;\n    if (jqxhr.responseText && jqxhr.responseText.charAt(0) === \"{\") {\n        try {\n            data = JSON.parse(jqxhr.responseText);\n        } catch {\n        }\n    }\n    check_message_list(data, settings);\n    if (jqxhr.status !== 502) {\n        let msg = new URL(settings.url, document.baseURI).href + \" API failure: \";\n        if (siteinfo.user && siteinfo.user.email) {\n            msg += \"user \" + siteinfo.user.email + \", \";\n        }\n        msg += jqxhr.status;\n        if (httperror) {\n            msg += \", \" + httperror;\n        }\n        if (jqxhr.responseText) {\n            msg += \", \" + jqxhr.responseText.substring(0, 100);\n        }\n        log_jserror(msg);\n    }\n});\n\n\nlet tracked_out = 0, tracked_after = [];\n\n$.ajaxPrefilter(function (options /* originalOptions, jqxhr */) {\n    if (options.global === false) {\n        return;\n    }\n    let success = options.success || [], error = options.error;\n    function onsuccess(data) {\n        check_message_list(data, options);\n        if (typeof data === \"object\"\n            && data.sessioninfo\n            && options.url.startsWith(siteinfo.site_relative)\n            && (siteinfo.site_relative !== \"\" || !/^(?:[a-z][-a-z0-9+.]*:|\\/|\\.\\.(?:\\/|$))/i.test(options.url))) {\n            check_sessioninfo(data, options);\n        }\n    }\n    function onerror(jqxhr, status, errormsg) {\n        let rjson;\n        if (/application\\/json/.test(jqxhr.getResponseHeader(\"Content-Type\") || \"\")\n            && jqxhr.responseText) {\n            try {\n                rjson = JSON.parse(jqxhr.responseText);\n            } catch {\n            }\n        }\n        if (!rjson\n            || typeof rjson !== \"object\"\n            || rjson.ok !== false) {\n            rjson = {ok: false};\n        }\n        check_message_list(rjson, options);\n        if (!rjson.message_list) {\n            rjson.message_list = [{message: jqxhr_error_ftext(jqxhr, status, errormsg), status: 2}];\n        }\n        for (let i = 0; i !== success.length; ++i) {\n            success[i](rjson, jqxhr, status);\n        }\n    }\n    if (!$.isArray(success)) {\n        success = [success];\n    }\n    options.success = [onsuccess];\n    if (success.length) {\n        Array.prototype.push.apply(options.success, success);\n    }\n    options.error = [];\n    if (error) {\n        Array.prototype.push.apply(options.error, $.isArray(error) ? error : [error]);\n    }\n    options.error.push(onerror);\n    if (options.timeout == null) {\n        options.timeout = 10000;\n    }\n    if (options.dataType == null) {\n        options.dataType = \"json\";\n    }\n    if (options.trackOutstanding) {\n        ++tracked_out;\n    }\n});\n\n$(document).ajaxComplete(function (event, jqxhr, settings) {\n    if (settings.trackOutstanding && --tracked_out === 0) {\n        while (tracked_after.length) {\n            tracked_after.shift()();\n        }\n    }\n});\n\nexport function after_outstanding(f) {\n    if (f === undefined) {\n        return tracked_out > 0;\n    } else if (tracked_out > 0) {\n        tracked_after.push(f);\n    } else {\n        f();\n    }\n}\n\n\nlet cond_out = 0, cond_wait = [], cond_retry = [];\n\nexport function api_conditioner(url, data, method) {\n    if (typeof method === \"string\") {\n        method = {method: method};\n    }\n    return new Promise(function (resolve) {\n        api_conditioner.then(function () {\n            $.ajax(url, Object.assign({\n                data: data, method: \"POST\", cache: false, dataType: \"json\",\n                success: function (data) {\n                    resolve(data);\n                    api_conditioner.done();\n                }\n            }, method || {}));\n        });\n    });\n}\n\napi_conditioner.then = function (f) {\n    // call `f` when ready. `f` calls `api_conditioner.done()` or\n    // `api_conditioner.retry(f)` when done\n    if (cond_out < 5) {\n        ++cond_out;\n        f();\n    } else {\n        cond_wait.push(f);\n    }\n};\n\nfunction api_conditioner_next() {\n    if (cond_out < 1 || cond_out > 5) {\n        throw new Error(\"api_conditioner outstanding error \" + cond_out);\n    }\n    if (cond_wait.length) {\n        cond_wait.shift()();\n    } else {\n        --cond_out;\n    }\n}\n\napi_conditioner.done = function () {\n    if (cond_retry.length) {\n        cond_wait.unshift(...cond_retry);\n        cond_retry.length = 0;\n    }\n    api_conditioner_next();\n};\n\napi_conditioner.retry = function (f) {\n    cond_retry.push(f);\n    api_conditioner_next();\n};\n","// ui-sessionlist.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { wstorage } from \"./utils.js\";\nimport { hoturl_absolute_base } from \"./hoturl.js\";\nimport { after_outstanding } from \"./xhr.js\";\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\n\n\nlet cookie_set_at;\n\nfunction make_link_callback(elt) {\n    return function () {\n        window.location = elt.href;\n    };\n}\n\nfunction list_digest_update(info) {\n    var add = typeof info === \"string\" ? 1 : 0,\n        digests = wstorage.site_json(false, \"list_digests\") || [],\n        found = -1, now = new Date().getTime();\n    for (var i = 0; i < digests.length; ++i) {\n        var digest = digests[i];\n        if (digest[add] === info) {\n            found = i;\n        } else if (digest[2] < now - 30000) {\n            digests.splice(i, 1);\n            --i;\n        } else if (now <= digest[0]) {\n            now = digest[0] + 1;\n        }\n    }\n    if (found >= 0) {\n        digests[found][2] = now;\n    } else if (add) {\n        digests.push([now, info, now]);\n        found = digests.length - 1;\n    }\n    wstorage.site(false, \"list_digests\", digests);\n    if (found >= 0) {\n        return digests[found][1 - add];\n    } else {\n        return false;\n    }\n}\n\nfunction list_digest_create(info) {\n    var digest = list_digest_update(info);\n    return digest ? \"list\" + digest : info;\n}\n\nfunction list_digest_resolve(info) {\n    var xinfo, m;\n    if ((m = /^list(\\d+)(?=\\s|$)/.exec(info))\n        && (xinfo = list_digest_update(+m[1]))) {\n        return xinfo;\n    } else {\n        return info;\n    }\n}\n\nfunction set_prevnext(info, sitehref) {\n    var m = /(?:^|\\/)(~[^/]+)\\/pset(?:|\\.php)\\/([^/]+)((?:\\/[0-9a-f]+)?)(?=[/?#]|$)/.exec(sitehref), want1, want2;\n    if (m) {\n        info = JSON.parse(info);\n        if (!info.pset) {\n            want2 = m[1] + \"/pset/\" + m[2];\n            want1 = want2 + m[3];\n        } else if (info.pset === m[2]) {\n            want1 = want2 = m[1];\n        } else {\n            return \"\";\n        }\n        var idx = info.items.indexOf(want1);\n        if (idx < 0 && want2 !== want1) {\n            idx = info.items.indexOf(want2);\n        }\n        if (idx >= 0) {\n            return \" \" + JSON.stringify({\n                cur: m[1] + \"/pset/\" + m[2],\n                prev: idx === 0 ? null : info.items[idx-1],\n                next: idx === info.items.length - 1 ? null : info.items[idx+1]\n            });\n        }\n    }\n    return \"\";\n}\n\nfunction set_cookie(info, sitehref) {\n    info = list_digest_resolve(info);\n    let digest = list_digest_create(info);\n    if (sitehref && /(?:^|\\/)pset(?:|\\.php)\\//.test(sitehref)) {\n        digest += set_prevnext(info, sitehref);\n    }\n    cookie_set_at = new Date().getTime();\n    let cookie = `hotlist-info-${cookie_set_at}=${encodeURIComponent(digest)}${siteinfo.cookie_params}; Max-Age=20`, m;\n    if (siteinfo.site_relative && (m = /^[a-z]+:\\/\\/[^/]*(\\/.*)/.exec(hoturl_absolute_base()))) {\n        cookie += \"; Path=\" + m[1];\n    }\n    document.cookie = cookie;\n}\n\nfunction is_listable(sitehref) {\n    return /(?:^|\\/)pset(?:|\\.php)(?:$|\\/)/.test(sitehref);\n}\n\nfunction handle_list(e, href) {\n    let hl, sitehref;\n    if (!href\n        || !href.startsWith(siteinfo.site_relative)\n        || !is_listable((sitehref = href.substring(siteinfo.site_relative.length)))\n        || !(hl = e.closest(\".has-hotlist\"))) {\n        return;\n    }\n    let info = hl.getAttribute(\"data-hotlist\");\n    if (!info) {\n        const event = new CustomEvent(\"pa-hotlist\", {\n            bubbles: true, cancelable: true,\n            detail: {hotlist: null}\n        });\n        hl.dispatchEvent(event);\n        info = event.detail.hotlist;\n        if (info && typeof info !== \"string\") {\n            info = JSON.stringify(info);\n        }\n    }\n    info && set_cookie(info, sitehref);\n}\n\nfunction unload_list() {\n    var hl = document.body.getAttribute(\"data-hotlist\");\n    if (hl && (!cookie_set_at || cookie_set_at + 3 < new Date().getTime())) {\n        set_cookie(hl, location.href);\n    }\n}\n\nfunction list_default_click() {\n    var base = location.href;\n    if (location.hash) {\n        base = base.substring(0, base.length - location.hash.length);\n    }\n    if (this.href.substring(0, base.length + 1) === base + \"#\") {\n        return true;\n    } else if (after_outstanding()) {\n        after_outstanding(make_link_callback(this));\n        return true;\n    } else {\n        return false;\n    }\n}\n\n$(document).on(\"click\", \"a\", function (evt) {\n    if (!hasClass(this, \"ui\")) {\n        if (!event_key.is_default_a(evt)\n            || this.target\n            || !list_default_click.call(this, evt)) {\n            handle_list(this, this.getAttribute(\"href\"));\n        }\n    }\n});\n\n$(document).on(\"submit\", \"form\", function (evt) {\n    if (hasClass(this, \"ui-submit\")) {\n        evt.preventDefault();\n        handle_ui.call(this, evt);\n    } else {\n        handle_list(this, this.getAttribute(\"action\"));\n    }\n});\n\n$(window).on(\"beforeunload\", unload_list);\n\n$(function () {\n    // resolve list digests\n    $(\".has-hotlist\").each(function () {\n        var info = this.getAttribute(\"data-hotlist\");\n        if (info\n            && info.startsWith(\"list\")\n            && (info = list_digest_resolve(info))) {\n            this.setAttribute(\"data-hotlist\", info);\n        }\n    });\n});\n","// encoders.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nconst ee_re = /[&<>\"']/g,\n    ee_rep = {\"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", \"\\\"\": \"&quot;\", \"'\": \"&#39;\"};\n\nexport function escape_entities(s) {\n    if (s !== null && typeof s !== \"number\")\n        return s.replace(ee_re, function (match) { return ee_rep[match]; });\n    else\n        return s;\n}\n\nconst ue_re = /&.*?;/g,\n    ue_rep = {\"&amp;\": \"&\", \"&lt;\": \"<\", \"&gt;\": \">\", \"&quot;\": \"\\\"\", \"&apos;\": \"'\", \"&#039;\": \"'\", \"&#39;\": \"'\"};\n\nexport function unescape_entities(s) {\n    if (s !== null && typeof s !== \"number\")\n        return s.replace(ue_re, function (match) { return ue_rep[match]; });\n    else\n        return s;\n}\n\nconst urle_re = /%20|[!~*'()]/g,\n    urle_rep = {\"%20\": \"+\", \"!\": \"%21\", \"~\": \"%7E\", \"*\": \"%2A\", \"'\": \"%27\", \"(\": \"%28\", \")\": \"%29\"};\n\nexport function urlencode(s) {\n    if (s !== null && typeof s !== \"number\")\n        return encodeURIComponent(s).replace(urle_re, function (match) { return urle_rep[match]; });\n    else\n        return s;\n}\n\nexport function urldecode(s) {\n    if (s !== null && typeof s !== \"number\")\n        return decodeURIComponent(s.replace(/\\+/g, \"%20\"));\n    else\n        return s;\n}\n\nexport function text_to_html(text) {\n    var n = document.createElement(\"div\");\n    n.appendChild(document.createTextNode(text));\n    return n.innerHTML;\n}\n\nexport function regexp_quote(s, charclass) {\n    if (!charclass) {\n        s = String(s).replace(/([$()*+./?[\\\\\\]^{|}])/g, '\\\\$1');\n    } else {\n        s = String(s).replace(/([-$()*+./?[\\\\\\]^{|}])/g, '\\\\$1');\n    }\n    return s.replace(/\\x08/g, '\\\\x08');\n}\n\nexport function html_id_encode(s) {\n    return encodeURIComponent(s).replace(/[^-A-Za-z0-9_.%]|%../g, function (s) {\n        if (s.length === 1) {\n            return \"@\" + s.charCodeAt(0).toString(16);\n        } else if (s === \"%2F\") {\n            return \"/\";\n        } else {\n            return \"@\" + s.substring(1);\n        }\n    });\n}\n\nexport function html_id_decode(s) {\n    return decodeURIComponent(s.replace(/@/g, \"%\"));\n}\n","// tooltip.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { removeClass } from \"./ui.js\";\nimport { text_to_html, escape_entities } from \"./encoders.js\";\n\n\nconst capdir = [\"Top\", \"Right\", \"Bottom\", \"Left\"],\n    lcdir = [\"top\", \"right\", \"bottom\", \"left\"],\n    szdir = [\"height\", \"width\"],\n    SPACE = 8;\n\nfunction geometry_translate(g, offset) {\n    g = $.extend({}, g);\n    g.top += offset.top;\n    g.right += offset.left;\n    g.bottom += offset.top;\n    g.left += offset.left;\n    return g;\n}\n\nfunction cssborder(dir, suffix) {\n    return \"border\" + capdir[dir] + suffix;\n}\n\nfunction cssbc(dir) {\n    return cssborder(dir, \"Color\");\n}\n\nlet roundpixel = Math.round;\nif (window.devicePixelRatio && window.devicePixelRatio > 1) {\n    roundpixel = (function (dpr) {\n        return function (x) { return Math.round(x * dpr) / dpr; };\n    })(window.devicePixelRatio);\n}\n\nfunction to_rgba(c) {\n    var m = c.match(/^rgb\\((.*)\\)$/);\n    return m ? \"rgba(\" + m[1] + \", 1)\" : c;\n}\n\nfunction make_model(color) {\n    const div = document.createElement(\"div\");\n    div.className = \"bubble hidden\" + color;\n    const tail = document.createElement(\"div\");\n    tail.className = \"bubtail bubtail0 nomargin\" + color;\n    div.appendChild(tail);\n    document.body.appendChild(div);\n    return div;\n}\n\nfunction calculate_sizes(color) {\n    const model = make_model(color),\n        $tail = $(model).children(),\n        sizes = [$tail.width(), $tail.height()],\n        css = window.getComputedStyle(model);\n    for (let ds = 0; ds !== 4; ++ds) {\n        let x = css[\"margin\" + capdir[ds]];\n        if (!x || !(x = parseFloat(x))) {\n            x = 0;\n        }\n        sizes[lcdir[ds]] = x;\n    }\n    model.remove();\n    return sizes;\n}\n\n// bubbles and tooltips\nexport function Bubble(content, bubopt) {\n    if (!bubopt && content && typeof content === \"object\") {\n        bubopt = content;\n        content = bubopt.content;\n    } else if (!bubopt)\n        bubopt = {};\n    else if (typeof bubopt === \"string\")\n        bubopt = {color: bubopt};\n\n    var nearpos = null, dirspec = bubopt.dir, dir = null,\n        color = bubopt.color ? \" \" + bubopt.color : \"\";\n\n    let bubdiv = document.createElement(\"div\");\n    bubdiv.className = \"bubble nomargin\" + color;\n    {\n        let bubtail0 = document.createElement(\"div\");\n        bubtail0.className = \"bubtail bubtail0 nomargin\" + color;\n        let bubcontent = document.createElement(\"div\");\n        let bubtail1 = document.createElement(\"div\");\n        bubtail1.className = \"bubtail bubtail1 nomargin\" + color;\n        bubdiv.append(bubtail0, bubcontent, bubtail1);\n        bubtail0.style.width = bubtail0.style.height =\n            bubtail1.style.width = bubtail1.style.height = \"0px\";\n    }\n    document.body.appendChild(bubdiv);\n    if (bubopt[\"pointer-events\"]) {\n        $(bubdiv).css({\"pointer-events\": bubopt[\"pointer-events\"]});\n    }\n    var bubch = bubdiv.childNodes;\n    var sizes = null;\n    var divbw = null;\n\n    function change_tail_direction() {\n        var bw = [0, 0, 0, 0], trw = sizes[1], trh = sizes[0] / 2;\n        divbw = parseFloat($(bubdiv).css(cssborder(dir, \"Width\")));\n        divbw !== divbw && (divbw = 0); // eliminate NaN\n        bw[dir^1] = bw[dir^3] = trh + \"px\";\n        bw[dir^2] = trw + \"px\";\n        bubch[0].style.borderWidth = bw.join(\" \");\n        bw[dir^1] = bw[dir^3] = trh + \"px\";\n        bw[dir^2] = trw + \"px\";\n        bubch[2].style.borderWidth = bw.join(\" \");\n\n        for (var i = 1; i <= 3; ++i)\n            bubch[0].style[lcdir[dir^i]] = bubch[2].style[lcdir[dir^i]] = \"\";\n        bubch[0].style[lcdir[dir]] = (-trw - divbw) + \"px\";\n        // Offset the inner triangle so that the border width in the diagonal\n        // part of the tail, is visually similar to the border width\n        var trdelta = (divbw / trh) * Math.sqrt(trw * trw + trh * trh);\n        bubch[2].style[lcdir[dir]] = (-trw - divbw + trdelta) + \"px\";\n\n        for (i = 0; i < 3; i += 2)\n            bubch[i].style.borderLeftColor = bubch[i].style.borderRightColor =\n            bubch[i].style.borderTopColor = bubch[i].style.borderBottomColor = \"transparent\";\n\n        var yc = to_rgba($(bubdiv).css(\"backgroundColor\")).replace(/([\\d.]+)\\)/, function (s, p1) {\n            return (0.75 * p1 + 0.25) + \")\";\n        });\n        bubch[0].style[cssbc(dir^2)] = $(bubdiv).css(cssbc(dir));\n        bubch[2].style[cssbc(dir^2)] = yc;\n    }\n\n    function constrainmid(nearpos, wpos, ds, ds2) {\n        var z0 = nearpos[lcdir[ds]], z1 = nearpos[lcdir[ds^2]],\n            z = (1 - ds2) * z0 + ds2 * z1;\n        z = Math.max(z, Math.min(z1, wpos[lcdir[ds]] + SPACE));\n        return Math.min(z, Math.max(z0, wpos[lcdir[ds^2]] - SPACE));\n    }\n\n    function constrain(za, wpos, bpos, ds, ds2, noconstrain) {\n        var z0 = wpos[lcdir[ds]], z1 = wpos[lcdir[ds^2]],\n            bdim = bpos[szdir[ds&1]],\n            z = za - ds2 * bdim;\n        if (!noconstrain && z < z0 + SPACE)\n            z = Math.min(za - sizes[0], z0 + SPACE);\n        else if (!noconstrain && z + bdim > z1 - SPACE)\n            z = Math.max(za + sizes[0] - bdim, z1 - SPACE - bdim);\n        return z;\n    }\n\n    function bpos_wconstraint(wpos, ds) {\n        var xw = Math.max(ds === 3 ? 0 : nearpos.left - wpos.left,\n                          ds === 1 ? 0 : wpos.right - nearpos.right);\n        if ((ds === \"h\" || ds === 1 || ds === 3) && xw > 100)\n            return Math.min(wpos.width, xw) - 3*SPACE;\n        else\n            return wpos.width - 3*SPACE;\n    }\n\n    function make_bpos(wpos, ds) {\n        var $b = $(bubdiv);\n        $b.css(\"maxWidth\", \"\");\n        var bg = $b.geometry(true);\n        var wconstraint = bpos_wconstraint(wpos, ds);\n        if (wconstraint < bg.width) {\n            $b.css(\"maxWidth\", wconstraint);\n            bg = $b.geometry(true);\n        }\n        // bpos[D] is the furthest position in direction D, assuming\n        // the bubble was placed on that side. E.g., bpos[0] is the\n        // top of the bubble, assuming the bubble is placed over the\n        // reference.\n        var bpos = [nearpos.top - sizes.bottom - bg.height - sizes[0],\n                    nearpos.right + sizes.left + bg.width + sizes[0],\n                    nearpos.bottom + sizes.top + bg.height + sizes[0],\n                    nearpos.left - sizes.right - bg.width - sizes[0]];\n        bpos.width = bg.width;\n        bpos.height = bg.height;\n        bpos.wconstraint = wconstraint;\n        return bpos;\n    }\n\n    function remake_bpos(bpos, wpos, ds) {\n        var wconstraint = bpos_wconstraint(wpos, ds);\n        if ((wconstraint < bpos.wconstraint && wconstraint < bpos.width)\n            || (wconstraint > bpos.wconstraint && bpos.width >= bpos.wconstraint))\n            bpos = make_bpos(wpos, ds);\n        return bpos;\n    }\n\n    function parse_dirspec(dirspec, pos) {\n        var res;\n        if (dirspec.length > pos\n            && (res = \"0123trblnesw\".indexOf(dirspec.charAt(pos))) >= 0)\n            return res % 4;\n        return -1;\n    }\n\n    function csscornerradius(corner, index) {\n        var divbr = $(bubdiv).css(\"border\" + corner + \"Radius\"), pos;\n        if (!divbr)\n            return 0;\n        if ((pos = divbr.indexOf(\" \")) > -1)\n            divbr = index ? divbr.substring(pos + 1) : divbr.substring(0, pos);\n        return parseFloat(divbr);\n    }\n\n    function constrainradius(x, bpos, ds) {\n        var x0, x1;\n        if (ds & 1) {\n            x0 = csscornerradius(capdir[0] + capdir[ds], 1);\n            x1 = csscornerradius(capdir[2] + capdir[ds], 1);\n        } else {\n            x0 = csscornerradius(capdir[ds] + capdir[3], 1);\n            x1 = csscornerradius(capdir[ds] + capdir[1], 1);\n        }\n        return Math.min(Math.max(x, x0), bpos[szdir[(ds&1)^1]] - x1 - sizes[0]);\n    }\n\n    function show() {\n        sizes = sizes || calculate_sizes(color);\n\n        // parse dirspec\n        if (dirspec == null)\n            dirspec = \"r\";\n        var noflip = /!/.test(dirspec),\n            noconstrain = /\\*/.test(dirspec),\n            dsx = dirspec.replace(/[^a0-3neswtrblhv]/, \"\"),\n            ds = parse_dirspec(dsx, 0),\n            ds2 = parse_dirspec(dsx, 1);\n        if (ds >= 0 && ds2 >= 0 && (ds2 & 1) != (ds & 1))\n            ds2 = (ds2 === 1 || ds2 === 2 ? 1 : 0);\n        else\n            ds2 = 0.5;\n        if (ds < 0)\n            ds = /^[ahv]$/.test(dsx) ? dsx : \"a\";\n\n        var wpos = $(window).geometry();\n        var bpos = make_bpos(wpos, dsx);\n\n        if (ds === \"a\") {\n            if (bpos.height + sizes[0] > Math.max(nearpos.top - wpos.top, wpos.bottom - nearpos.bottom)) {\n                ds = \"h\";\n                bpos = remake_bpos(bpos, wpos, ds);\n            } else\n                ds = \"v\";\n        }\n\n        var wedge = [wpos.top + 3*SPACE, wpos.right - 3*SPACE,\n                     wpos.bottom - 3*SPACE, wpos.left + 3*SPACE];\n        if ((ds === \"v\" || ds === 0 || ds === 2) && !noflip && ds2 < 0\n            && bpos[2] > wedge[2] && bpos[0] < wedge[0]\n            && (bpos[3] >= wedge[3] || bpos[1] <= wedge[1])) {\n            ds = \"h\";\n            bpos = remake_bpos(bpos, wpos, ds);\n        }\n        if ((ds === \"v\" && bpos[2] > wedge[2] && bpos[0] > wedge[0])\n            || (ds === 0 && !noflip && bpos[2] > wpos.bottom\n                && wpos.top - bpos[0] < bpos[2] - wpos.bottom)\n            || (ds === 2 && (noflip || bpos[0] >= wpos.top + SPACE)))\n            ds = 2;\n        else if (ds === \"v\" || ds === 0 || ds === 2)\n            ds = 0;\n        else if ((ds === \"h\" && bpos[3] - wpos.left < wpos.right - bpos[1])\n                 || (ds === 1 && !noflip && bpos[3] < wpos.left)\n                 || (ds === 3 && (noflip || bpos[1] <= wpos.right - SPACE)))\n            ds = 3;\n        else\n            ds = 1;\n        bpos = remake_bpos(bpos, wpos, ds);\n\n        if (ds !== dir) {\n            dir = ds;\n            change_tail_direction();\n        }\n\n        var x, y, xa, ya, d;\n        var divbw = parseFloat($(bubdiv).css(cssborder(ds & 1 ? 0 : 3, \"Width\")));\n        if (ds & 1) {\n            ya = constrainmid(nearpos, wpos, 0, ds2);\n            y = constrain(ya, wpos, bpos, 0, ds2, noconstrain);\n            d = constrainradius(roundpixel(ya - y - sizes[0] / 2 - divbw), bpos, ds);\n            bubch[0].style.top = bubch[2].style.top = d + \"px\";\n\n            if (ds == 1)\n                x = nearpos.left - sizes.right - bpos.width - sizes[1] - 1;\n            else\n                x = nearpos.right + sizes.left + sizes[1];\n        } else {\n            xa = constrainmid(nearpos, wpos, 3, ds2);\n            x = constrain(xa, wpos, bpos, 3, ds2, noconstrain);\n            d = constrainradius(roundpixel(xa - x - sizes[0] / 2 - divbw), bpos, ds);\n            bubch[0].style.left = bubch[2].style.left = d + \"px\";\n\n            if (ds == 0)\n                y = nearpos.bottom + sizes.top + sizes[1];\n            else\n                y = nearpos.top - sizes.bottom - bpos.height - sizes[1] - 1;\n        }\n\n        bubdiv.style.left = roundpixel(x) + \"px\";\n        bubdiv.style.top = roundpixel(y) + \"px\";\n        bubdiv.style.visibility = \"visible\";\n    }\n\n    function remove() {\n        bubdiv && bubdiv.parentElement.removeChild(bubdiv);\n        bubdiv = null;\n    }\n\n    let bubble = {\n        near: function (epos, reference) {\n            if (typeof epos === \"string\" || epos.tagName || epos.jquery) {\n                epos = $(epos);\n                if (dirspec == null && epos[0]) {\n                    dirspec = epos[0].getAttribute(\"data-tooltip-dir\");\n                }\n                epos = epos.geometry(true);\n            }\n            for (let i = 0; i < 4; ++i) {\n                if (!(lcdir[i] in epos) && (lcdir[i ^ 2] in epos))\n                    epos[lcdir[i]] = epos[lcdir[i ^ 2]];\n            }\n            if (reference && (reference = $(reference)) && reference.length\n                && reference[0] != window) {\n                epos = geometry_translate(epos, reference.geometry());\n            }\n            nearpos = epos;\n            show();\n            return bubble;\n        },\n        at: function (x, y, reference) {\n            return bubble.near({top: y, left: x}, reference);\n        },\n        dir: function (dir) {\n            dirspec = dir;\n            return bubble;\n        },\n        remove: remove,\n        color: function (newcolor) {\n            newcolor = newcolor ? \" \" + newcolor : \"\";\n            if (color !== newcolor) {\n                color = newcolor;\n                bubdiv.className = \"bubble\" + color;\n                bubch[0].className = \"bubtail bubtail0\" + color;\n                bubch[2].className = \"bubtail bubtail1\" + color;\n                dir = sizes = null;\n                nearpos && show();\n            }\n            return bubble;\n        },\n        html: function (content) {\n            var n = bubch[1];\n            if (content === undefined)\n                return n.innerHTML;\n            if (typeof content === \"string\"\n                && content === n.innerHTML\n                && bubdiv.style.visibility === \"visible\")\n                return bubble;\n            nearpos && $(bubdiv).css({maxWidth: \"\", left: \"\", top: \"\"});\n            if (typeof content === \"string\")\n                n.innerHTML = content;\n            else {\n                while (n.childNodes.length)\n                    n.removeChild(n.childNodes[0]);\n                if (content && content.jquery)\n                    content.appendTo(n);\n                else\n                    n.appendChild(content);\n            }\n            nearpos && show();\n            return bubble;\n        },\n        text: function (text) {\n            if (text === undefined)\n                return $(bubch[1]).text();\n            else\n                return bubble.html(text ? text_to_html(text) : text);\n        },\n        content_node: function () {\n            return bubch[1].firstChild;\n        },\n        hover: function (enter, leave) {\n            $(bubdiv).hover(enter, leave);\n            return bubble;\n        },\n        removeOn: function (jq, event) {\n            if (arguments.length > 1)\n                $(jq).on(event, remove);\n            else if (bubdiv)\n                $(bubdiv).on(jq, remove);\n            return bubble;\n        },\n        self: function () {\n            return bubdiv ? $(bubdiv) : null;\n        },\n        outerHTML: function () {\n            return bubdiv ? bubdiv.outerHTML : null;\n        }\n    };\n\n    content && bubble.html(content);\n    return bubble;\n}\n\n\nlet builders = {};\nexport let global_tooltip = null;\n\nfunction prepare_info(elt, info) {\n    var xinfo = elt.getAttribute(\"data-tooltip-info\");\n    if (xinfo) {\n        if (typeof xinfo === \"string\" && xinfo.charAt(0) === \"{\") {\n            xinfo = JSON.parse(xinfo);\n        } else if (typeof xinfo === \"string\") {\n            xinfo = {builder: xinfo};\n        }\n        info = $.extend(xinfo, info);\n    }\n    if (info.builder && builders[info.builder]) {\n        info = builders[info.builder].call(elt, info) || info;\n    }\n    if (info.dir == null || elt.hasAttribute(\"data-tooltip-dir\")) {\n        info.dir = elt.getAttribute(\"data-tooltip-dir\") || \"v\";\n    }\n    if (info.type == null || elt.hasAttribute(\"data-tooltip-type\")) {\n        info.type = elt.getAttribute(\"data-tooltip-type\");\n    }\n    if (info.className == null || elt.hasAttribute(\"data-tooltip-class\")) {\n        info.className = elt.getAttribute(\"data-tooltip-class\") || \"tooltip dark\";\n    }\n    if (elt.hasAttribute(\"data-tooltip\")) {\n        info.content = elt.getAttribute(\"data-tooltip\");\n    } else if (info.content == null) {\n        if (elt.hasAttribute(\"aria-label\")) {\n            info.content = elt.getAttribute(\"aria-label\");\n        } else if (elt.hasAttribute(\"title\")) {\n            info.content = elt.getAttribute(\"title\");\n        }\n    }\n    if (elt.hasAttribute(\"data-tooltip-delay\")) {\n        info.delay = parseInt(elt.getAttribute(\"data-tooltip-delay\"));\n    } else if (info.delay == null && (info.type == null || info.type === \"hover\")) {\n        info.delay = 150;\n    }\n    return info;\n}\n\nfunction show_tooltip(info) {\n    if (window.disable_tooltip) {\n        return null;\n    }\n\n    const self = this;\n    if (info && typeof info === \"string\") {\n        info = {builder: info};\n    } else if (info instanceof HTMLElement) {\n        info = {content: info};\n    } else {\n        info = Object.assign({}, info || {});\n    }\n    info = prepare_info(self, info);\n    info.element = this;\n\n    var tt, bub = null, to = null, near = null, delayto = null,\n        refcount = 1, content = info.content;\n\n    function close() {\n        to = clearTimeout(to);\n        bub && bub.remove();\n        $(self).removeData(\"tooltipState\");\n        if (global_tooltip === tt) {\n            global_tooltip = null;\n        }\n    }\n\n    function show_bub() {\n        if (delayto || refcount === 0) {\n            // do not show\n            return;\n        }\n        if (!content) {\n            // remove\n            bub && bub.remove();\n            bub = near = null;\n        } else if (content instanceof Promise) {\n            content.then(function (nc) {\n                content = nc;\n                show_bub();\n            });\n        } else if (bub) {\n            bub.html(content);\n        } else {\n            bub = Bubble(content, {color: info.className, dir: info.dir});\n            near = info.near || info.element;\n            bub.near(near).hover(tt.enter, tt.exit);\n        }\n    }\n\n    tt = {\n        enter: function () {\n            to = clearTimeout(to);\n            ++refcount;\n            return tt;\n        },\n        exit: function () {\n            var delay = info.type === \"focus\" ? 0 : 200;\n            to = clearTimeout(to);\n            if (--refcount <= 0 && info.type !== \"sticky\") {\n                to = setTimeout(close, delay);\n            }\n            return tt;\n        },\n        close: close,\n        _element: self,\n        html: function (new_content) {\n            if (new_content === undefined) {\n                return content;\n            } else {\n                content = new_content;\n                show_bub();\n                return tt;\n            }\n        },\n        text: function (new_text) {\n            return tt.html(escape_entities(new_text));\n        },\n        near: function () {\n            return near;\n        },\n        noDelayClass: function () {\n            return info.noDelayClass;\n        }\n    };\n\n    {\n        let tx = global_tooltip;\n        if (tx\n            && tx._element === info.element\n            && tx.html() === content) {\n            tt = tx;\n        } else {\n            tx && tx.close();\n            $(self).data(\"tooltipState\", tt);\n            if (info.delay\n                && (!info.noDelayClass\n                    || !tx\n                    || tx.noDelayClass() !== info.noDelayClass)) {\n                delayto = setTimeout(function () {\n                    delayto = null;\n                    content && !bub && show_bub();\n                }, info.delay);\n            } else {\n                show_bub();\n            }\n            global_tooltip = tt;\n        }\n    }\n    return tt;\n}\n\nfunction ttenter() {\n    const tt = $(this).data(\"tooltipState\");\n    tt ? tt.enter() : show_tooltip.call(this);\n}\n\nfunction ttleave() {\n    const tt = $(this).data(\"tooltipState\");\n    tt && tt.exit();\n}\n\nexport function tooltip() {\n    removeClass(this, \"need-tooltip\");\n    var tt = this.getAttribute(\"data-tooltip-type\");\n    if (tt === \"focus\") {\n        $(this).on(\"focus\", ttenter).on(\"blur\", ttleave);\n    } else {\n        $(this).hover(ttenter, ttleave);\n    }\n}\n\ntooltip.close = function (e) {\n    const tt = e ? $(e).data(\"tooltipState\") : global_tooltip;\n    tt && tt.close();\n};\n\ntooltip.close_under = function (e) {\n    if (global_tooltip && e.contains(global_tooltip.near())) {\n        global_tooltip.close();\n    }\n};\n\ntooltip.add_builder = function (name, f) {\n    builders[name] = f;\n};\n\ntooltip.enter = function (e, info) {\n    const tt = $(e).data(\"tooltipState\");\n    tt ? tt.enter() : show_tooltip.call(e, info);\n};\n\ntooltip.leave = function (e) {\n    ttleave.call(e);\n};\n","// markdown-minihtml.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\n\nfunction skip_space(str, pos, len) {\n    let ch;\n    while (pos !== len && ((ch = str.charCodeAt(pos)) === 0x20 || ch === 0x09)) {\n        ++pos;\n    }\n    return pos;\n}\n\nfunction skip_name(str, pos, len, pos0) {\n    while (pos !== len) {\n        const ch = str.charCodeAt(pos), lch = ch | 0x20;\n        if (lch >= 0x61 && lch <= 0x7A) {\n            // always ok\n        } else if (pos0 !== pos || (ch !== 0x2D && (ch < 0x30 || ch > 0x39))) {\n            break;\n        }\n        ++pos;\n    }\n    return pos;\n}\n\nfunction parse_tag(str, pos, len) {\n    let ch;\n    const result = {tag: null, ok: false, open: null, close: null, attr: {}, pos: pos};\n    if (str.charCodeAt(pos) !== 0x3C) {\n        return result;\n    }\n    pos = skip_space(str, pos + 1, len);\n    if (pos !== len && str.charCodeAt(pos) === 0x2F) {\n        result.open = false;\n        result.close = true;\n        pos = skip_space(str, pos + 1, len);\n    }\n    const tag0 = pos;\n    pos = skip_name(str, pos, len, pos);\n    if (pos === tag0) {\n        return result;\n    } else if (result.open === null) {\n        result.open = true;\n    }\n    result.tag = str.substring(tag0, pos).toLowerCase();\n    while (true) {\n        pos = skip_space(str, pos, len);\n        ch = pos !== len ? str.charCodeAt(pos) : -1;\n        if (ch === 0x3E) {\n            result.pos = pos + 1;\n            result.ok = true;\n            return result;\n        } else if (ch === 0x2F) {\n            result.close = true;\n            ++pos;\n        } else if (result.close) {\n            return result;\n        } else if ((ch | 0x20) >= 0x61 && (ch | 0x20) <= 0x7A) {\n            const name0 = pos, name1 = skip_name(str, pos, len, pos),\n                attrname = str.substring(name0, name1).toLowerCase();\n            pos = skip_space(str, name1, len);\n            if (pos !== len && str.charCodeAt(pos) === 0x3D) {\n                pos = skip_space(str, pos + 1, len);\n                ch = pos !== len ? str.charCodeAt(pos) : -1;\n                if (ch === 0x22 || ch === 0x27) {\n                    const nextquote = str.indexOf(str.charAt(pos), pos + 1),\n                        nextnl = str.indexOf(\"\\n\", pos + 1);\n                    if (nextquote === -1 || (nextnl > 0 && nextquote > nextnl)) {\n                        return result;\n                    }\n                    result.attr[attrname] = str.substring(pos + 1, nextquote);\n                    pos = nextquote + 1;\n                } else if (ch === 0x2D || (ch >= 0x30 && ch <= 0x39) || ((ch | 0x20) >= 0x61 && (ch | 0x20) <= 0x7A)) {\n                    const val0 = pos;\n                    pos = skip_name(str, pos + 1, len, pos);\n                    result.attr[attrname] = str.substring(val0, pos);\n                } else {\n                    return result;\n                }\n            } else {\n                result.attr[attrname] = true;\n            }\n        } else {\n            return result;\n        }\n    }\n}\n\nfunction minihtml_inline(state, silent) {\n    let src = state.src, pos = state.pos, max = state.posMax;\n\n    // Check start\n    if (src.charCodeAt(pos) !== 0x3C/* < */ ||\n        pos + 2 >= max) {\n        return false;\n    }\n\n    // Quick fail on second char\n    let ch = src.charCodeAt(pos + 1) | 0x20;\n    if (ch !== 0x2f && ch !== 0x62 && ch !== 0x69 && ch !== 0x73) {\n        return false;\n    }\n\n    const tag = parse_tag(src, pos, max);\n    if (!tag.ok) {\n        return false;\n    } else if (tag.tag === \"br\") {\n        if (tag.open) {\n            const tag1 = parse_tag(src, skip_space(src, tag.pos, max), max);\n            if (tag1.ok && tag1.tag === \"br\" && !tag1.open) {\n                tag.pos = tag1.pos;\n            }\n        }\n        if (!silent) {\n            state.push('hardbreak', 'br', 0);\n        }\n    } else if ((tag.tag === \"sub\" || tag.tag === \"sup\") && !tag.close) {\n        const lt = src.indexOf(\"<\", tag.pos), nl = src.indexOf(\"\\n\", tag.pos);\n        let tag1 = lt >= tag.pos && (nl < 0 || nl > lt) ? parse_tag(src, lt, max) : null;\n        if (tag1 && tag1.ok && !tag1.open && tag1.tag === tag.tag) {\n            if (!silent) {\n                state.push(tag.tag + \"_open\", tag.tag, 1);\n                let token = state.push(\"text\", \"\", 0);\n                token.content = src.substring(tag.pos, lt);\n                state.push(tag.tag + \"_close\", tag.tag, -1);\n            }\n            tag.pos = tag1.pos;\n        } else {\n            return false;\n        }\n    } else if (tag.tag === \"img\" && tag.attr.src) {\n        let token = state.push(\"image\", \"img\", 0);\n        token.attrs = [[\"src\", tag.attr.src], [\"alt\", \"\"]];\n        if (tag.attr.title) {\n            token.attrs.push([\"title\", tag.attr.title]);\n        }\n        token.children = [];\n        token.content = tag.attr.alt || \"\";\n        if (token.content !== \"\") {\n            state.md.inline.parse(token.content, state.md, state.env, token.children);\n        }\n    } else {\n        return false;\n    }\n    state.pos = tag.pos;\n    return true;\n}\n\nexport function markdownit_minihtml(md) {\n    md.inline.ruler.after(\"autolink\", \"minihtml_inline\", minihtml_inline);\n}\n","// markdown-attributes.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nconst attr_re = /\\{(?:(?:\\.[^#.=\\s}]+(?=[#.\\s}])|#[^#.=\\s}]+(?=[#.\\s}])|[^.#=\"}]+=\"[^\"]*\"(?=[\\s}]))\\s*)+\\}[ \\t]*(?:\\n|$)/y;\n\nfunction find_opener(state, idx) {\n    let nest = state.tokens[idx].nesting || 0;\n    for (--idx; nest !== 0 && idx >= 0; --idx) {\n        nest += state.tokens[idx].nesting || 0;\n        if (nest === 0) {\n            return state.tokens[idx];\n        }\n    }\n    return null;\n}\n\nfunction attribute_block(state, startLine, endLine, silent) {\n    if (state.sCount[startLine] - state.blkIndent >= 4) {\n        return false;\n    }\n    let pos = state.bMarks[startLine] + state.tShift[startLine];\n    if (state.src.charCodeAt(pos) !== 0x7b /* { */) {\n        return false;\n    }\n    attr_re.lastIndex = pos;\n    let m = attr_re.exec(state.src);\n    if (!m) {\n        return false;\n    }\n    if (silent) {\n        return true;\n    }\n    const last_token = state.tokens[state.tokens.length - 1],\n        t = last_token.type;\n    let dest = null;\n    if (t === \"paragraph_close\"\n        || t === \"blockquote_close\"\n        || t === \"ordered_list_close\"\n        || t === \"bullet_list_close\"\n        || t === \"table_close\") {\n        dest = find_opener(state, state.tokens.length - 1);\n    } else if (t === \"fence\") {\n        dest = last_token;\n    }\n    if (!dest) {\n        return false;\n    }\n    const text = m[0];\n    for (let mm of text.matchAll(/\\.([^#.=\\s}]+)|#([^#.=\\s}]+)|([^.#=\"{}]+)=\"([^\"]*)\"/g)) {\n        if (mm[1]) {\n            let c = dest.attrGet(\"class\") || \"\";\n            dest.attrSet(\"class\", c ? c + \" \" + mm[1] : mm[1]);\n        } else if (mm[2]) {\n            dest.attrSet(\"id\", mm[2]);\n        } else {\n            dest.attrSet(mm[3], mm[4] /* XXX quoting */);\n        }\n    }\n    state.line = startLine + 1;\n    return true;\n}\n\nexport function markdownit_attributes(md) {\n    md.block.ruler.after(\"lheading\", \"mdattribute\", attribute_block, {alt: [\"list\", \"blockquote\", \"paragraph\"]});\n}\n","// From https://github.com/markdown-it/markdown-it-deflist\n// Edited to disallow ~ as a deflist initiator\n\n// Process definition lists\n\nlet isSpace;\n\n// Search `[:~][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipMarker (state, line) {\n  let start = state.bMarks[line] + state.tShift[line]\n  const max = state.eMarks[line]\n\n  if (start >= max) { return -1 }\n\n  // Check bullet\n  const marker = state.src.charCodeAt(start++)\n  if (marker !== 0x3A/* : */) { return -1 }\n\n  const pos = state.skipSpaces(start)\n\n  // require space after \":\"\n  if (start === pos) { return -1 }\n\n  // no empty definitions, e.g. \"  : \"\n  if (pos >= max) { return -1 }\n\n  return start\n}\n\nfunction markTightParagraphs (state, idx) {\n  const level = state.level + 2\n\n  for (let i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].hidden = true\n      state.tokens[i].hidden = true\n      i += 2\n    }\n  }\n}\n\nfunction deflist (state, startLine, endLine, silent) {\n  if (silent) {\n    // quirk: validation mode validates a dd block only, not a whole deflist\n    if (state.ddIndent < 0) { return false }\n    return skipMarker(state, startLine) >= 0\n  }\n\n  let nextLine = startLine + 1\n  if (nextLine >= endLine) { return false }\n\n  if (state.isEmpty(nextLine)) {\n    nextLine++\n    if (nextLine >= endLine) { return false }\n  }\n\n  if (state.sCount[nextLine] < state.blkIndent) { return false }\n  let contentStart = skipMarker(state, nextLine)\n  if (contentStart < 0) { return false }\n\n  // Start list\n  const listTokIdx = state.tokens.length\n  let tight = true\n\n  const token_dl_o = state.push('dl_open', 'dl', 1)\n  const listLines = [startLine, 0]\n  token_dl_o.map = listLines\n\n  //\n  // Iterate list items\n  //\n\n  let dtLine = startLine\n  let ddLine = nextLine\n\n  // One definition list can contain multiple DTs,\n  // and one DT can be followed by multiple DDs.\n  //\n  // Thus, there is two loops here, and label is\n  // needed to break out of the second one\n  //\n  /* eslint no-labels:0,block-scoped-var:0 */\n  OUTER:\n  for (;;) {\n    let prevEmptyEnd = false\n\n    const token_dt_o = state.push('dt_open', 'dt', 1)\n    token_dt_o.map = [dtLine, dtLine]\n\n    const token_i = state.push('inline', '', 0)\n    token_i.map      = [dtLine, dtLine]\n    token_i.content  = state.getLines(dtLine, dtLine + 1, state.blkIndent, false).trim()\n    token_i.children = []\n\n    state.push('dt_close', 'dt', -1)\n\n    for (;;) {\n      const token_dd_o = state.push('dd_open', 'dd', 1)\n      const itemLines = [nextLine, 0]\n      token_dd_o.map = itemLines\n\n      let pos = contentStart\n      const max = state.eMarks[ddLine]\n      let offset = state.sCount[ddLine] + contentStart - (state.bMarks[ddLine] + state.tShift[ddLine])\n\n      while (pos < max) {\n        const ch = state.src.charCodeAt(pos)\n\n        if (isSpace(ch)) {\n          if (ch === 0x09) {\n            offset += 4 - offset % 4\n          } else {\n            offset++\n          }\n        } else {\n          break\n        }\n\n        pos++\n      }\n\n      contentStart = pos\n\n      const oldTight = state.tight\n      const oldDDIndent = state.ddIndent\n      const oldIndent = state.blkIndent\n      const oldTShift = state.tShift[ddLine]\n      const oldSCount = state.sCount[ddLine]\n      const oldParentType = state.parentType\n      state.blkIndent = state.ddIndent = state.sCount[ddLine] + 2\n      state.tShift[ddLine] = contentStart - state.bMarks[ddLine]\n      state.sCount[ddLine] = offset\n      state.tight = true\n      state.parentType = 'deflist'\n\n      state.md.block.tokenize(state, ddLine, endLine, true)\n\n      // If any of list item is tight, mark list as tight\n      if (!state.tight || prevEmptyEnd) {\n        tight = false\n      }\n      // Item become loose if finish with empty line,\n      // but we should filter last element, because it means list finish\n      prevEmptyEnd = (state.line - ddLine) > 1 && state.isEmpty(state.line - 1)\n\n      state.tShift[ddLine] = oldTShift\n      state.sCount[ddLine] = oldSCount\n      state.tight = oldTight\n      state.parentType = oldParentType\n      state.blkIndent = oldIndent\n      state.ddIndent = oldDDIndent\n\n      state.push('dd_close', 'dd', -1)\n\n      itemLines[1] = nextLine = state.line\n\n      if (nextLine >= endLine) { break OUTER }\n\n      if (state.sCount[nextLine] < state.blkIndent) { break OUTER }\n      contentStart = skipMarker(state, nextLine)\n      if (contentStart < 0) { break }\n\n      ddLine = nextLine\n\n      // go to the next loop iteration:\n      // insert DD tag and repeat checking\n    }\n\n    if (nextLine >= endLine) { break }\n    dtLine = nextLine\n\n    if (state.isEmpty(dtLine)) { break }\n    if (state.sCount[dtLine] < state.blkIndent) { break }\n\n    ddLine = dtLine + 1\n    if (ddLine >= endLine) { break }\n    if (state.isEmpty(ddLine)) { ddLine++ }\n    if (ddLine >= endLine) { break }\n\n    if (state.sCount[ddLine] < state.blkIndent) { break }\n    contentStart = skipMarker(state, ddLine)\n    if (contentStart < 0) { break }\n\n    // go to the next loop iteration:\n    // insert DT and DD tags and repeat checking\n  }\n\n  // Finilize list\n  state.push('dl_close', 'dl', -1)\n\n  listLines[1] = nextLine\n\n  state.line = nextLine\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx)\n  }\n\n  return true\n}\n\nexport function markdownit_deflist(md) {\n  isSpace = isSpace || md.utils.isSpace;\n  md.block.ruler.before('paragraph', 'deflist', deflist, { alt: ['paragraph', 'reference', 'blockquote'] })\n}\n","// render.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities } from \"./encoders.js\";\nimport { markdownit_minihtml } from \"./markdown-minihtml.js\";\nimport { markdownit_attributes } from \"./markdown-attributes.js\";\nimport { markdownit_deflist } from \"./markdown-deflist.js\";\nimport { hasClass, addClass, removeClass, $e } from \"./ui.js\";\nimport { string_utf8_index } from \"./utils.js\";\n\nfunction render_class(c, format) {\n    if (c) {\n        return c.replace(/(?:^|\\s)(?:need-format|format\\d+)(?=$|\\s)/g, \"\").concat(\" format\", format).trimStart();\n    } else {\n        return \"format\" + format;\n    }\n}\n\nexport function parse_ftext(t) {\n    let fmt = 0, pos = 0;\n    while (true) {\n        const ch = t.charCodeAt(pos);\n        if (pos === 0 ? ch !== 60 : ch !== 62 && (ch < 48 || ch > 57)) {\n            return [0, t];\n        } else if (pos !== 0 && ch >= 48 && ch <= 57) {\n            fmt = 10 * fmt + ch - 48;\n        } else if (ch === 62) {\n            return pos === 1 ? [0, t] : [fmt, t.substring(pos + 1)];\n        }\n        ++pos;\n    }\n}\n\n\nconst renderers = {};\n\nfunction add_format(r) {\n    if (r.format == null || r.format === \"\" || renderers[r.format]) {\n        throw new Error(\"bad or reused format\");\n    }\n    renderers[r.format] = r;\n}\n\n\nfunction link_urls(t) {\n    var re = /((?:https?|ftp):\\/\\/(?:[^\\s<>\"&]|&amp;)*[^\\s<>\"().,:;&])([\"().,:;]*)(?=[\\s<>&]|$)/g;\n    return t.replace(re, function (m, a, b) {\n        return '<a href=\"' + a + '\" rel=\"noreferrer\">' + a + '</a>' + b;\n    });\n}\n\nfunction render0(text) {\n    var lines = text.split(/((?:\\r\\n?|\\n)(?:[-+*][ \\t]|\\d+\\.)?)/), ch;\n    for (var i = 1; i < lines.length; i += 2) {\n        if (lines[i - 1].length > 49\n            && lines[i].length <= 2\n            && (ch = lines[i + 1].charAt(0)) !== \"\"\n            && ch !== \" \"\n            && ch !== \"\\t\")\n            lines[i] = \" \";\n    }\n    text = \"<p>\" + link_urls(escape_entities(lines.join(\"\"))) + \"</p>\";\n    return text.replace(/\\r\\n?(?:\\r\\n?)+|\\n\\n+/g, \"</p><p>\");\n}\n\nfunction render0_inline(text) {\n    return link_urls(escape_entities(text));\n}\n\nadd_format({\n    format: 0,\n    render: render0,\n    render_inline: render0_inline\n});\n\nlet md, md2;\nfunction try_highlight(str, lang, langAttr, token) {\n    if (lang && hljs.getLanguage(lang)) {\n        try {\n            var hlstr = hljs.highlight(str, {language: lang, ignoreIllegals: true}).value,\n                classIndex = token ? token.attrIndex(\"class\") : -1,\n                lineIndex = token ? token.attrIndex(\"data-lineno-start\") : -1;\n            if (classIndex >= 0 && /^(.*(?: |^))need-lineno((?: |$).*)$/.test(token.attrs[classIndex][1])) {\n                let n = lineIndex >= 0 ? token.attrs[lineIndex][1] : \"1\";\n                const m = n.match(/^(.*?)(\\d*)(\\D*)$/),\n                    pfx = m[1], minlen = m[2].startsWith(\"0\") ? m[2].length : 0, sfx = m[3],\n                    fmt = (n) => pfx + n.toString().padStart(minlen, \"0\") + sfx;\n                n = m[2] ? +m[2] : 1;\n                let lines = hlstr.split(/\\n/);\n                if (lines.length > 0 && lines[lines.length - 1] === \"\") {\n                    lines.pop();\n                }\n                const linestart = '<span class=\"has-lineno has-lineno-'.concat(fmt(n + lines.length - 1).length, '\" data-lineno=\"');\n                for (let i = 0; i !== lines.length; ++i, ++n) {\n                    lines[i] = linestart.concat(fmt(n), '\">', lines[i], '</span>');\n                }\n                hlstr = lines.join(\"\\n\") + \"\\n\";\n            }\n            return hlstr;\n        } catch {\n        }\n    }\n    return \"\";\n}\n\nadd_format({\n    format: 1,\n    render: function (text) {\n        if (!md) {\n            md = window.markdownit({highlight: try_highlight, linkify: true}).use(markdownit_katex).use(markdownit_minihtml);\n        }\n        return md.render(text);\n    }\n});\n\nfunction render_link_open_3(tokens, idx, options, env, self) {\n    let href = tokens[idx].attrGet(\"href\") || \"\";\n    if (!href.startsWith(\"#\")) {\n        tokens[idx].attrSet(\"target\", \"_blank\");\n    }\n    return self.renderToken(tokens, idx, options, env);\n}\n\nadd_format({\n    format: 3,\n    render: function (text) {\n        if (!md2) {\n            md2 = window.markdownit({highlight: try_highlight, linkify: true, html: true, attributes: true})\n                .use(markdownit_katex)\n                .use(markdownit_attributes)\n                .use(markdownit_deflist);\n            md2.renderer.rules.link_open = render_link_open_3;\n        }\n        return md2.render(text);\n    }\n});\n\nadd_format({\n    format: 5,\n    render: function (text) {\n        return text;\n    }\n});\n\n\nfunction render_with(context, renderer, text) {\n    const want_inline = hasClass(context, \"format-inline\")\n            || window.getComputedStyle(context).display.startsWith(\"inline\"),\n        renderf = (want_inline && renderer.render_inline) || renderer.render,\n        html = renderf.call(context, text, context);\n    context.className = render_class(context.className, renderer.format);\n    context.innerHTML = html;\n    if (want_inline\n        && !renderer.render_inline\n        && context.children.length === 1\n        && context.firstChild.tagName === \"P\") {\n        context.firstChild.replaceWith(...context.firstChild.childNodes);\n    }\n}\n\nexport function render_onto(context, format, text) {\n    if (format === \"f\") {\n        var ft = parse_ftext(text);\n        format = ft[0];\n        text = ft[1];\n    }\n    try {\n        render_with(context, renderers[format] || renderers[0], text);\n    } catch (e) {\n        window.console && window.console.error(e);\n        render_with(context, renderers[0], text);\n        delete renderers[format];\n    }\n}\n\n\nfunction render_this() {\n    const format = this.hasAttribute(\"data-format\")\n            ? this.getAttribute(\"data-format\")\n            : \"f\",\n        content = this.hasAttribute(\"data-content\")\n            ? this.getAttribute(\"data-content\")\n            : this.textContent;\n    render_onto(this, format !== \"\" ? format : \"f\", content);\n}\n\nfunction on_page() {\n    $(\".need-format\").each(render_this);\n}\n\nexport const render_text = {\n    add_format: add_format,\n    on_page: on_page\n};\n\n$(on_page);\n\nexport const ftext = {\n    parse: parse_ftext,\n    unparse: function (format, text) {\n        return format || text.startsWith(\"<\") ? \"<\".concat(format || 0, \">\", text) : text;\n    }\n};\n\n\n// render_xmsg\nexport function render_xmsg(status, msg) {\n    if (typeof msg === \"string\") {\n        msg = msg === \"\" ? [] : [msg];\n    }\n    if (msg.length === 0) {\n        return [];\n    }\n    const div = document.createElement(\"div\");\n    if (status === 0 || status === 1 || status === 2) {\n        div.className = \"msg msg-\".concat([\"info\", \"warning\", \"error\"][status]);\n    } else {\n        div.className = \"msg msg-error\";\n    }\n    for (let i = 0; i !== msg.length; ++i) {\n        const p = document.createElement(\"p\");\n        p.append(msg[i]);\n        div.append(p);\n    }\n    return div;\n}\n\n\nfunction message_list_status(ml, field) {\n    let status = 0;\n    for (const mi of ml || []) {\n        if (((mi.status === -3 /*MessageSet::SUCCESS*/ && status === 0)\n             || (mi.status >= 1 && mi.status > status))\n            && (!field || mi.field === field))\n            status = mi.status;\n    }\n    return status;\n}\n\nfunction render_list(ml) {\n    const ul = document.createElement(\"ul\");\n    ul.className = \"feedback-list\";\n    for (const mi of ml || []) {\n        append_item(ul, mi);\n    }\n    return ul;\n}\n\nfunction maybe_render_list(ml) {\n    const ul = render_list(ml);\n    return ul.firstChild ? ul : null;\n}\n\nfunction render_alert_onto(elt, ml) {\n    addClass(elt, \"msg\");\n    elt.className = elt.className.replace(/(?:^| )msg-(?:success|error|warning|info)(?= |$)/, \"\");\n    const status = message_list_status(ml);\n    if (status === -3 /*MessageSet::SUCCESS*/) {\n        addClass(elt, \"msg-success\");\n    } else if (status >= 2) {\n        addClass(elt, \"msg-error\");\n    } else if (status === 1) {\n        addClass(elt, \"msg-warning\");\n    } else {\n        addClass(elt, \"msg-info\");\n    }\n    elt.replaceChildren(render_list(ml));\n    return elt;\n}\n\nfunction render_xhr_error_onto(elt, data) {\n    elt.replaceChildren();\n    if (data.message_list) {\n        for (let mi of data.message_list) {\n            if (mi.status < 1 || !mi.message) {\n                continue;\n            }\n            const e = $e(\"span\", \"format-inline\");\n            render_onto(e, \"f\", mi.message);\n            if (elt.firstChild) {\n                elt.appendChild($e(\"br\"));\n            }\n            elt.appendChild(e);\n        }\n    } else if (data.error) {\n        elt.innerHTML = data.error;\n    }\n    if (!elt.firstChild) {\n        elt.append(\"Failure\");\n    }\n    return elt;\n}\n\nfunction render_alert(ml) {\n    return render_alert_onto(document.createElement(\"div\"), ml);\n}\n\nfunction redundant_item(mi, ul) {\n    return mi.message == null\n        || mi.message === \"\"\n        || (!mi.landmark\n            && mi.context\n            && ul.getAttribute(\"data-last-mi\") === mi.status + \" \" + mi.message);\n}\n\nfunction append_item(ul, mi) {\n    let li, div;\n    if (!redundant_item(mi, ul)) {\n        let sklass = \"\";\n        if (mi.status != null && mi.status >= -4 /*MessageSet::MARKED_NOTE*/ && mi.status <= 3)\n            sklass = [\"note\", \"success\", \"warning-note\", \"urgent-note\", \"\", \"warning\", \"error\", \"error\"][mi.status + 4];\n        div = document.createElement(\"div\");\n        if (mi.status !== -5 /*MessageSet::INFORM*/ || !ul.firstChild) {\n            li = document.createElement(\"li\");\n            ul.appendChild(li);\n            div.className = sklass ? \"is-diagnostic format-inline is-\" + sklass : \"is-diagnostic format-inline\";\n        } else {\n            li = ul.lastChild;\n            div.className = \"msg-inform format-inline\";\n        }\n        li.appendChild(div);\n        render_onto(div, \"f\", mi.message);\n        if (!mi.landmark) {\n            ul.setAttribute(\"data-last-mi\", mi.status + \" \" + mi.message);\n        } else {\n            ul.removeAttribute(\"data-last-mi\");\n        }\n    }\n    if (mi.context) {\n        const s = mi.context[0],\n            p1 = string_utf8_index(s, mi.context[1]),\n            p2 = string_utf8_index(s, mi.context[2]);\n        let sklass = p2 > p1 + 2 ? \"context-mark\" : \"context-caret-mark\";\n        if (mi.status > 0)\n            sklass += mi.status > 1 ? \" is-error\" : \" is-warning\";\n        ul.lastChild || ul.appendChild(document.createElement(\"li\"));\n        ul.lastChild.appendChild($e(\"div\", \"msg-context\",\n            s.substring(0, p1), $e(\"span\", sklass, s.substring(p1, p2)), s.substring(p2)));\n    }\n}\n\nfunction append_item_near(elt, mi) {\n    if (elt instanceof RadioNodeList) {\n        elt = elt.item(0);\n    }\n    if (mi.status === 1 && !hasClass(elt, \"has-error\")) {\n        addClass(elt, \"has-warning\");\n    } else if (mi.status >= 2) {\n        removeClass(elt, \"has-warning\");\n        addClass(elt, \"has-error\");\n    }\n    if (mi.message == null || mi.message === \"\") {\n        return true;\n    }\n    let owner = elt && elt.closest(\".f-i, .entry, .entryi, fieldset\");\n    if (owner && hasClass(owner, \"entryi\")) {\n        owner = owner.querySelector(\".entry\");\n    }\n    if (!owner) {\n        return false;\n    }\n    let fl = owner.firstElementChild;\n    while (fl && (fl.tagName === \"LABEL\" || fl.tagName === \"LEGEND\" || hasClass(fl, \"feedback\"))) {\n        fl = fl.nextElementSibling;\n    }\n    if (!fl || !hasClass(fl, \"feedback-list\")) {\n        let nfl = render_list();\n        owner.insertBefore(nfl, fl);\n        fl = nfl;\n    }\n    append_item(fl, mi);\n    return true;\n}\n\nexport let feedback = {\n    append_item: append_item,\n    append_item_near: append_item_near,\n    list_status: message_list_status,\n    render_list: render_list,\n    maybe_render_list: maybe_render_list,\n    render_alert: render_alert,\n    render_alert_onto: render_alert_onto,\n    render_xhr_error_onto: render_xhr_error_onto\n};\n","// pset.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui, fold61, addClass, hasClass, $e } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { Bubble, global_tooltip } from \"./tooltip.js\";\nimport { feedback } from \"./render.js\";\n\n\nhandle_ui.on(\"js-repo-copy\", function () {\n    var node = document.createTextNode(this.getAttribute(\"data-pa-repo\"));\n    var bub = Bubble(node, {color: \"tooltip\", dir: \"t\"});\n    bub.near(this);\n    var range = document.createRange();\n    range.selectNode(node);\n    window.getSelection().removeAllRanges();\n    window.getSelection().addRange(range);\n    try {\n        document.execCommand(\"copy\");\n    } catch {\n    }\n    window.getSelection().removeAllRanges();\n    bub.remove();\n    if (global_tooltip && global_tooltip.elt == this) {\n        global_tooltip.text(this.getAttribute(\"data-pa-repo\"));\n    }\n});\n\nhandle_ui.on(\"js-repo-list\", function (event) {\n    var self = this;\n    $.ajax(hoturl(\"=api/repositories\", {u: this.getAttribute(\"data-pa-user\")}), {\n        method: \"POST\", cache: false,\n        success: function (data) {\n            var t = \"Error loading repositories\";\n            if (data.repositories && data.repositories.length) {\n                t = \"Repositories: \";\n                for (var i = 0; i < data.repositories.length; ++i) {\n                    var r = data.repositories[i];\n                    i && (t += \", \");\n                    t += \"<a href=\\\"\" + escape_entities(r.url) + \"\\\">\" + escape_entities(r.name) + \"</a>\";\n                }\n            } else if (data.repositories) {\n                t = \"No repositories\";\n            }\n            $(\"<div style=\\\"font-size:medium;font-weight:normal\\\"></div>\").html(t).insertAfter(self);\n        }\n    });\n    event.preventDefault();\n});\n\nhandle_ui.on(\"js-pset-viewoptions\", function () {\n    fold61(this.nextSibling, this.parentNode);\n});\n\nhandle_ui.on(\"js-pset-setgrader\", function () {\n    var $form = $(this.closest(\"form\"));\n    $.ajax($form[0].getAttribute(\"action\"), {\n        data: $form.serializeWith({}),\n        type: \"POST\", cache: false,\n        dataType: \"json\",\n        success: function (data) {\n            var a;\n            $form.find(\".ajaxsave61\").html(data.ok ? \"Saved\" : feedback.render_xhr_error_onto($e(\"strong\", \"err\"), data));\n            if (data.ok && (a = $form.find(\"a.actas\")).length) {\n                a.attr(\"href\", a.attr(\"href\").replace(/actas=[^&;]+/, \"actas=\" + encodeURIComponent(data.grader_email)));\n            }\n        },\n        error: function () {\n            $form.find(\".ajaxsave61\").html(\"<strong class=\\\"err\\\">Failed</strong>\");\n        }\n    });\n});\n\nhandle_ui.on(\"js-pset-setcommit\", function () {\n    this.closest(\"form\").submit();\n});\n\nhandle_ui.on(\"pa-flagger\", function () {\n    let self = this, form = self.closest(\"form\");\n    if (!form.elements.flagreason) {\n        self.parentElement.append($e(\"div\", \"flagreasoneditor mt-1\",\n            $e(\"span\", \"flagreason mr-2\", \"Why do you want to flag this commit?\"),\n            $e(\"input\", {type: \"text\", name: \"flagreason\", value: \"\", placeholder: \"Optional reason\", class: \"need-autogrow mr-2\"}),\n            $e(\"button\", {type: \"button\", class: \"ui pa-flagger\"}, \"OK\"),\n            $e(\"span\", \"ajaxsave61\")));\n        $(form.elements.flagreason).on(\"keypress\", function (evt) {\n            if (!event_key.modcode(evt) && event_key(evt) === \"Enter\") {\n                evt.preventDefault();\n                evt.stopImmediatePropagation();\n                $(self).click();\n            }\n        }).autogrow()[0].focus();\n        addClass(self, \"hidden\");\n    } else {\n        $.post(hoturl(\"=api/flag\", {psetinfo: this, flagid: \"new\"}),\n            {reason: form.elements.flagreason.value},\n            function (data) {\n                if (data && data.ok) {\n                    $(form).find(\".flagreasoneditor\").remove();\n                    $(self).replaceWith($e(\"strong\", null, \"Flagged\"));\n                } else {\n                    $(form).find(\".ajaxsave61\").html('<strong class=\"err\">Failed</strong>');\n                }\n            });\n    }\n});\n\nfunction apply_flagger(e, data) {\n    const psetinfo = e.closest(\".pa-psetinfo\"),\n        grade = !!data.gradecommit && data.gradecommit === psetinfo.getAttribute(\"data-pa-commit\");\n    $(psetinfo).find(\".pa-flagger-grade\").toggleClass(\"active\", grade);\n    $(psetinfo).find(\".pa-flagger-gradelock\").toggleClass(\"active\", grade && data.gradelock);\n    $(psetinfo).find(\".pa-flagger-nograde\").toggleClass(\"active\", data.gradecommit === \"\");\n}\n\nfunction make_flagger(what) {\n    return function () {\n        const self = this, arg = {psetinfo: this, [what]: hasClass(this, \"active\") ? 0 : 1};\n        if (what === \"gradelock\") {\n            arg.grade = 1;\n        }\n        $.post(hoturl(\"=api/gradeflag\", arg), {}, function (data) {\n            if (!data) {\n                return;\n            }\n            const pv = self.closest(\".pa-pv\");\n            while (pv.lastChild && hasClass(pv.lastChild, \"feedback-list\")) {\n                pv.lastChild.remove();\n            }\n            if (data && data.ok) {\n                apply_flagger(self, data);\n            }\n            if (data && data.message_list) {\n                const e = feedback.render_list(data.message_list || []);\n                addClass(e, \"pa-feedback-list\");\n                pv.append(e);\n            }\n        });\n    };\n}\n\nhandle_ui.on(\"pa-flagger-grade\", make_flagger(\"grade\"));\nhandle_ui.on(\"pa-flagger-nograde\", make_flagger(\"nograde\"));\nhandle_ui.on(\"pa-flagger-gradelock\", make_flagger(\"gradelock\"));\n\nhandle_ui.on(\"pa-flagger-resolve\", function () {\n    let self = this, form = self.closest(\"form\");\n    $.post(hoturl(\"=api/flag\", {psetinfo: this, flagid: this.getAttribute(\"data-flagid\"), resolve: 1}), {},\n        function (data) {\n            if (data && data.ok) {\n                $(self).replaceWith(\"<strong>Resolved</strong>\");\n            } else {\n                $(form).find(\".ajaxsave61\").html('<strong class=\"err\">Failed</strong>');\n            }\n        });\n});\n","// dropmenu.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui, hasClass, removeClass, addClass, $e } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\n\n\nconst dropmenu_builders = {};\n\nfunction dropmenu_close() {\n    const modal = document.getElementById(\"dropmenu-modal\");\n    if (modal && modal.previousSibling.matches(\"details[open]\")) {\n        modal.previousSibling.open = false;\n    } else {\n        $(\"details.dropmenu-details\").each(function () { this.open = false; });\n    }\n    if (modal) {\n        modal.remove();\n    }\n}\n\nfunction dropmenu_close1(e) {\n    if (e && e.open) {\n        const modal = document.getElementById(\"dropmenu-modal\");\n        modal && modal.remove();\n        e.open = false;\n    }\n}\n\nfunction dropmenu_clickable(li) {\n    if (!li) {\n        return null;\n    }\n    const bs = li.querySelectorAll(\"button\");\n    if (bs.length === 1) {\n        return bs[0];\n    }\n    const as = li.querySelectorAll(\"a\");\n    if (as.length === 1) {\n        return as[0];\n    }\n    return null;\n}\n\nfunction dropmenu_click(evt) {\n    const tgt = evt.target, details = this.closest(\"details\");\n    if (tgt.tagName === \"A\" || tgt.tagName === \"BUTTON\") {\n        if (tgt.classList.contains(\"dropmenu-close\")) {\n            queueMicrotask(() => dropmenu_close1(details));\n        }\n        return;\n    }\n    if (tgt.closest(\"ul\") !== this) {\n        return;\n    }\n    const ke = dropmenu_clickable(tgt.closest(\"li\"));\n    if (!ke) {\n        return;\n    }\n    if (ke.tagName === \"A\"\n        && ke.href\n        && evt.type === \"click\"\n        && !event_key.is_default_a(evt)) {\n        window.open(ke.href, \"_blank\", \"noopener\");\n    } else {\n        ke.click();\n        if (ke.classList.contains(\"dropmenu-close\")) {\n            queueMicrotask(() => dropmenu_close1(details));\n        }\n    }\n    evt.preventDefault();\n    evt.stopPropagation();\n}\n\nfunction dropmenu_selection(menu) {\n    if (!document.activeElement\n        || !menu.contains(document.activeElement)) {\n        return null;\n    }\n    return document.activeElement.closest(\"li\");\n}\n\nfunction dropmenu_clickable_starting_with(li, prefix) {\n    for (; li; li = li.nextElementSibling) {\n        const ke = hasClass(li, \"has-link\") ? dropmenu_clickable(li) : null;\n        if (ke) {\n            const s = ke.textContent.normalize(\"NFKD\").replace(/\\p{M}/gu, \"\").toLowerCase();\n            if (s.startsWith(prefix)) {\n                return ke;\n            }\n        }\n    }\n    return null;\n}\n\nlet dmkey_menu, dmkey_time, dmkey_string;\n\nfunction dropmenu_keydown(evt) {\n    const key = event_key(evt);\n    if (key === \"Escape\") {\n        dmkey_menu = null;\n        dropmenu_close1(this.closest(\"details\"));\n    } else if (key === \"Enter\" || key === \"Space\") {\n        dmkey_menu = null;\n        dropmenu_click.call(this, evt);\n        return;\n    } else if (key === \"ArrowUp\" || key === \"ArrowDown\" || key === \"Home\" || key == \"End\") {\n        dmkey_menu = null;\n        removeClass(this, \"dropmenu-hovering\");\n        const up = key === \"ArrowUp\" || key === \"End\";\n        let li = key === \"Home\" || key === \"End\" ? null : dropmenu_selection(this);\n        if (li) {\n            li = li[up ? \"previousElementSibling\" : \"nextElementSibling\"];\n        }\n        if (!li) {\n            li = this[up ? \"lastElementChild\" : \"firstElementChild\"];\n        }\n        while (li && !hasClass(li, \"has-link\")) {\n            li = li[up ? \"previousElementSibling\" : \"nextElementSibling\"];\n        }\n        const ke = dropmenu_clickable(li);\n        ke && ke.focus();\n    } else if (event_key.printable(evt) && /^(?:\\p{L}|\\p{N})$/u.test(key)) {\n        if (dmkey_menu !== this || evt.timeStamp - dmkey_time > 500) {\n            dmkey_string = \"\";\n        }\n        dmkey_menu = this;\n        dmkey_time = evt.timeStamp;\n        dmkey_string += key;\n        const li = dropmenu_selection(this);\n        let ke = li ? dropmenu_clickable_starting_with(li.nextElementSibling, dmkey_string) : null;\n        ke = ke || dropmenu_clickable_starting_with(this.firstElementChild, dmkey_string);\n        if (ke) {\n            removeClass(this, \"dropmenu-hovering\");\n            ke.focus();\n        }\n    } else {\n        if (event_key.printable(evt)) {\n            dmkey_menu = null;\n        }\n        return;\n    }\n    evt.preventDefault();\n    evt.stopPropagation();\n}\n\nfunction dropmenu_mousemove() {\n    addClass(this, \"dropmenu-hovering\");\n}\n\nfunction dropmenu_open(menu, details) {\n    menu.style.maxHeight = null;\n    const maxHeight = parseFloat(window.getComputedStyle(menu).maxHeight),\n        drect = details.getBoundingClientRect();\n    menu.style.maxHeight = Math.max(Math.min(maxHeight, visualViewport.height - drect.bottom - 24), 120) + \"px\";\n\n    removeClass(menu, \"dropmenu-hovering\");\n\n    if (!hasClass(menu, \"has-dropmenu-events\")) {\n        menu.addEventListener(\"click\", dropmenu_click);\n        menu.addEventListener(\"keydown\", dropmenu_keydown);\n        menu.addEventListener(\"mousemove\", dropmenu_mousemove);\n        addClass(menu, \"has-dropmenu-events\");\n    }\n}\n\nhandle_ui.on(\"click.js-dropmenu-open\", function (evt) {\n    let modal = document.getElementById(\"dropmenu-modal\");\n    if (hasClass(this, \"need-dropmenu\")) {\n        for (const c of this.classList) {\n            if (dropmenu_builders[c])\n                dropmenu_builders[c].call(this, evt);\n        }\n    }\n    const summary = this.nodeName === \"BUTTON\" ? this.closest(\"summary\") : this,\n        details = summary.parentElement;\n    window.$pa.tooltip.close();\n    if (!details.open) {\n        if (!modal) {\n            modal = $e(\"div\", \"modal transparent\");\n            modal.id = \"dropmenu-modal\";\n            details.parentElement.insertBefore(modal, details.nextSibling);\n            modal.addEventListener(\"click\", dropmenu_close, false);\n        }\n        details.open = true;\n        const menu = details.querySelector(\".dropmenu\");\n        menu && dropmenu_open(menu, details);\n    } else if (this.tagName === \"BUTTON\") {\n        modal && modal.remove();\n        details.open = false;\n    }\n    evt.preventDefault();\n    evt.stopPropagation();\n});\n\nexport const dropmenu = {\n    add_builder: function (s, f) {\n        dropmenu_builders[s] = f;\n    },\n    close: function (e) {\n        e ? dropmenu_close1(e.closest(\"details[open]\")) : dropmenu_close();\n    }\n};\n","// diff.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { ImmediatePromise } from \"./utils.js\";\nimport { hasClass, addClass, removeClass, toggleClass, fold61, handle_ui, $e } from \"./ui.js\";\nimport { dropmenu } from \"./dropmenu.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { html_id_encode, html_id_decode } from \"./encoders.js\";\n\n\nconst BACKWARD = 1;\nconst ANYFILE = 2;\nconst GRADES = 4;\nconst decorators = [];\n\nexport class Filediff {\n    constructor(e) {\n        if (e.nodeType !== Node.ELEMENT_NODE || !hasClass(e, \"pa-filediff\")) {\n            throw new Error;\n        }\n        this.element = e;\n    }\n    static closest(e) {\n        const ed = e.closest(\".pa-filediff\");\n        return ed ? new Filediff(ed) : null;\n    }\n    static referenced(e) {\n        const er = e.closest(\".pa-fileref\");\n        let a = er.firstChild, fd;\n        while (a && a.nodeName === \"SPAN\") {\n            a = a.nextSibling;\n        }\n        if (a.tagName === \"A\") {\n            fd = Filediff.by_hash(a.hash);\n        }\n        return fd || Filediff.closest(e);\n    }\n    static by_file(fn) {\n        const e = document.getElementById(\"F\" + html_id_encode(fn));\n        return e ? new Filediff(e) : null;\n    }\n    static by_hash(hash) {\n        let e;\n        if (hash.startsWith(\"#F\") || hash.startsWith(\"#U\")) {\n            e = document.getElementById(hash.substring(1));\n        }\n        return e ? new Filediff(e) : null;\n    }\n    static by_href(href) {\n        const m = href.match(/^[^#]*#(?:L[ab]\\d+|)([UF][-A-Za-z0-9_.@/]+)$/),\n            e = m && m[1] ? document.getElementById(m[1]) : null;\n        return e ? new Filediff(e) : null;\n    }\n    static add_decorator(f) {\n        decorators.push(f);\n    }\n    load() {\n        if (!hasClass(this.element, \"need-load\")) {\n            return new ImmediatePromise(this);\n        } else {\n            const p = this.element.closest(\".pa-psetinfo\"),\n                wdiff = hasClass(this.element, \"pa-wdiff\");\n            removeClass(this.element, \"need-load\");\n            return new Promise(resolve => {\n                $.ajax(hoturl(\"api/filediff\", {psetinfo: p, wdiff: wdiff ? 1 : null}), {\n                    type: \"GET\", cache: false, dataType: \"json\",\n                    data: {\n                        file: this.file,\n                        base_commit: p.getAttribute(\"data-pa-base-commit\"),\n                        commit: p.getAttribute(\"data-pa-commit\")\n                    },\n                    success: data => {\n                        if (data.ok && data.content_html) {\n                            const result = $(data.content_html);\n                            $(this.element).html(result.children());\n                            this.decorate();\n                            $pa.render_text_page();\n                        }\n                        resolve(this);\n                    }\n                })\n            });\n        }\n    }\n    load_if(show) {\n        if (!show) {\n            return new ImmediatePromise(this);\n        } else {\n            return this.load();\n        }\n    }\n    decorate() {\n        for (let df of decorators) {\n            df(this);\n        }\n    }\n    static decorate_page() {\n        $(\".pa-filediff.need-decorate\").each(function () {\n            removeClass(this, \"need-decorate\");\n            if (!hasClass(this, \"need-load\")) {\n                (new Filediff(this)).decorate();\n            }\n        });\n    }\n    toggle(show) {\n        if (show == null) {\n            show = hasClass(this.element, \"hidden\");\n        }\n        const h3 = this.element.previousSibling,\n            h3fd = h3 && hasClass(h3, \"pa-fileref\") ? Filediff.referenced(h3) : null,\n            isarrow = h3fd && h3fd.element === this.element;\n        fold61(this.element, isarrow ? h3 : null, show);\n    }\n    toggle_show_left(show) {\n        if (show == null) {\n            show = hasClass(this.element, \"pa-hide-left\");\n        }\n        toggleClass(this.element, \"pa-hide-left\", !show);\n        $(this.element.previousSibling).find(\".pa-diff-toggle-hide-left\").toggleClass(\"btn-primary\", show);\n    }\n    toggle_show_comments(show) {\n        if (show == null) {\n            show = hasClass(this.element, \"pa-hide-comments\");\n        }\n        toggleClass(this.element, \"pa-hide-comments\", !show);\n        $(this.element.previousSibling).find(\".pa-diff-toggle-hide-comments\").toggleClass(\"btn-primary\", !show);\n    }\n    get file() {\n        const id = this.element.id;\n        if (id.charAt(0) === \"U\") {\n            const sl = id.indexOf(\"/F\");\n            return html_id_decode(id.substring(sl + 2));\n        } else {\n            return html_id_decode(id.substring(1));\n        }\n    }\n    lineid_anchor(lineid) {\n        return \"L\".concat(lineid, this.element.id);\n    }\n    lines() {\n        return Linediff.all(this.element.firstChild);\n    }\n    line(isb, lineno, start) {\n        if (lineno == null) {\n            lineno = +isb.substring(1);\n            isb = isb.charAt(0) === \"b\";\n        }\n        return this.load().then(() => {\n            for (let ln of Linediff.all(start || this.element.firstChild)) {\n                if (ln.base_contains(isb, lineno)) {\n                    return ln;\n                } else if (ln.expansion_contains(isb, lineno)) {\n                    return ln.expand().then(start => this.line(isb, lineno, start));\n                }\n            }\n            throw null;\n        });\n    }\n    get psetinfo() {\n        if (this._psetinfo === undefined) {\n            this._psetinfo = this.element.closest(\".pa-psetinfo\");\n        }\n        return this._psetinfo;\n    }\n    get pset() {\n        return this.psetinfo.getAttribute(\"data-pa-pset\");\n    }\n    get repourl() {\n        return this.psetinfo.getAttribute(\"data-pa-repourl\");\n    }\n    scroll_position() {\n        const cr = this.element.getBoundingClientRect();\n        let top = cr.y + window.scrollY;\n        const preve = this.element.previousSibling;\n        if (preve && preve.nodeName === \"H3\") {\n            top -= preve.getBoundingClientRect().height + 8;\n        }\n        return Math.max(top - 8, 0);\n    }\n    static define_method(name, f) {\n        if (!Object.prototype.hasOwnProperty.call(Filediff.prototype, name)) {\n            Object.defineProperty(Filediff.prototype, name, {\n                value: f, enumerable: false, configurable: true, writable: true\n            });\n        }\n    }\n}\n\nexport class Linediff {\n    constructor(e) {\n        if (e.nodeType !== Node.ELEMENT_NODE || !hasClass(e, \"pa-dl\")) {\n            throw new Error;\n        }\n        this.element = e;\n    }\n    static closest(e) {\n        const el = e.closest(\".pa-dl\");\n        return el ? new Linediff(el) : null;\n    }\n    get nodeName() {\n        return \"PA-LINEDIFF\";\n    }\n    get filediff() {\n        if (this._filediff === undefined) {\n            this._filediff = Filediff.closest(this.element);\n        }\n        return this._filediff;\n    }\n    get file() {\n        return this.filediff.file;\n    }\n    get note_lineid() {\n        const e = this.element;\n        let re, lm, dash;\n        if (e.hasAttribute(\"data-landmark\")) {\n            return e.getAttribute(\"data-landmark\");\n        } else if (hasClass(e, \"pa-dlr\")\n                   && (re = e.lastChild.firstChild)\n                   && (lm = re.getAttribute(\"data-landmark\"))\n                   && (dash = lm.indexOf(\"-\")) >= 0) {\n            return (hasClass(e, \"pa-gd\") ? \"a\" : \"b\").concat(lm.substring(dash + 1));\n        } else if (hasClass(e, \"pa-gd\")) {\n            return \"a\".concat(e.firstChild.getAttribute(\"data-landmark\"));\n        } else {\n            return \"b\".concat(e.firstChild.nextSibling.getAttribute(\"data-landmark\"));\n        }\n    }\n    get linea() {\n        const e = this.element;\n        if (hasClass(e, \"pa-gc\") || (hasClass(e, \"pa-gd\") && !hasClass(e, \"pa-dlr\"))) {\n            return +e.firstChild.getAttribute(\"data-landmark\");\n        } else {\n            return this.linea_within(Infinity);\n        }\n    }\n    get lineb() {\n        const lineid = this.note_lineid;\n        if (lineid.startsWith(\"b\")) {\n            return +lineid.substring(1);\n        } else {\n            return null;\n        }\n    }\n    linea_within(bound) {\n        let e = this.element;\n        while (e && bound >= 0) {\n            if (hasClass(e, \"pa-gc\")) {\n                return +e.firstChild.getAttribute(\"data-landmark\");\n            }\n            e = e.previousSibling;\n            --bound;\n        }\n        return 0;\n    }\n    get psetinfo() {\n        return this.filediff.psetinfo;\n    }\n    get pset() {\n        return this.filediff.pset;\n    }\n    get repourl() {\n        return this.filediff.repourl;\n    }\n    get hash() {\n        const e = this.element, fd = this.filediff, uf = fd.element.id;\n        if (e.hasAttribute(\"data-landmark\")) {\n            return \"#L\".concat(e.getAttribute(\"data-landmark\"), uf);\n        } else if (hasClass(e, \"pa-gd\")) {\n            return \"#La\".concat(e.firstChild.getAttribute(\"data-landmark\"), uf);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            return \"#Lb\".concat(e.firstChild.nextSibling.getAttribute(\"data-landmark\"), uf);\n        } else {\n            return null;\n        }\n    }\n    is_visible() {\n        return !!this.element.offsetParent;\n    }\n    visible_predecessor() {\n        if (!this.element.offsetParent) {\n            for (let e = this.element.previousSibling; e; e = e.previousSibling) {\n                if (hasClass(e, \"pa-dlr\")) {\n                    return new Linediff(e);\n                }\n            }\n        }\n        return this;\n    }\n    visible_source() {\n        for (let ln of Linediff.all(this, BACKWARD)) {\n            if (ln.is_visible() && ln.is_source())\n                return ln;\n        }\n        return null;\n    }\n    is_base() {\n        return /^pa-dl pa-g[idc]/.test(this.element.className);\n    }\n    base_contains(isb, lineno) {\n        const e = this.element;\n        return /^pa-dl pa-g[idc]/.test(e.className)\n            && (isb ? e.firstChild.nextSibling : e.firstChild).getAttribute(\"data-landmark\") == lineno;\n    }\n    is_source() {\n        return / pa-g[idc]/.test(this.element.className);\n    }\n    is_expandable() {\n        return this.element.hasAttribute(\"data-expandmark\");\n    }\n    expansion_contains(isb, lineno) {\n        const em = this.element.getAttribute(\"data-expandmark\"),\n            m = em ? em.match(/^a(\\d+)b(\\d+)\\+(\\d*)$/) : null;\n        if (!m) {\n            return false;\n        }\n        const delta = lineno - m[isb ? 2 : 1];\n        return delta >= 0 && (!m[3] || delta < m[3]);\n    }\n    expand() {\n        const e = this.element,\n            em = e.getAttribute(\"data-expandmark\"),\n            m = em ? em.match(/^a(\\d+)b(\\d+)\\+(\\d*)$/) : null;\n        if (!m || m[3] === \"0\") {\n            return new ImmediatePromise(this); // xxx\n        }\n        e.removeAttribute(\"data-expandmark\");\n        const a0 = +m[1], b0 = +m[2], args = {\n            psetinfo: this.element, file: this.file, fromline: b0\n        };\n        m[3] !== \"\" && (args.linecount = +m[3]);\n        return new Promise(resolve => {\n            $.ajax(hoturl(\"api/blob\", args), {\n                success: function (data) {\n                    if (data.ok && data.data) {\n                        const lines = data.data.replace(/\\n$/, \"\").split(\"\\n\");\n                        for (let i = lines.length - 1; i >= 0; --i) {\n                            const t = '<div class=\"pa-dl pa-gc\"><div class=\"pa-da\" data-landmark=\"'.concat(a0 + i, '\"></div><div class=\"pa-db\" data-landmark=\"', b0 + i, '\"></div><div class=\"pa-dd\"></div></div>');\n                            $(t).insertAfter(e).find(\".pa-dd\").text(lines[i]);\n                        }\n                        const next = e.nextSibling;\n                        $(e).remove();\n                        const fd = Filediff.closest(next);\n                        if (hasClass(fd.element, \"pa-highlight\")) {\n                            fd.highlight();\n                        }\n                        resolve(new Linediff(next));\n                    }\n                }\n            });\n        });\n    }\n    is_annotation() {\n        return hasClass(this.element, \"pa-gn\");\n    }\n    is_note() {\n        return hasClass(this.element, \"pa-gw\");\n    }\n    upper_bound(isb, lineno) {\n        if (lineno == null) {\n            lineno = +isb.substring(1);\n            isb = isb.charAt(0) === \"b\";\n        }\n        let match = false;\n        for (let ln of Linediff.all(this)) {\n            const e = ln.element;\n            if (match && (hasClass(e, \"pa-gx\") || hasClass(e, \"pa-dlr\"))) {\n                return ln;\n            } else if (ln.is_source()) {\n                const curlineno = +(isb ? e.firstChild.nextSibling : e.firstChild).getAttribute(\"data-landmark\");\n                if ((!curlineno && match) || lineno < curlineno) {\n                    return ln;\n                } else if (lineno === curlineno && ln.is_base()) {\n                    match = true;\n                }\n            } else if (e.hasAttribute(\"data-landmark\")) {\n                const curlm = e.getAttribute(\"data-landmark\");\n                if (curlm.charAt(0) === (isb ? \"b\" : \"a\")\n                    && lineno < +curlm.substring(1)) {\n                    return ln;\n                }\n            }\n        }\n        return null;\n    }\n\n    static get BACKWARD() {\n        return BACKWARD;\n    }\n    static get ANYFILE() {\n        return ANYFILE;\n    }\n    static get GRADES() {\n        return GRADES;\n    }\n\n    static* all(t, flags) {\n        if (t instanceof Linediff) {\n            t = t.element;\n        }\n        flags = flags || 0;\n        let p = t.parentElement;\n        const direction = flags & BACKWARD ? \"previousSibling\" : \"nextSibling\",\n            extreme = flags & BACKWARD ? \"lastChild\" : \"firstChild\";\n        while (true) {\n            while (!t && p) {\n                if (!(flags & ANYFILE) && hasClass(p, \"pa-filediff\")) {\n                    return;\n                }\n                t = p[direction];\n                p = p.parentElement;\n            }\n            if (!t) {\n                return;\n            } else if (t.nodeType !== Node.ELEMENT_NODE) {\n                // skip\n            } else if (hasClass(t, \"pa-dl\")) {\n                yield new Linediff(t);\n            } else if (hasClass(t, \"pa-dg\")) {\n                p = t;\n                t = p[extreme];\n                continue;\n            } else if (hasClass(t, \"pa-grade\")) {\n                if (hasClass(t, \"pa-ans\")\n                    && hasClass(t.lastChild.firstChild, \"pa-filediff\")) {\n                    p = t.lastChild.firstChild;\n                    t = p[extreme];\n                    continue;\n                } else if (flags & GRADES) {\n                    const inp = t.firstChild.nextSibling.firstChild;\n                    if ((inp.nodeName === \"TEXTAREA\" && hasClass(inp, \"ta1\"))\n                        || (inp.nodeName === \"INPUT\" && inp.type === \"text\")) {\n                        yield inp;\n                    }\n                }\n            } else if (hasClass(t, \"pa-diffcontext\")) {\n                if (!(flags & ANYFILE)) {\n                    return;\n                }\n                const dg = t.querySelectorAll(\".pa-dg\");\n                if (dg.length !== 0) {\n                    let tt = dg[flags & BACKWARD ? dg.length - 1 : 0];\n                    while (true) {\n                        const ttp = tt.parentElement.closest(\".pa-dg\");\n                        if (!ttp || !t.contains(ttp)) {\n                            break;\n                        }\n                        tt = ttp;\n                    }\n                    t = tt;\n                    p = t.parentElement;\n                    continue;\n                }\n            }\n            t = t[direction];\n        }\n    }\n\n    static* range(t, lo, hi, selector) {\n        let linea = -1, lineb = -1;\n        for (let ln of Linediff.all(t)) {\n            const e = ln.element;\n            if (!hasClass(e, \"pa-dlr\")) {\n                const c = e.firstChild;\n                if (hasClass(c, \"pa-da\")) {\n                    if (c.hasAttribute(\"data-landmark\")) {\n                        linea = +c.getAttribute(\"data-landmark\");\n                    }\n                    if (c.nextSibling.hasAttribute(\"data-landmark\")) {\n                        lineb = +c.getAttribute(\"data-landmark\");\n                    }\n                } else if (e.hasAttribute(\"data-landmark\")) {\n                    const lm = e.getAttribute(\"data-landmark\");\n                    if (lm.charAt(0) === \"a\") {\n                        linea = +lm.substring(1);\n                    } else {\n                        lineb = +lm.substring(1);\n                    }\n                }\n                if (linea > hi) {\n                    break;\n                } else if (linea >= lo && (!selector || e.matches(selector))) {\n                    ln.linea = linea;\n                    ln.lineb = lineb;\n                    yield ln;\n                }\n            }\n        }\n    }\n}\n\n\nhandle_ui.on(\"pa-diff-unfold\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-unfold\") : $(this),\n        fd = Filediff.by_hash(this.hash),\n        show = hasClass(fd.element, \"hidden\"),\n        direction = evt.metaKey ? true : show;\n    $es.each(function () {\n        Filediff.by_hash(this.hash).load().then(fd => fd.toggle(direction));\n    });\n    if (!evt.metaKey) {\n        $.post(hoturl(\"=api/diffconfig\", {psetinfo: fd.element, file: fd.file, collapse: show ? 0 : 1}));\n    }\n});\n\nhandle_ui.on(\"pa-diff-toggle-hide-left\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-toggle-hide-left\") : $(this),\n        show = hasClass(Filediff.referenced(this).element, \"pa-hide-left\");\n    $es.each(function () { Filediff.referenced(this).toggle_show_left(show); });\n});\n\nhandle_ui.on(\"pa-diff-toggle-hide-comments\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-toggle-hide-comments\") : $(this),\n        show = hasClass(Filediff.referenced(this).element, \"pa-hide-comments\");\n    $es.each(function () { Filediff.referenced(this).toggle_show_comments(show); });\n});\n\nhandle_ui.on(\"pa-filenav\", function () {\n    goto_hash(this.hash);\n});\n\nhandle_ui.on(\"pa-filenav-all\", function () {\n    for (const e of this.closest(\"nav\").querySelectorAll(\".pa-filenav\")) {\n        const fd = Filediff.by_href(e.href);\n        fd && fd.load().then(() => { fd.toggle(true); });\n    }\n});\n\nfunction goto_hash(hash) {\n    const m = hash.match(/^[^#]*#(L[ab]\\d+|)((?:U[-A-Za-z0-9_.@]+\\/|)F[-A-Za-z0-9_.@/]+)$/),\n        lineid = m && m[1] ? m[1].substring(1) : null,\n        fd = m ? Filediff.by_hash(\"#\" + m[2]) : null;\n    if (!fd) {\n        return;\n    }\n    if (!lineid) {\n        fd.load().then(() => {\n            fd.toggle(true);\n            window.scrollTo(0, fd.scroll_position());\n        }).catch(() => {\n            window.console && window.console.error(`File \\`${m[2]}\\` not loadable`);\n        });\n        return;\n    }\n    fd.line(lineid).then(ln => {\n        fd.toggle(true);\n        const e = ln.visible_predecessor().element;\n        hasClass(e, \"pa-gd\") && fd.toggle_show_left(true);\n        addClass(e, \"pa-line-highlight\");\n        window.scrollTo(0, Math.max($(e).geometry().top - Math.max(window.innerHeight * 0.1, 24), 0));\n    }).catch(() => {\n        window.console && window.console.error(`Line \\`${m[1]}${m[2]}\\` not loadable`);\n    });\n}\n\nif (!hasClass(document.body, \"want-grgraph-hash\")) {\n    $(window).on(\"popstate\", function (event) {\n        const state = (event.originalEvent || event).state;\n        state && state.href && goto_hash(state.href);\n    }).on(\"hashchange\", function () {\n        goto_hash(location.href);\n    });\n    $(function () { goto_hash(location.href); });\n}\n\nhandle_ui.on(\"pa-gx\", function (evt) {\n    new Linediff(evt.currentTarget).expand();\n});\n\n$(Filediff.decorate_page);\n\n\nfunction diffmany_dropmenu_toggle() {\n    const h3 = this.closest(\".pa-fileref\");\n    if (this.open) {\n        h3 && (h3.style.zIndex = 2);\n        const menu = this.lastElementChild.firstChild;\n        $(menu).awaken().find(\".want-focus\").focus();\n    } else {\n        h3 && (h3.style.zIndex = null);\n        this.removeEventListener(\"toggle\", diffmany_dropmenu_toggle);\n    }\n}\n\ndropmenu.add_builder(\"pa-dropmenu-diffmany\", function () {\n    const psim = this.closest(\".pa-diffset\"),\n        pme = this.closest(\".pa-psetinfo\"),\n        menu = $e(\"ul\", \"dropmenu need-dropmenu-events\");\n    for (let e = psim.firstElementChild; e; e = e.nextElementSibling) {\n        menu.appendChild($e(\"li\", \"has-link\",\n            $e(\"a\", {href: \"#\" + e.id, class: \"dropmenu-close\" + (e === pme ? \" want-focus\" : \"\"), role: \"menuitem\"}, e.getAttribute(\"data-pa-user\"))));\n    }\n    const details = this.closest(\"details\");\n    details.lastElementChild.replaceChildren(menu);\n    details.addEventListener(\"toggle\", diffmany_dropmenu_toggle);\n});\n","// diff-markdown.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { Filediff } from \"./diff.js\";\nimport { hasClass, addClass, removeClass, toggleClass, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { markdownit_minihtml } from \"./markdown-minihtml.js\";\nimport { markdownit_deflist } from \"./markdown-deflist.js\";\n\nlet md, mdcontext;\nconst nonwsre = /[^ \\t\\r\\n]/;\n\n\nfunction hljs_line(lang, s, hlstate) {\n    try {\n        const result = hljs.highlight(s, {language: lang, ignoreIllegals: true}),\n            ns = result.value;\n        if (s.endsWith(\"\\r\\n\") && ns.endsWith(\"\\n\\n\")) {\n            result.value = ns.substring(0, ns.length - 1);\n        }\n        return result;\n    } catch {\n        return null;\n    }\n}\n\nfunction render_map(map) {\n    if (map[0] + 1 === map[1]) {\n        return String(map[1]);\n    }\n    return (map[0] + 1) + \"-\" + map[1];\n}\n\nfunction add_landmark(tokens, idx, options, env, self) {\n    var token = tokens[idx];\n    if (token.map && token.level === 0) {\n        token.attrSet(\"data-landmark\", render_map(token.map));\n    }\n    return self.renderToken(tokens, idx, options, env);\n}\n\nfunction add_landmark_1(tokens, idx, options, env, self) {\n    var token = tokens[idx];\n    if (token.map && token.level <= 1) {\n        token.attrSet(\"data-landmark\", render_map(token.map));\n    }\n    return self.renderToken(tokens, idx, options, env);\n}\n\nfunction fix_landmark_html(html, token) {\n    if (token.map && token.level === 0) {\n        var lm = \" data-landmark=\\\"\" + render_map(token.map) + \"\\\"\",\n            sp = html.indexOf(\" \"),\n            gt = html.indexOf(\">\");\n        if (sp > 0 && sp < gt) {\n            gt = sp;\n        }\n        html = html.substring(0, gt) + lm + html.substring(gt);\n    }\n    return html;\n}\n\nfunction modify_landmark(base) {\n    if (!base) {\n        return add_landmark;\n    } else {\n        return function (tokens, idx, options, env, self) {\n            var token = tokens[idx];\n            return fix_landmark_html(base(tokens, idx, options, env, self), token);\n        };\n    }\n}\n\nfunction modify_landmark_image(base) {\n    function fix(pi, file) {\n        return siteinfo.site_relative + \"~\" + encodeURIComponent(siteinfo.uservalue) + \"/raw/\" + pi.getAttribute(\"data-pa-pset\") + \"/\" + pi.getAttribute(\"data-pa-commit\") + \"/\" + file;\n    }\n    return function (tokens, idx, options, env, self) {\n        var token = tokens[idx],\n            srci = token.attrIndex(\"src\"),\n            src = token.attrs[srci][1],\n            pi, m, m2;\n        if (siteinfo.uservalue\n            && mdcontext\n            && (pi = mdcontext.closest(\".pa-psetinfo\"))) {\n            if (!/\\/\\//.test(src)) {\n                var fd = Filediff.closest(mdcontext),\n                    dir = fd ? fd.file.replace(/^(.*)\\/[^/]*$/, '$1') : \"\";\n                while (true) {\n                    if (src.startsWith(\"./\")) {\n                        src = src.substring(2).replace(/^\\/+/, \"\");\n                    } else if (src.startsWith(\"../\") && dir !== \"\") {\n                        src = src.substring(3).replace(/^\\/+/, \"\");\n                        dir = dir.replace(/(?:^|\\/)[^/]+\\/*$/, \"\");\n                    } else if (src.startsWith(\"../\") || src.startsWith(\"/\")) {\n                        src = null;\n                        break;\n                    } else if ((m = src.match(/(^|\\/+)[^/]+\\/\\.\\.(?:\\/+|$)(.*)$/))) {\n                        src = m[1] + m[2];\n                    } else {\n                        break;\n                    }\n                }\n                if (src) {\n                    token.attrs[srci][1] = fix(pi, dir ? dir + \"/\" + src : src);\n                } else {\n                    token.attrs[srci][1] = \"data:image/jpg,\";\n                }\n            } if ((m = src.match(/^https:\\/\\/github\\.com\\/([^/]+\\/[^/]+)\\/(?:blob|raw)\\/([^/]+)\\/(.*)$/))\n                  && (m2 = (pi.getAttribute(\"data-pa-repourl\") || \"\").match(/^(?:https:\\/\\/github\\.com\\/|git@github\\.com:)(.*?)\\/?$/))\n                  && m2[1] == m[1]\n                  && pi.getAttribute(\"data-pa-branch\") == m[2]) {\n                token.attrs[srci][1] = fix(pi, m[3]);\n            }\n        }\n        return fix_landmark_html(base(tokens, idx, options, env, self), token);\n    };\n}\n\nfunction render_landmark_fence(md) {\n    return function (tokens, idx, options, env, self) {\n        const token = tokens[idx];\n        let info = token.info ? md.utils.unescapeAll(token.info) : \"\", m;\n        if (info && info.indexOf(\" \") >= 0) {\n            if ((m = info.match(/^ *([-a-z+]+) *$/))) {\n                info = m[1];\n            } else {\n                token.content = info + \"\\n\" + token.content;\n                token.map && (token.map[0] -= 1);\n                info = \"\";\n            }\n        }\n        let lang = info ? info.trim().split(/\\s+/g)[0] : \"\";\n        if (!lang || !hljs.getLanguage(lang)) {\n            lang = null;\n        }\n\n        let xtoken = token;\n        if (lang) {\n            let i = token.attrIndex(\"class\");\n            xtoken = {attrs: token.attrs ? token.attrs.slice() : []};\n            if (i < 0) {\n                xtoken.attrs.push([\"class\", options.langPrefix + lang]);\n            } else {\n                xtoken.attrs[i][1] += \" \" + options.langPrefix + lang;\n            }\n        }\n        let xattrs = '><code'.concat(self.renderAttrs(xtoken), '>');\n\n        if (token.map && token.level === 0) {\n            // split into lines, assign landmarks\n            const x = token.content.split(/\\n/), y = [];\n            x[x.length - 1] === \"\" && x.pop();\n            const xl = x.length;\n            let i = 0, ln0 = token.map[0] + 2, hlstate = null;\n            while (lang && i !== xl) {\n                const result = hljs_line(lang, x[i] + \"\\n\", hlstate);\n                if (result) {\n                    y.push('<pre data-landmark=\"', ln0 + i,\n                           i + 1 !== xl ? '\" class=\"partial\"' : '\"',\n                           xattrs, result.value, \"</code></pre>\");\n                    hlstate = result.top;\n                    ++i;\n                } else {\n                    break;\n                }\n            }\n            while (i !== xl) {\n                y.push('<pre data-landmark=\"', ln0 + i,\n                       i + 1 !== xl ? '\" class=\"partial\"' : '\"',\n                       xattrs, x[i], \"\\n</code></pre>\");\n                ++i;\n            }\n            return y.join(\"\");\n        } else {\n            return '<pre'.concat(xattrs, md.utils.escapeHtml(token.content), '</code></pre>');\n        }\n    };\n}\n\nfunction make_markdownit() {\n    if (!md) {\n        md = markdownit({linkify: true})\n            .use(markdownit_katex)\n            .use(markdownit_minihtml)\n            .use(markdownit_deflist);\n        for (var x of [\"paragraph_open\", \"heading_open\", \"ordered_list_open\",\n                       \"bullet_list_open\", \"table_open\", \"blockquote_open\",\n                       \"hr\"]) {\n            md.renderer.rules[x] = modify_landmark(md.renderer.rules[x]);\n        }\n        md.renderer.rules.fence = md.renderer.rules.code_block = render_landmark_fence(md);\n        md.renderer.rules.image = modify_landmark_image(md.renderer.rules.image);\n        md.renderer.rules.list_item_open = add_landmark_1;\n    }\n    return md;\n}\n\nfunction fix_list_item(d) {\n    var dc;\n    while ((dc = d.firstChild) && dc.nodeType !== 1) {\n        d.removeChild(dc);\n    }\n    if (dc && dc.hasAttribute(\"data-landmark\")) {\n        while (dc.nextSibling && dc.nextSibling.nodeType !== 1) {\n            d.removeChild(dc.nextSibling);\n        }\n        if (dc.nextSibling) {\n            if (d.tagName === \"OL\") {\n                if (!dc.hasAttribute(\"value\")) {\n                    dc.value = d.start;\n                }\n                d.start = dc.value + 1;\n            }\n            var nd = document.createElement(d.tagName);\n            nd.appendChild(d.removeChild(dc));\n            d = nd;\n        }\n        d.setAttribute(\"data-landmark\", dc.getAttribute(\"data-landmark\"));\n    }\n    return d;\n}\n\nFilediff.define_method(\"markdown\", function () {\n    const elt = this.element;\n    if (hasClass(elt, \"pa-markdown\")\n        || hasClass(elt, \"pa-highlight\")) {\n        return;\n    }\n    const hidelm = hasClass(elt, \"pa-hide-landmarks\"),\n        drclass = hidelm ? \"pa-dr pa-dhlm\" : \"pa-dr\";\n    // collect content\n    let e = elt.firstChild, l = [], lineno = 1;\n    while (e) {\n        let n = e.nextSibling;\n        if (hasClass(e, \"pa-dlr\")) {\n            elt.removeChild(e);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            const this_lineno = +e.firstChild.nextSibling.getAttribute(\"data-landmark\");\n            while (lineno < this_lineno) {\n                l.push(\"\\n\");\n                ++lineno;\n            }\n            l.push(e.lastChild.textContent);\n            ++lineno;\n            e.hidden = true;\n        }\n        e = n;\n    }\n    // render to markdown\n    let dx = document.createElement(\"div\"), d, lr;\n    mdcontext = elt;\n    dx.innerHTML = make_markdownit().render(l.join(\"\"));\n    mdcontext = null;\n    // split up and insert into order\n    e = elt.firstChild;\n    while ((d = dx.firstChild)) {\n        if (d.nodeType !== 1) {\n            dx.removeChild(d);\n            continue;\n        } else if (d.tagName === \"OL\" || d.tagName === \"UL\") {\n            d = fix_list_item(d);\n        } else if (d.tagName === \"P\"\n                   && d.firstChild.nodeType === 1\n                   && d.firstChild.tagName === \"IMG\"\n                   && d.firstChild === d.lastChild) {\n            addClass(d, \"image-container\");\n        }\n\n        const lp = document.createElement(\"div\");\n        lp.className = \"pa-dl pa-dlr\";\n        const la = document.createElement(\"div\");\n        la.className = \"pa-da\";\n        la.hidden = hidelm;\n        const lb = document.createElement(\"div\");\n        lb.className = \"pa-db\";\n        lb.hidden = hidelm;\n\n        const lm = d.getAttribute(\"data-landmark\");\n        if (lm) {\n            let l1 = parseInt(lm),\n                dash = lm.indexOf(\"-\"),\n                l2 = dash >= 0 ? parseInt(lm.substring(dash + 1)) : l1;\n            while (e) {\n                if ((hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\"))\n                    && +e.firstChild.nextSibling.getAttribute(\"data-landmark\") >= l1) {\n                    break;\n                }\n                e = e.nextSibling;\n            }\n            lb.setAttribute(\"data-landmark\", l1);\n            let klass = 0, ee = e;\n            while (ee) {\n                if (hasClass(ee, \"pa-gi\") || hasClass(ee, \"pa-gc\")) {\n                    if (+ee.firstChild.nextSibling.getAttribute(\"data-landmark\") >= l2) {\n                        break;\n                    }\n                    klass |= hasClass(ee, \"pa-gi\") ? 1 : 2;\n                }\n                ee = ee.nextSibling;\n            }\n            lp.className += klass === 2 ? \" pa-gc\" : \" pa-gi\";\n        }\n\n        lr = document.createElement(\"div\");\n        lr.className = drclass;\n        if (d === dx.firstChild) {\n            dx.removeChild(d);\n        }\n        lr.appendChild(d);\n        while (dx.firstChild && dx.firstChild.nodeType !== 1) {\n            lr.appendChild(dx.removeChild(dx.firstChild));\n        }\n\n        lp.append(la, lb, lr);\n        elt.insertBefore(lp, e);\n    }\n\n    if (lr) {\n        addClass(lr, \"pa-dr-last\");\n    }\n    addClass(elt, \"pa-markdown\");\n    removeClass(elt, \"need-markdown\");\n});\n\nFilediff.define_method(\"unmarkdown\", function () {\n    const elt = this.element;\n    let e = elt.firstChild;\n    while (e) {\n        var n = e.nextSibling;\n        if (hasClass(e, \"pa-dlr\")) {\n            elt.removeChild(e);\n        } else if (hasClass(e, \"pa-gi\") || hasClass(e, \"pa-gc\")) {\n            e.hidden = false;\n        }\n        e = n;\n    }\n    removeClass(elt, \"pa-markdown\");\n});\n\nFilediff.define_method(\"highlight\", function () {\n    const elt = this.element;\n    // compute language\n    let lang;\n    if (!(lang = elt.getAttribute(\"data-language\"))) {\n        let file = this.file;\n        if (/\\.(?:cc|cpp|hh|hpp|c\\+\\+|h\\+\\+|C|H)$/.test(file)) {\n            lang = \"c++\";\n        } else if (/\\.(?:c|h)$/.test(file)) {\n            lang = \"c\";\n        }\n        lang && elt.setAttribute(\"data-language\", lang);\n    }\n    if (!lang\n        || !hljs.getLanguage(lang)\n        || hasClass(elt, \"pa-markdown\")) {\n        return;\n    }\n    // collect content\n    const langclass = \"language-\" + lang;\n    let e = elt.firstChild, hlstatei = null, hlstated = null;\n    for (; e; e = e.nextSibling) {\n        const type = hasClass(e, \"pa-gi\") ? 2 : (hasClass(e, \"pa-gc\") ? 3 : (hasClass(e, \"pa-gd\") ? 1 : 0));\n        if (type === 0) {\n            continue;\n        }\n        const ce = e.lastChild,\n            ishl = hasClass(ce, langclass),\n            s = ishl ? ce.getAttribute(\"data-pa-text\") : ce.textContent,\n            result = hljs_line(lang, s, type & 2 ? hlstatei : hlstated);\n        if (!result) {\n            break;\n        }\n        if (type & 1) {\n            hlstated = result.top;\n        }\n        if (type & 2) {\n            hlstatei = result.top;\n        }\n        if (ishl) {\n            continue;\n        }\n        ce.setAttribute(\"data-pa-text\", s);\n        ce.innerHTML = result.value;\n        addClass(ce, langclass);\n        let state = 0;\n        for (let xe = ce.firstChild; xe; xe = xe.nextSibling) {\n            if ((xe.nodeType === 1 && !hasClass(xe, \"hljs-comment\"))\n                || (xe.nodeType === 3 && nonwsre.test(xe.textContent))) {\n                state = -1;\n                break;\n            } else if (xe.nodeType === 1) {\n                state = 1;\n            }\n        }\n        if (state === 0) {\n            addClass(e, \"pa-gblank\");\n        } else if (state === 1) {\n            addClass(e, \"pa-gcomment\");\n        }\n    }\n    addClass(elt, \"pa-highlight\");\n    removeClass(elt, \"need-highlight\");\n});\n\nFilediff.define_method(\"unhighlight\", function () {\n    // compute language\n    const elt = this.element,\n        lang = elt.getAttribute(\"data-language\"),\n        langclass = lang ? \"language-\" + lang : \"\";\n    let e = elt.firstChild, et;\n    while (e) {\n        if ((et = e.lastChild)\n            && et.hasAttribute(\"data-pa-text\")\n            && (!langclass || hasClass(et, langclass))) {\n            et.innerText = et.getAttribute(\"data-pa-text\");\n            et.removeAttribute(\"data-pa-text\");\n            langclass && removeClass(et, langclass);\n        }\n        e = e.nextSibling;\n    }\n    removeClass(elt, \"pa-highlight\");\n});\n\nFilediff.add_decorator(function (fd) {\n    if (hasClass(fd.element, \"need-markdown\")) {\n        fd.markdown();\n    } else if (hasClass(fd.element, \"need-highlight\")) {\n        fd.highlight();\n    }\n});\n\n\nhandle_ui.on(\"pa-diff-toggle-markdown\", function (evt) {\n    const $es = evt.metaKey ? $(\".pa-diff-toggle-markdown\") : $(this),\n        fd = Filediff.referenced(this),\n        show = !hasClass(fd.element, \"pa-markdown\");\n    $es.each(function () {\n        const fd = Filediff.referenced(this),\n            shown = hasClass(fd.element, \"pa-markdown\");\n        if (show && !shown) {\n            fd.markdown();\n        } else if (!show && shown) {\n            fd.unmarkdown();\n        }\n        toggleClass(this, \"btn-primary\", show);\n    });\n    if (!evt.metaKey) {\n        $.post(hoturl(\"=api/diffconfig\", {psetinfo: fd.element}),\n            {file: fd.file, markdown: show ? 1 : 0});\n    }\n});\n","// note.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { $e, hasClass, addClass, removeClass } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { ftext, render_onto, feedback } from \"./render.js\";\nimport { text_eq } from \"./utils.js\";\nimport { Filediff, Linediff } from \"./diff.js\";\n\n\nexport class Note {\n    constructor() {\n        this.iscomment = false;\n        this.ftext = \"\";\n        this.format = null;\n    }\n\n    empty() {\n        return this.ftext === \"\";\n    }\n\n    get file() {\n        return Filediff.closest(this.element || this.source).file;\n    }\n\n    get lineid() {\n        if (this.element) {\n            return this.element.getAttribute(\"data-landmark\");\n        } else {\n            return new Linediff(this.source).note_lineid;\n        }\n    }\n\n    get linea() {\n        return new Linediff(this.element || this.source).linea;\n    }\n\n    linea_within(bound) {\n        return new Linediff(this.element || this.source).linea_within(bound);\n    }\n\n    get editable_text() {\n        const ft = ftext.parse(this.ftext);\n        return ft[1];\n    }\n\n    static parse(x) {\n        const n = new Note;\n        if (typeof x === \"string\" && x !== \"\") {\n            x = JSON.parse(x);\n        }\n        n.assign(x);\n        return n;\n    }\n\n    assign(x) {\n        let myftext = [null, \"\"];\n        if (typeof x === \"number\") {\n            this.iscomment = false;\n            this.ftext = \"\";\n            this.users = null;\n            this.version = x;\n        } else if (Array.isArray(x)) {\n            this.iscomment = x[0];\n            this.ftext = x[1];\n            myftext = ftext.parse(x[1]);\n            this.users = x[2] || null;\n            this.version = x[3] && typeof x[3] === \"number\" ? x[3] : null;\n        }\n        this.format = myftext[0];\n\n        const elt = this.element;\n        if (elt) {\n            if (this.ftext === \"\" && this.version == null) {\n                elt.removeAttribute(\"data-pa-note\");\n            } else if (this.ftext === \"\" && this.users == null) {\n                elt.setAttribute(\"data-pa-note\", \"\" + this.version);\n            } else {\n                const a = [this.iscomment, this.ftext];\n                if (this.users != null || this.version != null) {\n                    a.push(this.users, this.version);\n                }\n                elt.setAttribute(\"data-pa-note\", JSON.stringify(a));\n            }\n        }\n        return this;\n    }\n\n    static at(elt) {\n        const n = Note.parse(elt.getAttribute(\"data-pa-note\"));\n        n.element = elt;\n        return n;\n    }\n\n    static closest(elt) {\n        const e = elt.closest(\".pa-dl\");\n        return e ? Note.at(e) : null;\n    }\n\n    static near(t) {\n        if (t instanceof Linediff) {\n            t = t.element;\n        }\n        let e = t;\n        while (e) {\n            if (e.nodeType !== 1) {\n                e = e.nextSibling;\n            } else if (hasClass(e, \"pa-gw\")) {\n                return Note.at(e);\n            } else if (e === t || hasClass(e, \"pa-gn\") || hasClass(e, \"pa-gx\") || e.hidden) {\n                e = e.nextSibling;\n            } else {\n                break;\n            }\n        }\n        const n = new Note();\n        n.source = t;\n        return n;\n    }\n\n    force_element() {\n        if (!this.element) {\n            const source = new Linediff(this.source),\n                lineid = source.note_lineid,\n                insertion = source.upper_bound(lineid);\n            this.element = document.createElement(\"div\");\n            this.element.className = \"pa-dl pa-gw\";\n            this.element.setAttribute(\"data-landmark\", lineid);\n            if (this.version || this.ftext !== \"\") {\n                this.element.setAttribute(\"data-pa-note\", JSON.stringify([this.iscomment, this.ftext, this.users, this.version]));\n            }\n            let box = document.createElement(\"div\");\n            box.className = \"pa-notebox\";\n            this.element.appendChild(box);\n            this.source.parentElement.insertBefore(this.element, insertion ? insertion.element : null);\n        }\n        return this.element;\n    }\n\n    cancel_edit() {\n        if (this.element && hasClass(this.element, \"editing\")) {\n            $(this.element).find(\"textarea\").val(this.editable_text);\n        }\n        return this;\n    }\n\n    render(transition) {\n        this.force_element();\n\n        if (hasClass(this.element, \"editing\")) {\n            const $text = $(this.element).find(\"textarea\");\n            if ($text.length && !text_eq(this.editable_text, $text.val().replace(/\\s+$/, \"\"))) {\n                return false;\n            }\n            removeClass(this.element, \"editing\");\n            $(this.element).find(\":focus\").blur();\n        }\n\n        const $td = $(this.element).find(\".pa-notebox\"),\n            $content = $td.children();\n        if (transition) {\n            $content.slideUp(80).queue(function () { $content.remove(); });\n        } else {\n            $content.remove();\n        }\n\n        if (this.ftext === \"\") {\n            fix_links_at(this.element);\n            if (transition) {\n                $(this.element).children().slideUp(80);\n            } else {\n                this.element.hidden = true;\n            }\n            return true;\n        }\n\n        const contdiv = document.createElement(\"div\");\n        contdiv.className = \"pa-notecontent clearfix\";\n        if (this.users) {\n            const authorids = $.isArray(this.users) ? this.users : [this.users],\n                authors = [];\n            for (let i in authorids) {\n                const p = siteinfo.pc ? siteinfo.pc[authorids[i]] : null;\n                if (p) {\n                    if (p.nick) {\n                        authors.push(p.nick);\n                    } else if (p.nicklen || p.lastpos) {\n                        authors.push(p.name.substr(0, p.nicklen || p.lastpos - 1));\n                    } else {\n                        authors.push(p.name);\n                    }\n                }\n            }\n            if (authors.length) {\n                const authordiv = document.createElement(\"div\");\n                authordiv.className = \"pa-note-author\";\n                authordiv.append(\"[\" + authors.join(\", \") + \"]\");\n                contdiv.append(authordiv);\n            }\n        }\n        if (!this.iscomment) {\n            const markdiv = document.createElement(\"div\");\n            markdiv.className = \"pa-gradenote-marker\";\n            contdiv.append(markdiv);\n        }\n        const notediv = document.createElement(\"div\");\n        notediv.className = \"pa-dr pa-note pa-\".concat(this.iscomment ? \"comment\" : \"grade\", \"note\");\n        contdiv.append(notediv);\n        $td.append(contdiv);\n\n        render_onto(notediv, \"f\", this.ftext);\n\n        fix_links_at(this.element);\n        if (transition) {\n            $(contdiv).hide().slideDown(80);\n        } else {\n            $td.show();\n        }\n        this.element.hidden = false;\n        return true;\n    }\n\n    save_ftext(ftext, iscomment) {\n        if (this.element) {\n            if (hasClass(this.element, \"pa-outstanding\")) {\n                return Promise.reject(new Error(\"Outstanding request\"));\n            }\n            addClass(this.element, \"pa-outstanding\");\n        }\n\n        const editing = this.element && hasClass(this.element, \"editing\"),\n            self = this,\n            tr = this.element || this.source,\n            fd = tr.closest(\".pa-filediff\"),\n            pi = fd.closest(\".pa-psetinfo\"),\n            grb = tr.closest(\".pa-grade-range-block\");\n\n        const data = {ftext: ftext}, linea = this.linea_within(1000);\n        if (iscomment) {\n            data.iscomment = 1;\n        }\n        if (linea) {\n            data.linea = linea;\n        }\n\n        if (grb) {\n            grb.setAttribute(\"data-pa-notes-outstanding\", +grb.getAttribute(\"data-pa-notes-outstanding\") + 1);\n        }\n\n        return new Promise(function (resolve, reject) {\n            api_conditioner(\n                hoturl(\"=api/linenote\", {\n                    psetinfo: pi, file: self.file, line: self.lineid, oldversion: self.version || 0\n                }), data\n            ).then(function (data) {\n                self.element && removeClass(self.element, \"pa-outstanding\");\n                if (data && data.ok) {\n                    self.force_element();\n                    removeClass(self.element, \"pa-save-failed\");\n                    const nd = data.linenotes[self.file];\n                    self.assign(nd && nd[self.lineid]);\n                    self.render(editing);\n                    resolve(self);\n                    if (self.file.startsWith(\"/g/\")\n                        && pi\n                        && pi.pa__gradesheet) {\n                        pi.pa__gradesheet.add_linenotes(data.linenotes);\n                    }\n                } else {\n                    if (self.element) {\n                        addClass(self.element, \"pa-save-failed\");\n                    }\n                    if (editing) {\n                        $(self.element).find(\".pa-save-message\").html(\n                            feedback.render_xhr_error_onto($e(\"strong\", \"err\"), data)\n                        );\n                    }\n                    reject(new Error(\"Save failed\"));\n                }\n                if (grb) {\n                    resolve_grade_range(grb);\n                }\n            });\n        });\n    }\n\n    save_text(text, iscomment) {\n        let format = this.format;\n        if (format == null) {\n            format = +document.body.getAttribute(\"data-default-format\");\n            if (isNaN(format))\n                format = 0;\n        }\n        return this.save_ftext(ftext.unparse(format, text), iscomment);\n    }\n}\n\n\nfunction set_link(tr, next_tr) {\n    let a = tr.querySelector(\".pa-note-links a\"), t;\n    if (!a) {\n        const nc = tr.querySelector(\".pa-notecontent\");\n        if (!nc) {\n            return;\n        }\n        nc.insertBefore($e(\"div\", \"pa-note-links\", (a = $e(\"a\", {tabindex: -1}))), nc.firstChild);\n    }\n    if (next_tr) {\n        a.href = new Linediff(next_tr).hash;\n        t = \"NEXT >\";\n    } else {\n        a.href = \"\";\n        t = \"TOP\";\n    }\n    if (a.textContent !== t) {\n        a.textContent = t;\n    }\n}\n\nfunction fix_links_at(tr) {\n    const trs = $(\".pa-gw\");\n    let notepos = 0;\n    while (notepos < trs.length && trs[notepos] !== tr) {\n        ++notepos;\n    }\n    if (notepos < trs.length) {\n        let prevpos = notepos - 1;\n        while (prevpos >= 0 && Note.at(trs[prevpos]).empty()) {\n            --prevpos;\n        }\n\n        let nextpos = notepos + 1;\n        while (nextpos < trs.length && Note.at(trs[nextpos]).empty()) {\n            ++nextpos;\n        }\n\n        if (prevpos >= 0) {\n            set_link(trs[prevpos], Note.at(tr).empty() ? trs[nextpos] : tr);\n        }\n        set_link(tr, trs[nextpos]);\n    }\n}\n\nfunction resolve_grade_range(grb) {\n    var count = +grb.getAttribute(\"data-pa-notes-outstanding\") - 1;\n    if (count) {\n        grb.setAttribute(\"data-pa-notes-outstanding\", count);\n    } else {\n        grb.removeAttribute(\"data-pa-notes-outstanding\");\n        $(grb).find(\".pa-grade\").each(function () {\n            $pa.gradeentry_closest(this).save_landmark_grade(grb);\n        });\n    }\n}\n","// gc.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { addClass, hasClass, input_set_default_value } from \"./ui.js\";\nimport { strftime, sec2text } from \"./utils.js\";\n\nlet map = {};\n\nconst color_map = {\n    \"red\": \"cR\", \"orange\": \"cO\", \"yellow\": \"cY\", \"green\": \"cG\",\n    \"blue\": \"cB\", \"purple\": \"cP\", \"gray\": \"cA\", \"grey\": \"cA\"\n};\n\nexport const GradeClass = {\n    basic_text: v => (v == null ? \"\" : \"\" + v),\n\n    basic_mount_edit: function (elt, id, opts) {\n        let sp = document.createElement(\"span\");\n        sp.className = \"pa-gradedesc\";\n        if (opts && opts.max_text) {\n            sp.append(opts.max_text);\n        } else if (this.max) {\n            sp.append('of ' + this.max);\n        }\n        const df = new DocumentFragment;\n        let e;\n        if (window.$pa.long_page) {\n            e = document.createElement(\"textarea\");\n            e.className = \"ta1 uich uii pa-gradevalue pa-gradewidth pa-fresh\";\n            e.setAttribute(\"rows\", 1);\n            e.setAttribute(\"cols\", 10000);\n            e.setAttribute(\"wrap\", \"none\");\n        } else {\n            e = document.createElement(\"input\");\n            e.type = \"text\";\n            e.className = \"uich uii pa-gradevalue pa-gradewidth pa-fresh\";\n        }\n        e.name = this.key;\n        e.id = id;\n        e.disabled = this.disabled;\n        df.append(e, \" \", sp);\n        return df;\n    },\n\n    basic_mount_show: function (elt, id) {\n        elt.id = id;\n        const es = [document.createElement(\"span\")];\n        es[0].className = \"pa-gradevalue pa-gradewidth\";\n        if (this.max && this.type !== \"letter\") {\n            es.push(\" \", document.createElement(\"span\"));\n            es[2].className = \"pa-gradedesc\";\n            es[2].append(\"of \" + this.max);\n        }\n        elt.replaceChildren(...es);\n    },\n\n    basic_unmount: function (elt) {\n        elt.remove();\n    },\n\n    basic_update_edit: function (elt, v, opts) {\n        const ve = elt.querySelector(\".pa-gradevalue\"),\n            gt = this.simple_text(v);\n        input_set_default_value(ve, gt);\n        ve.value = gt;\n        if (opts.mixed != null) {\n            opts.mixed ? ve.setAttribute(\"placeholder\", \"Mixed\") : ve.removeAttribute(\"placeholder\");\n        }\n    },\n\n    basic_configure_column: function (col) {\n        col.ge = this;\n        col.gabbr = this.abbr();\n        col.justify = this.gc.justify || \"right\";\n        col.sort_forward = this.gc.sort === \"forward\";\n        const justify = this.gc.justify || \"right\";\n        if (col.gkey === col.ptconf.total_key) {\n            col.className = this.readonly ? \"gt-total\" : \"gt-total gt-grade\";\n        } else {\n            col.className = this.readonly ? \"gt-rograde\" : \"gt-grade\";\n        }\n        col.className += justify === \"left\" ? \" l\" : \" r\";\n        if (this.table_color && color_map[this.table_color]) {\n            col.className += \" \" + color_map[this.table_color];\n        }\n        col.make_compare = sort => this.gc.make_compare.call(this, col, sort);\n        return col;\n    },\n\n    basic_make_compare: function (col) {\n        const gidx = col.gidx, erev = this.gc.sort === \"forward\" ? 1 : -1;\n        return function (a, b) {\n            const ag = a.grades && a.grades[gidx],\n                bg = b.grades && b.grades[gidx];\n            if (ag === \"\" || ag == null || bg === \"\" || bg == null) {\n                if (ag !== \"\" && ag != null) {\n                    return -erev;\n                } else if (bg !== \"\" && bg != null) {\n                    return erev;\n                }\n            } else if (ag < bg) {\n                return -1;\n            } else if (ag > bg) {\n                return 1;\n            }\n            return erev * a._sort_user.localeCompare(b._sort_user);\n        };\n    },\n\n    basic_tcell_width: function () {\n        return 3;\n    },\n\n    add: (name, x) => {\n        x.type = name;\n        x.initialize = x.initialize || (() => null);\n        x.type_tabular = x.type_tabular == null ? true : x.type_tabular;\n        x.want_sidebar = x.want_sidebar == null ? true : x.want_sidebar;\n        x.text = x.text || GradeClass.basic_text;\n        x.simple_text = x.simple_text || x.text;\n        x.configure_column = x.configure_column || GradeClass.basic_configure_column;\n        x.tcell_width = x.tcell_width || GradeClass.basic_tcell_width;\n        x.tcell = x.tcell || x.text;\n        x.make_compare = x.make_compare || GradeClass.basic_make_compare;\n        x.mount_show = x.mount_show || GradeClass.basic_mount_show;\n        x.mount_edit = x.mount_edit || GradeClass.basic_mount_edit;\n        x.update_edit = x.update_edit || GradeClass.basic_update_edit;\n        x.unmount = x.unmount || GradeClass.basic_unmount;\n        map[name] = x;\n    },\n\n    find: name => map[name] || map.numeric\n};\n\n\nGradeClass.add(\"numeric\", {\n    mount_edit: GradeClass.basic_mount_edit\n});\n\nGradeClass.add(\"formula\", {\n    text: function (v) {\n        if (v == null || v === false) {\n            return \"\";\n        } else if (v === true) {\n            return \"\";\n        }\n        const t = v.toFixed(1);\n        return t.endsWith(\".0\") ? t.substring(0, t.length - 2) : t;\n    }\n});\n\nGradeClass.add(\"time\", {\n    text: function (v) {\n        if (v == null || v === 0) {\n            return \"\";\n        }\n        return strftime(\"%Y-%m-%d %H:%M\", v);\n    },\n    tcell_width: 10,\n    justify: \"left\",\n    sort: \"forward\"\n});\n\nGradeClass.add(\"duration\", {\n    text: function (v) {\n        if (v == null) {\n            return \"\";\n        }\n        return sec2text(v, \"quarterhour\");\n    },\n    tcell_width: 4,\n    justify: \"left\",\n    sort: \"forward\"\n});\n\nGradeClass.add(\"section\", {\n    text: () => \"\",\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt.closest(\".pa-p\"), \"pa-p-section\");\n    },\n    mount_edit: function (elt) {\n        addClass(elt.closest(\".pa-p\"), \"pa-p-section\");\n    },\n    update_show: function () {\n        return false;\n    },\n    update_edit: function () {\n        return false;\n    },\n    type_tabular: false,\n    want_sidebar: false\n});\n\nGradeClass.add(\"none\", {\n    mount_show: function (/*elt, id*/) {\n    },\n    mount_edit: function (/*elt*/) {\n    },\n    update_show: function () {\n        return true;\n    },\n    update_edit: function () {\n        return true;\n    },\n    type_tabular: false,\n    want_sidebar: false\n});\n\n\nconst DGSELECTOR = \".pa-dg, .pa-gradelist\";\n\nfunction tabgroup_traverse(sb, bwd, sidebar) {\n    const dir = bwd ? \"previousElementSibling\" : \"nextElementSibling\",\n        childdir = bwd ? \"lastElementChild\" : \"firstElementChild\";\n    if (sidebar) {\n        sb = sb.closest(DGSELECTOR);\n    }\n    let parent = sb.parentElement, ch, down = false;\n    while (parent) {\n        if (!down) {\n            sb = sb[dir];\n        }\n        down = false;\n        if (!sb) {\n            sb = parent;\n            parent = sb.parentElement;\n        } else if (hasClass(sb, \"pa-dg\") || hasClass(sb, \"pa-gradelist\")) {\n            if (sidebar) {\n                if ((ch = sb.querySelector(\".pa-sidebar\"))) {\n                    return ch;\n                }\n            } else {\n                ch = sb.querySelectorAll(\".pa-gradevalue\");\n                if (ch.length > 0) {\n                    return ch[bwd ? ch.length - 1 : 0].closest(DGSELECTOR);\n                }\n            }\n        } else if (hasClass(sb, \"pa-psetinfo\")) {\n            if ((ch = sb[childdir])) {\n                parent = sb;\n                sb = ch;\n                down = true;\n            }\n        }\n    }\n    return null;\n}\n\nfunction tab_traverse(e, bwd, sidebar) {\n    let sb = e.closest(sidebar ? \".pa-sidebar\" : DGSELECTOR),\n        sbtabs = sb.querySelectorAll(\".pa-gradevalue\"),\n        pos = Array.prototype.indexOf.call(sbtabs, e);\n    if (pos < 0) {\n        return null;\n    }\n    while (true) {\n        pos += bwd ? -1 : 1;\n        if (pos < 0 || pos >= sbtabs.length) {\n            if (!(sb = tabgroup_traverse(sb, bwd, sidebar))) {\n                return null;\n            }\n            sbtabs = sb.querySelectorAll(\".pa-gradevalue\");\n            pos = bwd ? sbtabs.length : -1;\n        } else {\n            const ch = sbtabs[pos], tn = ch.tagName;\n            if (ch.offsetParent\n                && (tn === \"INPUT\" || tn === \"TEXTAREA\" || tn === \"SELECT\" || tn === \"BUTTON\")\n                && (sidebar || !ch.closest(\".pa-sidebar\"))) {\n                return ch;\n            }\n        }\n    }\n}\n\ndocument.body.addEventListener(\"keydown\", function (evt) {\n    if (evt.key !== \"Tab\"\n        || !hasClass(evt.target, \"pa-gradevalue\")\n        || evt.ctrlKey\n        || evt.metaKey) {\n        return;\n    }\n    let dest;\n    if (evt.target.closest(\".pa-sidebar\")) {\n        dest = tab_traverse(evt.target, evt.shiftKey, true);\n    } else if (evt.altKey) {\n        dest = tab_traverse(evt.target, evt.shiftKey, false);\n    }\n    if (dest) {\n        dest.focus({focusVisible: true});\n        if (dest.type === \"textarea\" || dest.type === \"text\") {\n            dest.setSelectionRange(0, dest.value.length);\n        }\n        evt.preventDefault();\n    }\n});\n","// gradeentry.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities, html_id_encode } from \"./encoders.js\";\nimport { hasClass, addClass, toggleClass, removeClass, $e,\n    input_default_value, input_set_default_value, input_differs } from \"./ui.js\";\nimport { Filediff, Linediff } from \"./diff.js\";\nimport { Note } from \"./note.js\";\nimport { GradeClass } from \"./gc.js\";\nimport { render_onto } from \"./render.js\";\n\n\nlet id_counter = 0, late_hours_entry;\nconst gradesheet_props = {\n    // must include props from GradeExport and from StudentSet::json_basics\n    \"pset\": true,\n    \"uid\": true, \"user\": true, \"anon_user\": true, \"email\": true, \"first\": true, \"last\": true,\n    \"year\": true, \"x\": true, \"dropped\": true, \"imageid\": true,\n    \"commit\": true, \"base_commit\": true, \"base_handout\": true, \"grade_commit\": true, \"emptydiff\": true, \"grade_status\": true,\n    \"late_hours\": true, \"auto_late_hours\": true,\n    \"student_timestamp\": true, \"grades_latest\": true,\n    \"version\": true, \"history\": true, \"total_type\": true, \"total\": true,\n    \"total_noextra\": true, \"answer_version\": true,\n    \"scores_editable\": true, \"answers_editable\": true,\n    \"linenotes\": true, \"gradercid\": true, \"has_notes\": true, \"has_nongrader_notes\": true,\n    \"repo\": true, \"repo_broken\": true, \"repo_unconfirmed\": true,\n    \"repo_too_open\": true, \"repo_handout_old\": true, \"repo_partner_error\": true,\n    \"repo_sharing\": true,\n    \"flagid\": true, \"conversation\": true, \"conversation_pfx\": true, \"at\": true\n};\n\nfunction pa_resetgrade() {\n    removeClass(this, \"pa-resetgrade\");\n    this.removeEventListener(this, pa_resetgrade, false);\n    if (!input_differs(this)) {\n        const gi = GradeSheet.closest(this),\n            gr = this.closest(\".pa-grade\");\n        queueMicrotask(function () { gi.update_at(gr); });\n    }\n}\n\nfunction title_span(ftext) {\n    const x = document.createElement(\"span\");\n    document.body.appendChild(x);\n    render_onto(x, \"f\", ftext);\n    x.remove();\n    return x;\n}\n\nexport class GradeEntry {\n    constructor(x) {\n        Object.assign(this, x);\n        this.type = this.type || \"numeric\";\n        this.gc = GradeClass.find(this.type);\n        this.disabled = !!this.disabled;\n        this.normal = true;\n        this._abbr = null;\n        this._all = null;\n        this.gc.initialize.call(this);\n    }\n\n    get type_tabular() {\n        return this.gc.type_tabular;\n    }\n\n    student_visible(gi) {\n        return this.visible === true\n            || (this.visible == null && (this.answer || gi.scores_visible));\n    }\n\n    get title_node() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t);\n        }\n        return t;\n    }\n\n    get title_html() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t).innerHTML;\n        }\n        return escape_entities(t);\n    }\n\n    get title_text() {\n        let t = this.title, ch;\n        if (!t) {\n            return this.key;\n        } else if (t.charCodeAt(0) === 60 /* \"<\" */\n                   && (ch = t.charCodeAt(1)) >= 48\n                   && ch <= 57) {\n            return title_span(t).textContext;\n        }\n        return t;\n    }\n\n    abbr() {\n        this._abbr || this.compute_abbr();\n        return this._abbr;\n    }\n\n    compute_abbr() {\n        const order = this._all ? this._all.order : [this.key],\n            value_order = this._all ? this._all.value_order : [this.key],\n            entries = this._all ? this._all.entries : {[this.key]: this};\n        let pabbr = {}, grade_titles = [];\n\n        for (let i = 0; i !== order.length; ++i) {\n            entries[order[i]]._abbr = \":\" + i;\n        }\n        for (let i = 0; i !== value_order.length; ++i) {\n            const k = value_order[i], ge = entries[k], t = ge.title_text;\n            grade_titles.push(t);\n            let m = t.match(/^(p)(?:art[\\s\\d]|(?=\\d))([-.a-z\\d]+)(?:[\\s:]+|$)/i)\n                || t.match(/^(q)(?:uestion[\\s\\d]|(?=\\d))([-.a-z\\d]+)(?:[\\s:]+|$)/i)\n                || t.match(/^[\\s:]*()(\\S{1,3}[\\d.]*)[^\\s\\d]*[\\s:]*/);\n            if (m) {\n                let abbr = m[1] + m[2],\n                    rest = t.substring(m[0].length),\n                    abbrx;\n                while ((abbrx = pabbr[abbr])) {\n                    if (abbrx !== true\n                        && (m = abbrx[1].match(/^(\\S{1,3}[\\d.]*)\\S*[\\s:]*(.*)$/))) {\n                        abbrx[0]._abbr += m[1];\n                        pabbr[abbrx[0]._abbr] = [abbrx[0], m[2]];\n                        pabbr[abbr] = abbrx = true;\n                    }\n                    if ((m = rest.match(/^(\\S{1,3}[\\d.]*)[^\\s\\d]*[\\s:]*(.*)$/))) {\n                        abbr += m[1];\n                        rest = m[2];\n                    } else {\n                        if (abbrx !== true) {\n                            abbr += \":\" + i;\n                        }\n                        break;\n                    }\n                }\n                ge._abbr = abbr;\n                pabbr[abbr] = [ge, rest];\n            }\n        }\n    }\n\n    want_sidebar() {\n        return !this.answer && this.gc.want_sidebar;\n    }\n\n    render(gi, mode) {\n        if (mode == null) {\n            mode = !this.readonly\n                && (this.answer ? gi.answers_editable : gi.scores_editable) ? 2 : 0;\n        }\n        const id = \"pe-ge\" + ++id_counter,\n            pge = document.createElement(\"div\"),\n            le = document.createElement(\"label\"),\n            pde = document.createElement(mode === 2 ? \"form\" : \"div\"),\n            hidden = this.student_visible(gi) ? \"\" : \" pa-p-hidden\";\n        pge.className = \"pa-grade pa-p\".concat(mode ? \" e\" : \"\", this.answer ? \" pa-ans\" : \"\", hidden);\n        pge.setAttribute(\"data-pa-grade\", this.key);\n        le.className = \"pa-pt\";\n        le.htmlFor = id;\n        le.innerHTML = this.title_html;\n        pge.appendChild(le);\n        if (this.description) {\n            const de = document.createElement(\"div\");\n            de.className = \"pa-pdesc pa-dr\";\n            render_onto(de, \"f\", this.description);\n            pge.appendChild(de);\n        }\n        if (mode === 2) {\n            pde.className = \"ui-submit pa-pv\" + (this.description ? \" pa-textv\" : \"\");\n        } else {\n            pde.className = \"pa-pv\";\n        }\n        pge.appendChild(pde);\n        this.mount_at(pde, id, mode);\n        return pge;\n    }\n\n    mount_at(pde, id, edit) {\n        let t;\n        if (edit) {\n            t = this.gc.mount_edit.call(this, pde, id);\n        } else {\n            t = this.gc.mount_show.call(this, pde, id);\n        }\n        if (typeof t === \"string\") {\n            pde.innerHTML = t;\n        } else if (t) {\n            pde.replaceChildren(t);\n        }\n        if (edit) {\n            $(pde).find(\".need-autogrow\").autogrow();\n        }\n    }\n\n    update_edit(pde, v, opts) {\n        const ve = pde.querySelector(\".pa-gradevalue\"),\n            vt = this.simple_text(v);\n\n        // grade is above max message\n        if (this.max) {\n            const has_max = pde.nextSibling && pde.nextSibling.classList.contains(\"pa-gradeabovemax\");\n            if (!v || v <= this.max) {\n                has_max && pde.parentElement.removeChild(pde.nextSibling);\n            } else if (!has_max) {\n                const e = document.createElement(\"div\");\n                e.classList = \"pa-pvnote pa-gradeabovemax\";\n                e.textContent = \"Grade is above max\";\n                pde.parentElement.insertBefore(e, pde.nextSibling);\n            }\n        }\n\n        // autograde differs message\n        let gd = pde.querySelector(\".pa-gradediffers\");\n        if (opts.autograde == null || v === opts.autograde) {\n            gd && gd.remove();\n        } else {\n            const txt = (this.key === \"late_hours\" ? \"auto-late hours\" : \"autograde\") +\n                \" is \" + this.text(opts.autograde);\n            if (!gd) {\n                pde.appendChild((gd = $e(\"span\", \"pa-gradediffers\")));\n            }\n            if (gd.textContent !== txt) {\n                gd.textContent = txt;\n            }\n        }\n\n        // do not update if user has edited\n        if (hasClass(pde, \"pa-dirty\")) {\n            return;\n        }\n\n        // update on blur if element is focused\n        if (ve && ve.type !== \"hidden\" && ve.matches(\":focus\")) {\n            if (!hasClass(ve, \"pa-resetgrade\")\n                && vt !== input_default_value(ve)) {\n                addClass(ve, \"pa-resetgrade\");\n                ve.addEventListener(\"blur\", pa_resetgrade, false);\n            }\n            return;\n        }\n\n        // grade value: update value if reset or fresh;\n        // update default value always\n        const fresh = ve && hasClass(ve, \"pa-fresh\"),\n            reset = opts.reset || fresh;\n        if (reset || !ve) {\n            const hidden = this.gc.update_edit.call(this, pde, v, opts);\n            if (hidden != null) {\n                const clg = pde.closest(\".pa-grade\");\n                toggleClass(clg, this.description ? \"pa-hidden-description\" : \"hidden\", hidden);\n            }\n        }\n        if (ve) {\n            input_set_default_value(ve, vt);\n        }\n\n        // landmark\n        if (this.landmark) {\n            this.update_landmark(pde);\n        }\n\n        // UI: sidebar tabbing, autogrow\n        if (ve && opts.sidebar) {\n            ve.tabIndex = -1;\n        }\n        if (fresh) {\n            removeClass(ve, \"pa-fresh\");\n        }\n        $(pde).find(\"input, textarea\").autogrow();\n    }\n\n    update_show(pde, v, opts) {\n        const ve = pde.classList.contains(\"pa-gradevalue\")\n            ? pde\n            : pde.querySelector(\".pa-gradevalue\");\n        let hidden;\n        if (this.gc.update_show) {\n            hidden = this.gc.update_show.call(this, ve, v, opts);\n        } else {\n            let gt = this.text(v);\n            hidden = gt === \"\" && (!this.max || this.required) && /*???*/ !this.answer;\n            if (!hidden) {\n                if (gt === \"\") {\n                    gt = \"\";\n                }\n                if (ve.textContent !== gt) {\n                    ve.textContent = gt;\n                }\n            }\n        }\n        if (hidden != null) {\n            const clg = pde.closest(\".pa-grade\");\n            toggleClass(clg, this.description ? \"pa-hidden-description\" : \"hidden\", hidden);\n        }\n        this.landmark && this.update_landmark(pde);\n    }\n\n    update_at(elt, v, opts) {\n        let pde = elt.firstChild;\n        while (!hasClass(pde, \"pa-pv\")) {\n            pde = pde.nextSibling;\n        }\n        if (hasClass(elt, \"e\")) {\n            this.update_edit(pde, v, opts);\n        } else {\n            this.update_show(pde, v, opts);\n        }\n    }\n\n    update_landmark(pde) {\n        const gl = pde.closest(\".pa-gradelist\");\n        if (!gl || !hasClass(gl, \"want-landmark-links\")) {\n            return;\n        }\n        let pgbr = pde.querySelector(\".pa-gradeboxref\");\n        if (this.landmark ? pgbr && pgbr.getAttribute(\"data-landmark\") === this.landmark : !pgbr) {\n            return;\n        }\n        const m = /^(.*):(\\d+)$/.exec(this.landmark);\n        if (m && Filediff.by_file(m[1])) {\n            const pi = pde.closest(\".pa-psetinfo\"),\n                directory = pi.getAttribute(\"data-pa-directory\") || \"\",\n                filename = m[1].startsWith(directory) ? m[1].substring(directory.length) : m[1];\n            pgbr || pde.append((pgbr = $e(\"span\", \"pa-gradeboxref\")));\n            pgbr.setAttribute(\"data-landmark\", this.landmark);\n            pgbr.replaceChildren(\"@\", $e(\"a\", {href: \"#La\".concat(m[2], \"F\", html_id_encode(m[1]))}, filename + \":\" + m[2]));\n        } else {\n            pgbr && pgbr.remove();\n        }\n    }\n\n    unmount_at(elt) {\n        this.gc.unmount.call(this, elt);\n    }\n\n    text(v) {\n        return this.gc.text.call(this, v);\n    }\n\n    simple_text(v) {\n        return this.gc.simple_text.call(this, v);\n    }\n\n    configure_column(col) {\n        return this.gc.configure_column.call(this, col);\n    }\n\n    tcell_width() {\n        const w = this.gc.tcell_width || 3;\n        return typeof w === \"function\" ? w.call(this) : w;\n    }\n\n    tcell(v) {\n        return this.gc.tcell.call(this, v);\n    }\n\n    landmark_lines(t, selector) {\n        const m = (this.landmark_range ? /:(\\d+):(\\d+)$/.exec(this.landmark_range) : null);\n        if (!m) {\n            throw new Error(\"bad landmark_lines\");\n        }\n        const lo = +m[1];\n        let fd = t instanceof Linediff ? t.element : t, lm;\n        while (!hasClass(fd, \"pa-filediff\")\n               && (!(lm = fd.getAttribute(\"data-pa-landmark\"))\n                   || lm.charAt(0) !== \"a\"\n                   || parseInt(lm.substring(1)) > lo)) {\n            fd = fd.parentElement;\n        }\n        return Linediff.range(fd, +m[1], +m[2], selector);\n    }\n\n    landmark_grade(t) {\n        let sum = null;\n\n        for (let ln of this.landmark_lines(t, \".pa-gw\")) {\n            const note = Note.at(ln.element);\n            let m, gch;\n            if (note.text\n                && ((m = /^[\\s]*(\\+)(\\d+(?:\\.\\d+)?|\\.\\d+)((?![.,]\\w|[\\w%$*])\\S*?)[.,;:]?(?:\\s|$)/.exec(note.text))\n                    || (m = /^[\\s]*()(\\d+(?:\\.\\d+)?|\\.\\d+)(\\/[\\d.]+(?![.,]\\w|[\\w%$*/])\\S*?)[.,;:]?(?:\\s|$)/.exec(note.text)))) {\n                if (sum === null) {\n                    sum = 0.0;\n                }\n                sum += parseFloat(m[2]);\n                gch = escape_entities(this.title_text).concat(\": \", escape_entities(m[1]), \"<b>\", escape_entities(m[2]), \"</b>\", escape_entities(m[3]));\n            }\n            let $nd = $(ln.element).find(\".pa-note-gradecontrib\");\n            if (!$nd.length && gch) {\n                $nd = $($e(\"div\", \"pa-note-gradecontrib\")).insertBefore($(ln.element).find(\".pa-note\"));\n            }\n            gch ? $nd.html(gch) : $nd.remove();\n        }\n\n        if (this.round && sum != null) {\n            if (this.round === \"up\") {\n                sum = Math.ceil(sum);\n            } else if (this.round === \"down\") {\n                sum = Math.floor(sum);\n            } else {\n                sum = Math.round(sum);\n            }\n        }\n\n        const gh = t.closest(\".pa-grade\") || t.closest(\".pa-grade-range-block\");\n        let gnv = gh.querySelector(\".pa-notes-grade\");\n        if (sum === null) {\n            gnv.remove();\n        } else {\n            if (!gnv) {\n                const gs = hasClass(gh, \"pa-grade\") ? gh : gh.querySelector(\".pa-grade\");\n                let e = gs.firstChild;\n                while (e && !hasClass(e, \"pa-pv\")) {\n                    e = e.nextSibling;\n                }\n                e = e.firstChild;\n                while (e && (e.nodeType !== 1 || hasClass(e, \"pa-gradewidth\") || hasClass(e, \"pa-gradedesc\"))) {\n                    e = e.nextSibling;\n                }\n                gnv = $e(\"button\", {type: \"button\", \"class\": \"link uic uikd pa-notes-grade\"});\n                this.lastChild.insertBefore(gnv, e);\n            }\n            gnv.textContent = \"Notes grade \" + sum;\n        }\n\n        return sum;\n    }\n\n    save_landmark_grade(t) {\n        const sum = this.landmark_grade(t);\n\n        const gv = t.querySelector(\".pa-gradevalue\");\n        if (gv) {\n            const sumstr = sum === null ? \"\" : \"\" + sum,\n                gval = $(gv).val();\n            if (gval == gv.getAttribute(\"data-pa-notes-grade\")\n                && sumstr != gval) {\n                $(gv).val(sumstr).change();\n            }\n            gv.setAttribute(\"data-pa-notes-grade\", sumstr);\n        }\n\n        return sum;\n    }\n\n    value_order_in(gi) {\n        const i = gi.vpos[this.key];\n        return i != null ? i : null;\n    }\n\n    value_in(gi) {\n        const i = gi.grades ? gi.vpos[this.key] : null;\n        return i != null ? gi.grades[i] : null;\n    }\n\n    autovalue_in(gi) {\n        const i = gi.autogrades ? gi.vpos[this.key] : null;\n        return i != null ? gi.autogrades[i] : null;\n    }\n\n    has_later_value_in(gi) {\n        return this.answer\n            && gi.grades_latest\n            && this.key in gi.grades_latest\n            && this.value_in(gi) !== gi.grades_latest[this.key];\n    }\n\n    static closest(elt) {\n        const e = elt.closest(\".pa-grade\"),\n            gi = GradeSheet.closest(e);\n        return gi.entries[e.getAttribute(\"data-pa-grade\")];\n    }\n\n    static late_hours() {\n        late_hours_entry = late_hours_entry || new LateHoursEntry;\n        return late_hours_entry;\n    }\n}\n\nclass LateHoursEntry extends GradeEntry {\n    constructor() {\n        super({key: \"late_hours\", title: \"late hours\"});\n        this.normal = false;\n    }\n    value_in(gi) {\n        return gi.late_hours;\n    }\n    autovalue_in(gi) {\n        return gi.auto_late_hours;\n    }\n}\n\nexport class GradeSheet {\n    constructor(x) {\n        this.entries = {};\n        this.parent = null;\n        this.root = this;\n        if (x) {\n            this.assign(x);\n        }\n    }\n\n    make_child() {\n        const gi = new GradeSheet;\n        Object.assign(gi, this);\n        gi.parent = gi.root = this;\n        return gi;\n    }\n\n    set_entry(ge) {\n        if (this.entries !== this.root.entries) { throw new Error(\"!\"); }\n        this.entries[ge.key] = ge;\n        ge._all = this.root;\n    }\n\n    assign(x) {\n        const old_value_order = this.value_order;\n        if (x.entries) {\n            for (let i in x.entries) {\n                this.set_entry(new GradeEntry(x.entries[i]));\n            }\n        }\n        if (x.order) {\n            this.order = x.order;\n        }\n        if (x.fixed_value_order && !this.parent) {\n            this.fixed_value_order = x.fixed_value_order;\n        }\n        this.value_order = this.fixed_value_order || this.order;\n        if (this.value_order !== old_value_order) {\n            this.vpos = {};\n            for (let i = 0; i !== this.value_order.length; ++i) {\n                this.vpos[this.value_order[i]] = i;\n            }\n            if (old_value_order) {\n                this.grades = this.autogrades = null;\n            }\n        }\n        if (x.grades) {\n            this.grades = this.merge_grades(this.grades, x.grades, x);\n        }\n        if (x.autogrades) {\n            this.autogrades = this.merge_grades(this.autogrades, x.autogrades, x);\n        }\n        if (\"scores_visible\" in x) {\n            if (this.parent) {\n                if ((this.scores_visible_pinned = x.scores_visible != null)) {\n                    this.scores_visible = x.scores_visible;\n                } else {\n                    this.scores_visible = this.parent.scores_visible;\n                }\n            } else {\n                this.scores_visible = x.scores_visible;\n            }\n        }\n        for (let k in x) {\n            if (gradesheet_props[k])\n                this[k] = x[k];\n        }\n        return this;\n    }\n\n    merge_grades(myg, ing, x) {\n        let inorder = x.fixed_value_order || x.order || this.value_order;\n        if (!myg && inorder === this.value_order) {\n            return ing;\n        } else {\n            myg = myg || [];\n            for (let i in inorder) {\n                const j = this.vpos[inorder[i]];\n                if (j != null) {\n                    while (myg.length <= j) {\n                        myg.push(null);\n                    }\n                    myg[j] = ing[i];\n                }\n            }\n            return myg;\n        }\n    }\n\n    xentry(key) {\n        const ge = this.entries[key];\n        if (ge) {\n            return ge;\n        } else if (key === \"late_hours\") {\n            return GradeEntry.late_hours();\n        }\n        return null;\n    }\n\n    *value_entries() {\n        for (const key of this.value_order) {\n            yield this.entries[key];\n        }\n    }\n\n    remount_at(elt, mode) {\n        const ge = this.xentry(elt.getAttribute(\"data-pa-grade\"));\n        if (ge) {\n            let pde = elt.firstChild, id;\n            while (!hasClass(pde, \"pa-pv\")) {\n                pde.tagName === \"LABEL\" && (id = pde.htmlFor);\n                pde = pde.nextSibling;\n            }\n            while (pde.nextSibling) {\n                elt.removeChild(pde.nextSibling);\n            }\n            if (typeof mode === \"boolean\") {\n                mode = mode ? 2 : 0;\n            }\n            const pdx = document.createElement(mode === 2 ? \"form\" : \"div\");\n            if (mode === 2) {\n                pdx.className = \"ui-submit pa-pv\" + (this.description ? \" pa-textv\" : \"\");\n            } else {\n                pdx.className = \"pa-pv\";\n            }\n            toggleClass(elt, \"e\", mode !== 0);\n            elt.replaceChild(pdx, pde);\n            mode === 2 && removeClass(elt, \"hidden\");\n            ge.mount_at(pdx, id, mode !== 0);\n            $(pde).find(\"input, textarea\").unautogrow();\n        }\n    }\n\n    update_at(elt, opts) {\n        const ge = this.xentry(elt.getAttribute(\"data-pa-grade\"));\n        // find value to assign\n        let gval = ge.value_in(this);\n        if (ge.has_later_value_in(this)) {\n            const label = elt.firstChild;\n            if (label.classList.contains(\"pa-grade-latest\")) {\n                gval = this.grades_latest[ge.key];\n            } else if (!label.classList.contains(\"uic\")) {\n                label.classList.add(\"pa-grade-earlier\", \"uic\", \"need-tooltip\");\n                label.setAttribute(\"aria-label\", \"Toggle latest version\");\n            }\n        }\n        // perform update\n        const xopts = {gradesheet: this, autograde: ge.autovalue_in(this)};\n        if (opts) {\n            Object.assign(xopts, opts);\n        }\n        ge.update_at(elt, gval, xopts);\n    }\n\n    grade_total(noextra) {\n        let total = null;\n        for (let i = 0; i !== this.value_order.length; ++i) {\n            const ge = this.entries[this.value_order[i]];\n            if (ge && ge.in_total && (!noextra || !ge.is_extra)) {\n                const gv = this.grades && this.grades[i];\n                if (gv != null) {\n                    total = (total || 0) + gv;\n                }\n            }\n        }\n        return total !== null ? Math.round(total * 1000) / 1000 : null;\n    }\n\n    grade_maxtotal() {\n        let maxtotal = null;\n        for (let i = 0; i !== this.value_order.length; ++i) {\n            const ge = this.entries[this.value_order[i]];\n            if (ge && ge.in_total && !ge.is_extra && ge.max\n                && (!ge.required\n                    || this.scores_editable\n                    || (this.grades && this.grades[i] !== null))) {\n                maxtotal = (maxtotal || 0) + ge.max;\n            }\n        }\n        return maxtotal !== null ? Math.round(maxtotal * 1000) / 1000 : null;\n    }\n\n    file_anchor(file) {\n        if (hasClass(document.body, \"pa-multiuser\")) {\n            return \"U\".concat(html_id_encode(this.user), \"/F\", html_id_encode(file));\n        } else {\n            return \"F\" + html_id_encode(file);\n        }\n    }\n\n    get has_sections() {\n        for (let i = 0; i !== this.order.length; ++i) {\n            const ge = this.entries[this.order[i]];\n            if (ge.type === \"section\") {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    has(f) {\n        for (let i = 0; i !== this.value_order.length; ++i) {\n            const gei = this.entries[this.value_order[i]];\n            if (f(gei, this))\n                return true;\n        }\n        return false;\n    }\n\n    section_has(ge, f) {\n        let start = this.vpos[ge.key];\n        while (start != null && start < this.value_order.length) {\n            const gei = this.entries[this.value_order[start]];\n            if (gei !== ge && gei.type === \"section\") {\n                break;\n            } else if (f(gei, this)) {\n                return true;\n            }\n            ++start;\n        }\n        return false;\n    }\n\n    section_wants_sidebar(ge) {\n        let answer = 0;\n        return this.scores_editable && this.section_has(ge, gei => {\n            answer |= gei.answer ? 1 : 2;\n            return answer === 3;\n        });\n    }\n\n    add_linenotes(linenotes) {\n        this.linenotes = this.linenotes || {};\n        for (const [k, v] of Object.entries(linenotes || {})) {\n            this.linenotes[k] = this.linenotes[k] || {};\n            Object.assign(this.linenotes[k], v);\n        }\n    }\n\n    show_text_as_diff(ve, v, fileid) {\n        addClass(ve, \"bg-none\");\n        addClass(ve, \"align-self-start\");\n        let div = ve.firstChild;\n        if (!div) {\n            div = document.createElement(\"div\");\n            div.className = \"pa-filediff\";\n            div.id = this.file_anchor(fileid);\n            ve.appendChild(div);\n        }\n        if (div.tagName !== \"DIV\" || div.nextSibling || !hasClass(div, \"pa-filediff\")) {\n            throw new Error(\"bad ve.firstChild in GradeSheet.show_text_as_diff\");\n        }\n        div.className = \"pa-filediff pa-dg pa-hide-left pa-hide-landmarks uim\" + (this.scores_editable ? \" pa-editablenotes live\" : \"\") + (this.scores_visible ? \"\" : \" pa-scores-hidden\");\n\n        // apply new lines\n        // All lines in Markdown answers are `.pa-gi` insertions. There are no\n        // `.pa-gc` context lines or `.pa-gd` deletions. This loop removes\n        // possible Markdown translations (`.pa-dlr`), but preserves linenotes\n        // (`.pa-gw`).\n        let pos1 = 0, lineno = 1, dl = div.firstChild;\n        while (pos1 !== v.length) {\n            let pos2 = v.indexOf(\"\\n\", pos1);\n            pos2 = pos2 < 0 ? v.length : pos2 + 1;\n            const str = v.substring(pos1, pos2);\n            // find next textual line\n            while (dl && (!hasClass(dl, \"pa-gi\") || hasClass(dl, \"pa-dlr\"))) {\n                const ndl = dl.nextSibling;\n                if (!hasClass(dl, \"pa-gw\")) {\n                    dl.remove();\n                }\n                dl = ndl;\n            }\n            // insert line or replace its contents\n            if (!dl) {\n                dl = document.createElement(\"div\");\n                dl.className = \"pa-dl pa-gi\";\n                const da = document.createElement(\"div\"),\n                    db = document.createElement(\"div\"),\n                    dd = document.createElement(\"div\");\n                da.className = \"pa-da\";\n                da.hidden = true;\n                db.className = \"pa-db\";\n                db.hidden = true;\n                db.setAttribute(\"data-landmark\", lineno);\n                dd.className = \"pa-dd pa-dhlm\";\n                dl.append(da, db, dd);\n                div.append(dl);\n            } else if (dl.firstChild.nextSibling.getAttribute(\"data-landmark\") != lineno) {\n                throw new Error(`bad data-landmark in gc-markdown, ${dl.firstChild.nextSibling.getAttribute(\"data-landmark\")} vs. ${lineno}`);\n            }\n            dl.lastChild.textContent = str;\n            dl = dl.nextSibling;\n            ++lineno;\n            pos1 = pos2;\n        }\n\n        // remove old lines\n        while (dl) {\n            const ndl = dl.nextSibling;\n            if (!hasClass(dl, \"pa-gw\")) {\n                dl.remove();\n            }\n            dl = ndl;\n        }\n\n        // apply markdown\n        const fd = new Filediff(div);\n        if (hasClass(ve.parentElement, \"pa-markdown\")) {\n            fd.markdown();\n        }\n        let lns;\n        if (this.linenotes\n            && (lns = this.linenotes[fileid])) {\n            for (let lineid in lns) {\n                const ln = lns[lineid];\n                fd.line(lineid).then(line => {\n                    Note.near(line).assign(ln).render(false);\n                });\n            }\n        }\n    }\n\n    static store(element, x) {\n        if (!hasClass(element, \"pa-psetinfo\")) {\n            throw new Error(\"bad GradeSheet.store\");\n        }\n        const gi = GradeSheet.closest(element);\n        gi.assign(x);\n        window.$pa.loadgrades.call(element);\n    }\n\n    static closest(element) {\n        element = element.closest(\".pa-psetinfo\");\n        if (!element) {\n            return null;\n        }\n        if (element.pa__gradesheet) {\n            return element.pa__gradesheet;\n        }\n        let gi;\n        if (hasClass(element, \"pa-psetinfo-partial\")\n            && (gi = GradeSheet.closest(element.parentElement))) {\n            gi = gi.make_child();\n        }\n        gi = gi || new GradeSheet;\n        if (element.hasAttribute(\"data-pa-gradeinfo\")) {\n            try {\n                let x = JSON.parse(element.getAttribute(\"data-pa-gradeinfo\") || \"{}\");\n                gi.assign(x);\n            } catch {\n            }\n        }\n        Object.defineProperty(element, \"pa__gradesheet\", {\n            value: gi, configurable: true, writable: true\n        });\n        return gi;\n    }\n}\n","// note-edit.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { escape_entities, regexp_quote } from \"./encoders.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { hasClass, addClass, removeClass, handle_ui } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { Linediff } from \"./diff.js\";\nimport { Note } from \"./note.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { ftext, render_onto } from \"./render.js\";\nimport { tooltip } from \"./tooltip.js\";\n\n\nlet curline, curgrade, down_event, scrolled_x, scrolled_y, scrolled_at;\n\nfunction locate(e) {\n    while (e && e.tagName !== \"TEXTAREA\" && e.tagName !== \"A\") {\n        if (hasClass(e, \"pa-dl\")) {\n            for (let ln of Linediff.all(e)) {\n                if (ln.is_note()) {\n                    return ln;\n                } else if (ln.element !== e && ln.is_visible() && !ln.is_annotation()) {\n                    break;\n                }\n            }\n            return new Linediff(e);\n        }\n        e = e.parentElement;\n    }\n    return null;\n}\n\nfunction render_form($tr, note, transition) {\n    $tr[0].hidden = false;\n    $tr.addClass(\"editing\");\n    var $td = $tr.find(\".pa-notebox\");\n    if (transition) {\n        $tr.css(\"display\", \"\").children().css(\"display\", \"\");\n        var $content = $td.children();\n        $content.slideUp(80).queue(function () { $content.remove(); });\n    }\n\n    let gi = GradeSheet.closest(curline.element),\n        format = note ? note.format : null;\n    if (format == null) {\n        format = document.body.getAttribute(\"data-default-format\");\n    }\n    let t = '<form method=\"post\" action=\"'.concat(\n        escape_entities(hoturl(\"=api/linenote\", {psetinfo: gi.element, file: curline.file, line: curline.note_lineid, oldversion: (note && note.version) || 0, format: format})),\n        '\" enctype=\"multipart/form-data\" accept-charset=\"UTF-8\" class=\"ui-submit pa-noteform\">',\n        '<textarea class=\"pa-note-entry need-autogrow\" name=\"note\"></textarea>',\n        '<div class=\"aab aabr pa-note-aa justify-content-between\">',\n        '<div class=\"aabutr order-100\"><button class=\"btn-primary\" type=\"submit\">Save comment</button></div>',\n        '<div class=\"aabutr order-99\"><button type=\"button\" name=\"cancel\">Cancel</button></div>',\n        '<div class=\"aabut\"><button type=\"button\" class=\"btn ui pa-load-note-suggestions\"></button></div>');\n    if (!gi.scores_visible) {\n        t += '<div class=\"aabut\"><label class=\"checki\"><input type=\"checkbox\" name=\"iscomment\" value=\"1\" class=\"checkc\">Show immediately</label></div>';\n    }\n    t += '<div class=\"aabut flex-grow-1\"></div>';\n    var $form = $(t + '</div></form>').appendTo($td);\n\n    var $ta = $form.find(\"textarea\");\n    if (note && note.ftext !== null) {\n        const text = note.editable_text;\n        $ta.text(text);\n        $ta[0].setSelectionRange && $ta[0].setSelectionRange(text.length, text.length);\n    }\n    $ta.autogrow().keydown(textarea_keydown);\n    $form.find(\"input[name=iscomment]\").prop(\"checked\", !!(note && note.iscomment));\n    $form.find(\"button[name=cancel]\").click(cancel);\n    $form.on(\"submit\", function () {\n        pa_save_my_note(this.closest(\".pa-dl\"));\n    });\n    if (transition) {\n        $ta.focus();\n        $form.hide().slideDown(100);\n    }\n}\n\nfunction set_scrolled_at(evt) {\n    if (evt && evt.screenX != null) {\n        scrolled_at = evt.timeStamp;\n        scrolled_x = evt.screenX;\n        scrolled_y = evt.screenY;\n    }\n}\n\nfunction arrowcapture(evt) {\n    if ((evt.type === \"mousemove\"\n         && scrolled_at\n         && (evt.timeStamp - scrolled_at <= 500\n             || (Math.abs(evt.screenX - scrolled_x) <= 1\n                 && Math.abs(evt.screenY - scrolled_y) <= 1)))\n        || ((evt.type === \"keydown\" || evt.type === \"keyup\")\n            && event_key.is_modifier(evt))) {\n        return;\n    }\n\n    if (evt.type !== \"keydown\") {\n        uncapture();\n        return;\n    }\n\n    const key = event_key(evt), modkey = event_key.modcode(evt);\n    if ((key === \"ArrowUp\" || key === \"ArrowDown\") && !modkey) {\n        arrowcapture_arrow(evt, key);\n    } else if (key === \"Enter\" && (!modkey || modkey === event_key.META)) {\n        arrowcapture_enter(evt);\n    } else if (!curgrade) {\n        uncapture();\n    }\n}\n\nfunction arrowcapture_focusat(what, evt) {\n    if (what.nodeName === \"PA-LINEDIFF\") {\n        curline = what;\n        curgrade = null;\n        what = what.element;\n        addClass(what, \"live\");\n        what.tabIndex = 0;\n    } else {\n        curline = null;\n        curgrade = what;\n        requestAnimationFrame(() => what.select());\n    }\n    what.focus();\n    const wf = what.closest(\".pa-with-fixed\");\n    $(wf).scrollIntoView(wf ? {marginTop: wf.firstChild.offsetHeight} : null);\n    evt.preventDefault();\n}\n\nfunction arrowcapture_arrow(evt, key) {\n    let ln = curline && curline.visible_source();\n    if (ln || curgrade) {\n        let start = curgrade || ln.element;\n        if (ln) {\n            removeClass(ln.element, \"live\");\n            ln.element.tabIndex = -1;\n        }\n        ln = null;\n        const flags = Linediff.ANYFILE + (key === \"ArrowDown\" ? 0 : Linediff.BACKWARD) + Linediff.GRADES;\n        for (let lnx of Linediff.all(start, flags)) {\n            if (lnx.nodeName !== \"PA-LINEDIFF\") {\n                arrowcapture_focusat(lnx, evt);\n                return;\n            } else if (lnx.element !== start && lnx.is_visible() && lnx.is_source()) {\n                ln = lnx;\n                break;\n            }\n        }\n    }\n    if (ln) {\n        arrowcapture_focusat(ln, evt);\n    } else {\n        uncapture();\n    }\n}\n\nfunction arrowcapture_enter(evt) {\n    let ln = curline && curline.visible_source();\n    if (!ln) {\n        uncapture();\n        return;\n    }\n    curline = ln;\n    curgrade = null;\n    evt.preventDefault();\n    set_scrolled_at(evt);\n    make_linenote();\n}\n\nfunction capture(tr, keydown) {\n    if (!hasClass(tr, \"pa-gw\")) {\n        addClass(tr, \"live\");\n        tr.tabIndex = 0;\n        tr.focus();\n    }\n    $(\".pa-filediff\").removeClass(\"live\");\n    $(document).off(\".pa-linenote\");\n    $(document).on((keydown ? \"keydown.pa-linenote \" : \"\") + \"mousemove.pa-linenote mousedown.pa-linenote\", arrowcapture);\n}\n\nfunction uncapture() {\n    for (const tr of document.querySelectorAll(\".pa-dl.live\")) {\n        removeClass(tr, \"live\");\n        tr.tabIndex = -1;\n    }\n    $(\".pa-filediff\").addClass(\"live\");\n    $(document).off(\".pa-linenote\");\n}\n\nfunction unedit(note) {\n    const done = note.render(true),\n        ctr = curline && curline.visible_source();\n    ctr && capture(ctr.element, true);\n    return done;\n}\n\nfunction pa_save_my_note(elt) {\n    if (!hasClass(elt, \"pa-gw\")) {\n        throw new Error(\"bad `elt` in pa_save_my_note\");\n    } else if (!hasClass(elt, \"pa-outstanding\")) {\n        const f = $(elt).find(\"form\")[0],\n            text = f.elements.note.value,\n            iscomment = f.elements.iscomment && f.elements.iscomment.checked;\n        $(f).find(\".pa-save-message\").remove();\n        $(f).find(\".aab\").append('<div class=\"aabut pa-save-message\">Saving</div>');\n        Note.at(elt).save_text(text, iscomment).then(() => {\n            const ctr = curline ? curline.visible_source() : null;\n            ctr && capture(ctr.element, true);\n        });\n    }\n}\n\nfunction cancel() {\n    unedit(Note.closest(this).cancel_edit());\n    return true;\n}\n\nfunction textarea_keydown(evt) {\n    if (event_key(evt) === \"Escape\" && !event_key.modcode(evt) && unedit(Note.closest(this))) {\n        return false;\n    } else if (event_key(evt) === \"Enter\" && event_key.modcode(evt) === event_key.META) {\n        $(this).closest(\"form\").submit();\n        return false;\n    }\n    return true;\n}\n\nfunction nearby(dx, dy) {\n    return (dx * dx) + (dy * dy) < 144;\n}\n\nfunction pa_linenote(event) {\n    var dl = event.target.closest(\".pa-dl\");\n    if (event.button !== 0\n        || !dl\n        || hasClass(dl, \"pa-gx\")\n        || event.target.matches(\"button, a, textarea, input, label\")\n        || event.target.closest(\".pa-note-suggestions\")) {\n        return;\n    }\n    var line = locate(event.target),\n        t = new Date().getTime();\n    if (event.type === \"mousedown\" && line) {\n        if (curline\n            && curline.element === line.element\n            && down_event\n            && nearby(down_event[0] - event.clientX, down_event[1] - event.clientY)\n            && t - down_event[2] <= 500) {\n            // skip\n        } else {\n            curline = line;\n            curgrade = null;\n            down_event = [event.clientX, event.clientY, t, false];\n        }\n    } else if (event.type === \"mouseup\" && line) {\n        if (curline\n            && curline.element === line.element\n            && down_event\n            && nearby(down_event[0] - event.clientX, down_event[1] - event.clientY)\n            && !down_event[3]) {\n            curline = line;\n            curgrade = null;\n            down_event[3] = true;\n            make_linenote(event);\n        }\n    } else if (event.type === \"click\" && line) {\n        curline = line;\n        curgrade = null;\n        make_linenote(event);\n    } else {\n        curline = null;\n        curgrade = null;\n        down_event = null;\n    }\n}\n\nfunction make_linenote(event) {\n    const note = Note.near(curline), tr = note.force_element();\n    set_scrolled_at(event);\n    if (hasClass(tr, \"editing\")) {\n        if (unedit(note)) {\n            event && event.stopPropagation();\n            return true;\n        }\n        const $ta = $(tr).find(\"textarea\").focus();\n        $ta[0].setSelectionRange && $ta[0].setSelectionRange(0, $ta.val().length);\n        return false;\n    }\n    capture(curline.element, false);\n    render_form($(tr), note, true);\n    return false;\n}\n\nhandle_ui.on(\"pa-editablenotes\", pa_linenote);\n\n\nfunction my_note_feedback(ln) {\n    const uid = siteinfo.user.cid;\n    if (ln.like && ln.like.indexOf(uid) >= 0) {\n        return 1;\n    } else if (ln.dislike && ln.dislike.indexOf(uid) >= 0) {\n        return -1;\n    }\n    return 0;\n}\n\nfunction display_note_suggestions(form, ns) {\n    let suggctr = form.querySelector(\".pa-note-suggestions\"),\n        searchre;\n    if (!suggctr) {\n        const aa = form.querySelector(\".pa-note-aa\"),\n            search = document.createElement(\"input\");\n        search.type = \"search\";\n        search.className = \"uikd uii pa-search-suggestions mt-4 mb-3\";\n        search.placeholder = \"Search\";\n        suggctr = document.createElement(\"div\");\n        suggctr.className = \"pa-note-suggestions\";\n        aa.before(search, suggctr);\n    } else {\n        const search = form.querySelector(\".pa-search-suggestions\");\n        searchre = search_suggestions_re(search ? search.value : \"\");\n    }\n    const known = new Set;\n    for (let ch = suggctr.firstChild; ch; ch = ch.nextSibling) {\n        known.add(ch.getAttribute(\"data-content\"));\n    }\n    for (const n of ns) {\n        if (known.has(n.ftext)) {\n            continue;\n        }\n        const mf = my_note_feedback(n),\n            li = document.createElement(\"div\"),\n            gf = (n.like || []).length - (n.dislike || []).length;\n        li.className = \"pa-note-suggestion\".concat(mf < 0 || (mf === 0 && gf < 0) ? \" dim\" : \"\");\n        li.setAttribute(\"data-content\", n.ftext);\n        if (searchre && !searchre.test(n.ftext)) {\n            li.hidden = true;\n        }\n        suggctr.appendChild(li);\n        const bbox = document.createElement(\"div\"),\n            b1 = document.createElement(\"button\"),\n            b2 = document.createElement(\"button\"),\n            tx = document.createElement(\"div\");\n        bbox.className = \"btnbox small\";\n        bbox.append(b1, b2);\n        tx.className = \"flex-grow-1\";\n        li.append(bbox, tx);\n        b1.type = b2.type = \"button\";\n        b1.className = \"ui pa-use-suggestion like\".concat(mf > 0 ? \" taken\" : \"\");\n        b1.setAttribute(\"aria-label\", \"Use\");\n        b1.textContent = \"\";\n        b2.className = \"ui pa-use-suggestion dislike\".concat(mf < 0 ? \" taken\" : \"\");\n        b2.setAttribute(\"aria-label\", \"Downrank\");\n        b2.textContent = \"\";\n        render_onto(tx, \"f\", n.ftext);\n        tooltip.call(b1);\n        tooltip.call(b2);\n    }\n}\n\nfunction my_note_compare(a, b) {\n    if (a.status !== b.status) {\n        return a.status > b.status ? -1 : 1;\n    } else if (a.ftext.substring(0, 3) === b.ftext.substring(0, 3)) {\n        return a.ftext.localeCompare(b.ftext);\n    }\n    const af = ftext.parse(a.ftext), bf = ftext.parse(b.ftext);\n    return af.localeString(bf);\n}\n\nfunction note_suggestions(form, suggdata) {\n    display_note_suggestions(form, suggdata.notelist);\n    $(form).find(\".pa-load-note-suggestions\").prop(\"disabled\", !suggdata.more);\n}\n\nhandle_ui.on(\"pa-load-note-suggestions\", function () {\n    const form = this.closest(\"form\");\n    let suggdata = $(form).data(\"paNoteSuggestions\");\n    if (suggdata && !suggdata.more) {\n        note_suggestions(form, suggdata);\n        return;\n    }\n    const ld = Linediff.closest(this),\n        args = {file: ld.file, pset: ld.pset},\n        gi = GradeSheet.closest(this);\n    if (!gi || !gi.base_commit || gi.base_handout) {\n        args.linea = ld.linea;\n    } else if (gi.user && gi.commit) {\n        let x = ld.lineb;\n        if (x !== null) {\n            args.u = gi.user;\n            args.line = \"b\" + x;\n            args.commit = gi.commit;\n        }\n    }\n    if (!suggdata) {\n        args.neighborhood = 5;\n        args.my_neighborhood = 20;\n    } else if (suggdata.neighborhood >= 0 && suggdata.neighborhood <= 5) {\n        args.neighborhood = 20;\n        args.my_neighborhood = -1;\n    } else {\n        args.neighborhood = -1;\n    }\n    this.disabled = true;\n    $.ajax(hoturl(\"api/linenotesuggest\", args), {\n        success: function (data) {\n            if (!data.ok) {\n                return;\n            }\n            data.notelist = data.notelist || [];\n            for (const note of data.notelist) {\n                const mf = my_note_feedback(note),\n                    gf = (note.like || []).length - (note.dislike || []).length;\n                if (mf > 0 && gf > 1) {\n                    note.status = 3;\n                } else if (mf > 0) {\n                    note.status = 2;\n                } else if (mf === 0 && gf > 0) {\n                    note.status = 1;\n                } else if (mf === 0 && gf === 0) {\n                    note.status = 0;\n                } else if (mf === -1 && gf >= 0) {\n                    note.status = -1;\n                } else {\n                    note.status = -2;\n                }\n            }\n            data.notelist.sort(my_note_compare);\n            $(form).data(\"paNoteSuggestions\", data);\n            note_suggestions(form, data);\n        }\n    });\n});\n\nfunction linenotemark(context, mark) {\n    const ld = Linediff.closest(context);\n    $.ajax(hoturl(\"=api/linenotemark\", {file: ld.file, linea: ld.linea, mark: mark, pset: ld.pset}),\n        { data: { ftext: context.getAttribute(\"data-content\") }, method: \"POST\" });\n}\n\nhandle_ui.on(\"pa-use-suggestion\", function () {\n    const e = this.closest(\".pa-note-suggestion\"),\n        f = e.closest(\"form\");\n    if (this.classList.contains(\"like\")) {\n        linenotemark(e, \"like\");\n        f.elements.note.value = ftext.parse(e.getAttribute(\"data-content\"))[1];\n    } else {\n        linenotemark(e, \"dislike\");\n        e.remove();\n    }\n});\n\nfunction search_suggestions_re(value) {\n    let patterns = \"\";\n    for (const str of value.split(/\\s+/)) {\n        str !== \"\" && (patterns = patterns.concat(\"(?=.*\", regexp_quote(str), \")\"));\n    }\n    return patterns ? new RegExp(patterns, \"i\") : null;\n}\n\nhandle_ui.on(\"pa-search-suggestions\", function (event) {\n    if (event.type === \"input\") {\n        const el = this.nextSibling, regex = search_suggestions_re(this.value);\n        for (let ne = el.firstChild; ne; ne = ne.nextSibling) {\n            const hidden = regex && !regex.test(ne.getAttribute(\"data-content\"));\n            ne.hidden = !!hidden;\n        }\n    } else if (event.type === \"keydown\"\n               && !(event_key.modcode(event) & (event_key.SHIFT | event_key.ALT))\n               && event_key(event) === \"Enter\") {\n        event.preventDefault();\n    }\n});\n","// render-terminal.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass } from \"./ui.js\";\nimport { render_text } from \"./render.js\";\nimport { Filediff } from \"./diff.js\";\nimport { regexp_quote } from \"./encoders.js\";\n\n\nconst ansistyle_map = {\n    \"0\": false, \"1\": {b: true}, \"2\": {f: true}, \"3\": {i: true},\n    \"4\": {u: true}, \"5\": {bl: true}, \"7\": {rv: true}, \"8\": {x: true},\n    \"9\": {s: true}, \"21\": {du: true}, \"22\": {b: false, f: false},\n    \"23\": {i: false}, \"24\": {u: false}, \"25\": {bl: false}, \"27\": {rv: false},\n    \"28\": {x: false}, \"29\": {s: false}, \"30\": {fg: 0}, \"31\": {fg: 1},\n    \"32\": {fg: 2}, \"33\": {fg: 3}, \"34\": {fg: 4}, \"35\": {fg: 5},\n    \"36\": {fg: 6}, \"37\": {fg: 7}, \"38\": \"fg\", \"39\": {fg: false},\n    \"40\": {bg: 0}, \"41\": {bg: 1}, \"42\": {bg: 2}, \"43\": {bg: 3},\n    \"44\": {bg: 4}, \"45\": {bg: 5}, \"46\": {bg: 6}, \"47\": {bg: 7},\n    \"48\": \"bg\", \"49\": {bg: false}, \"90\": {fg: 8}, \"91\": {fg: 9},\n    \"92\": {fg: 10}, \"93\": {fg: 11}, \"94\": {fg: 12}, \"95\": {fg: 13},\n    \"96\": {fg: 14}, \"97\": {fg: 15},\n    \"100\": {bg: 8}, \"101\": {bg: 9}, \"102\": {bg: 10}, \"103\": {bg: 11},\n    \"104\": {bg: 12}, \"105\": {bg: 13}, \"106\": {bg: 14}, \"107\": {bg: 15}\n}, ansistyle_keymap = {\n    \"b\": 1, \"f\": 2, \"i\": 3, \"u\": 4, \"bl\": 5, \"rv\": 7, \"x\": 8, \"s\": 9,\n    \"du\": 21\n};\n\nfunction ansistyle_parse(dst, style) {\n    if (arguments.length === 1) {\n        style = dst;\n        dst = null;\n    }\n    if (!style || style === \"\\x1b[m\" || style === \"\\x1b[0m\") {\n        return null;\n    }\n    let a;\n    if (style.charAt(0) === \"\\x1b\") {\n        a = style.substring(2, style.length - 1).split(\";\");\n    } else {\n        a = style.split(\";\");\n    }\n    for (let i = 0; i < a.length; ++i) {\n        const cmp = ansistyle_map[parseInt(a[i])];\n        if (cmp === false) {\n            dst = null;\n        } else if (!cmp) {\n            /* do nothing */\n        } else if (typeof cmp === \"object\") {\n            for (let j in cmp) {\n                if (cmp[j] !== false) {\n                    dst = dst || {};\n                    dst[j] = cmp[j];\n                } else if (dst) {\n                    delete dst[j];\n                }\n            }\n        } else if (cmp === \"fg\" || cmp === \"bg\") {\n            let r, g, b;\n            dst = dst || {};\n            if (i + 4 < a.length && parseInt(a[i+1]) === 2) {\n                r = parseInt(a[i+2]);\n                g = parseInt(a[i+3]);\n                b = parseInt(a[i+4]);\n                if (r <= 255 && g <= 255 && b <= 255) {\n                    dst[cmp] = [r, g, b];\n                }\n                i += 4;\n            } else if (i + 2 < a.length && parseInt(a[i+1]) === 5) {\n                const c = parseInt(a[i+2]);\n                if (c <= 15) {\n                    dst[cmp] = c;\n                } else if (c <= 0xe7) {\n                    b = (c - 16) % 6;\n                    g = ((c - 16 - b) / 6) % 6;\n                    r = (c - 16 - b - 6 * g) / 36;\n                    dst[cmp] = [r * 51, g * 51, b * 51];\n                } else if (c <= 255) {\n                    b = Math.round((c - 0xe8) * 255 / 23);\n                    dst[cmp] = [b, b, b];\n                }\n                i += 2;\n            }\n        }\n    }\n    return dst && $.isEmptyObject(dst) ? null : dst;\n}\n\nfunction ansistyle_unparse(dst) {\n    if (!dst) {\n        return \"\\x1b[m\";\n    }\n    const a = [];\n    for (let key in ansistyle_keymap) {\n        if (dst[key])\n            a.push(ansistyle_keymap[key]);\n    }\n    if (dst.fg) {\n        if (typeof dst.fg === \"number\") {\n            a.push(dst.fg < 8 ? 30 + dst.fg : 90 + dst.fg - 8);\n        } else {\n            a.push(38, 2, dst.fg[0], dst.fg[1], dst.fg[2]);\n        }\n    }\n    if (dst.bg) {\n        if (typeof dst.bg === \"number\") {\n            a.push(dst.bg < 8 ? 40 + dst.bg : 100 + dst.bg - 8);\n        } else {\n            a.push(48, 2, dst.bg[0], dst.bg[1], dst.bg[2]);\n        }\n    }\n    return \"\\x1b[\" + a.join(\";\") + \"m\";\n}\n\nfunction ansistyle_combine(a1, a2) {\n    if (/^\\x1b\\[[\\d;]*m$/.test(a2)) {\n        return ansistyle_unparse(ansistyle_parse(ansistyle_parse(null, a1), a2));\n    } else {\n        return a1;\n    }\n}\n\nfunction ansistyle_hexcolor(r, g, b) {\n    return \"#\".concat(r < 16 ? 0 : \"\", r.toString(16), g < 16 ? 0 : \"\", g.toString(16), b < 16 ? 0 : \"\", b.toString(16));\n}\n\nfunction ansistyle_render(text, style) {\n    if (typeof text === \"string\") {\n        text = document.createTextNode(text);\n    } else if (text instanceof jQuery) {\n        text = text[0];\n    }\n    if (!style || style === \"\\x1b[m\"\n        || (typeof style === \"string\" && !(style = ansistyle_parse(style)))) {\n        return text;\n    }\n    const node = document.createElement(\"span\");\n    for (let key in ansistyle_keymap) {\n        if (style[key])\n            node.classList.add(\"ansi\" + key);\n    }\n    if (style.fg) {\n        if (typeof style.fg === \"number\") {\n            node.classList.add(\"ansifg\" + style.fg);\n        } else {\n            node.style.color = ansistyle_hexcolor(style.fg[0], style.fg[1], style.fg[2]);\n        }\n    }\n    if (style.bg) {\n        if (typeof style.bg === \"number\") {\n            node.classList.add(\"ansibg\" + style.bg);\n        } else {\n            node.style.backgroundColor = ansistyle_hexcolor(style.bg[0], style.bg[1], style.bg[2]);\n        }\n    }\n    node.appendChild(text);\n    return node;\n}\n\nexport function render_terminal(container, string, options) {\n    let return_html = false;\n    if (typeof container === \"string\") {\n        options = string;\n        string = container;\n        container = document.createElement(\"div\");\n        return_html = true;\n    }\n\n    if (options && options.clear) {\n        container.removeAttribute(\"data-pa-terminal-style\");\n        container.removeAttribute(\"data-pa-outputpart\");\n        container.replaceChildren();\n    }\n\n    let styles = container.getAttribute(\"data-pa-terminal-style\"),\n        fragment = null,\n        directoryre = null;\n    if (options && options.directory) {\n        directoryre = new RegExp(\"^(|.*[/\\\\s])(\" + regexp_quote(options.directory) + \"[^:\\\\s]+):(\\\\d+)(?!\\\\w)\");\n    }\n\n    function addlinepart(node, text, link) {\n        const n = ansistyle_render(text, styles);\n        if (link != null && link !== \"\") {\n            const a = document.createElement(\"a\");\n            a.href = link;\n            a.className = \"qh\";\n            if (n.nodeName === \"SPAN\") {\n                while (n.firstChild) {\n                    a.appendChild(n.firstChild);\n                }\n                n.appendChild(a);\n                node.append(n);\n            } else {\n                a.append(n);\n                node.append(a);\n            }\n        } else {\n            node.append(n);\n        }\n    }\n\n    function addfragment(node) {\n        if (!fragment) {\n            fragment = document.createDocumentFragment();\n        }\n        fragment.appendChild(node);\n    }\n\n    function clean_cr(line) {\n        const lineend = /\\n$/.test(line);\n        if (lineend && line.indexOf(\"\\r\") === line.length - 1) {\n            return line.substring(0, line.length - 2) + \"\\n\";\n        }\n        let curstyle = styles || \"\\x1b[m\", r = [];\n        const parts = (lineend ? line.substr(0, line.length - 1) : line).split(/\\r/);\n        for (let partno = 0; partno < parts.length; ++partno) {\n            const g = [], lsplit = parts[partno].split(/(\\x1b\\[[\\d;]*m|\\x1b\\[0?K)/);\n            let glen = 0, clearafter = null;\n            for (let j = 0; j < lsplit.length; j += 2) {\n                if (lsplit[j] !== \"\") {\n                    g.push(curstyle, lsplit[j]);\n                    glen += lsplit[j].length;\n                }\n                if (j + 1 < lsplit.length) {\n                    if (lsplit[j + 1].endsWith(\"K\")) {\n                        clearafter = glen;\n                    } else {\n                        curstyle = ansistyle_combine(curstyle, lsplit[j + 1]);\n                    }\n                }\n            }\n            // glen: number of characters to overwrite\n            let rpos = 0;\n            while (rpos < r.length && glen >= r[rpos + 1].length) {\n                glen -= r[rpos + 1].length;\n                rpos += 2;\n            }\n            while (rpos < r.length && glen < r[rpos + 1].length && clearafter === null) {\n                g.push(r[rpos], r[rpos + 1].substr(glen));\n                glen = 0;\n                rpos += 2;\n            }\n            r = g;\n        }\n        r.push(curstyle);\n        lineend && r.push(\"\\n\");\n        return r.join(\"\");\n    }\n\n    function add_file_link(node, prefix, file, line, link) {\n        let m;\n        while ((m = file.match(/^(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)([^]*)$/))) {\n            styles = ansistyle_combine(styles, m[1]);\n            file = m[2];\n        }\n        let filematch = Filediff.by_file(file);\n        if (!filematch && options && options.directory) {\n            file = options.directory + file;\n            filematch = Filediff.by_file(file);\n        }\n        if (filematch) {\n            if (prefix.length) {\n                addlinepart(node, prefix);\n            }\n            var a = document.createElement(\"a\");\n            a.href = \"#\" + filematch.lineid_anchor(\"b\" + line);\n            a.className = \"qh pa-goto\";\n            a.append(link.substring(prefix.length).replace(/(?:\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)/g, \"\"));\n            addlinepart(node, a);\n            return true;\n        }\n        return false;\n    }\n\n    function render_line(line, node) {\n        let m, mm, isnew = !node, displaylen = 0;\n        if (isnew) {\n            node = document.createElement(\"span\");\n        }\n\n        if (/\\r/.test(line)) {\n            line = clean_cr(line);\n        }\n\n        while ((m = line.match(/^(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K)([^]*)$/))) {\n            styles = ansistyle_combine(styles, m[1]);\n            line = m[2];\n        }\n\n        if (((m = line.match(/^([ \\t]*)([^:\\s]+):(\\d+)(?=:)/))\n             || (m = line.match(/^([ \\t]*)file \"(.*?)\", line (\\d+)/i))\n             || (directoryre && (m = line.match(directoryre))))\n            && add_file_link(node, m[1], m[2], m[3], m[0])) {\n            displaylen = m[0].length;\n            line = line.substr(displaylen);\n        }\n\n        let render, link = \"\";\n        while (line !== \"\") {\n            render = line;\n            if ((m = line.match(/^(.*?)(\\x1b\\[[\\d;]*m|\\x1b\\[\\d*K|\\x1b\\]8;;|\\x1bc)([^]*)$/))) {\n                if (m[1] === \"\") {\n                    if (m[2] === \"\\x1b]8;;\") {\n                        if ((mm = m[3].match(/^(.*?)(?:[\\x1b\\x07])([^]*)$/))) {\n                            link = mm[1];\n                            line = mm[2];\n                        } else {\n                            line = \"\";\n                        }\n                    } else if (m[2] === \"\\x1bc\") {\n                        container.replaceChildren();\n                        node.replaceChildren();\n                        isnew || container.appendChild(node);\n                        line = m[3];\n                    } else {\n                        styles = ansistyle_combine(styles, m[2]);\n                        line = m[3];\n                    }\n                    continue;\n                }\n                render = m[1];\n            }\n            if (displaylen + render.length > 133\n                || (displaylen + render.length == 133 && render.charAt(132) !== \"\\n\")) {\n                render = render.substr(0, 132 - displaylen);\n                addlinepart(node, render, link);\n                node.className = \"pa-rl-continues\";\n                isnew && addfragment(node);\n                node = document.createElement(\"span\");\n                isnew = true;\n                displaylen = 0;\n            } else {\n                addlinepart(node, render, link);\n                displaylen += render.length;\n            }\n            line = line.substr(render.length);\n        }\n        isnew && addfragment(node);\n    }\n\n    // hide newline on last line\n    let lines, lastfull;\n    if (typeof string === \"string\") {\n        lines = string.split(/^/m);\n        if (lines.length && lines[lines.length - 1] === \"\") {\n            lines.pop();\n        }\n        lastfull = lines.length && lines[lines.length - 1].endsWith(\"\\n\");\n    } else {\n        lines = [];\n        lastfull = true;\n        fragment = string;\n    }\n\n    let node = container.lastChild, cursor = null;\n    if (node\n        && node.lastChild\n        && hasClass(node.lastChild, \"pa-runcursor\")) {\n        cursor = node.lastChild;\n        node.removeChild(cursor);\n    }\n\n    if (node\n        && (string = node.getAttribute(\"data-pa-outputpart\")) !== null\n        && string !== \"\"\n        && lines.length) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n        lines[0] = string + lines[0];\n        node.removeAttribute(\"data-pa-outputpart\");\n    } else {\n        if (node && (lines.length || fragment)) {\n            node.appendChild(document.createTextNode(\"\\n\"));\n            node.removeAttribute(\"data-pa-outputpart\");\n        }\n        node = null;\n    }\n\n    let laststyles = styles, j, last;\n    for (let i = 0; i < lines.length; i = j) {\n        laststyles = styles;\n        last = lines[i];\n        for (j = i + 1; !last.endsWith(\"\\n\") && j < lines.length; ++j) {\n            last += lines[j];\n        }\n        if (j == lines.length && lastfull) {\n            last = last.substring(0, last.length - 1);\n        }\n        render_line(last, i ? null : node);\n    }\n\n    if (options && options.cursor && !container.lastChild && !fragment) {\n        addfragment(\"\");\n    }\n\n    if (fragment) {\n        container.appendChild(fragment);\n    }\n\n    let len = container.childNodes.length;\n    if (len >= 4000) {\n        let i = container.firstChild;\n        while (i.tagName === \"DIV\" && i.className === \"pa-rl-group\") {\n            i = i.nextSibling;\n            --len;\n        }\n        let div = null, divlen = 0;\n        while (i && (j = i.nextSibling)) {\n            if (!div\n                || (divlen >= 4000 && len >= 2000)) {\n                div = document.createElement(\"div\");\n                div.className = \"pa-rl-group\";\n                container.insertBefore(div, i);\n                divlen = 0;\n            }\n            container.removeChild(i);\n            div.appendChild(i);\n            i = j;\n            ++divlen;\n            --len;\n        }\n    }\n\n    if (options && options.cursor) {\n        if (!cursor) {\n            cursor = document.createElement(\"span\");\n            cursor.className = \"pa-runcursor\";\n        }\n        container.lastChild.appendChild(cursor);\n    }\n\n    if (!lastfull && container.lastChild) {\n        styles = laststyles;\n        container.lastChild.setAttribute(\"data-pa-outputpart\", last);\n    }\n\n    if (styles != null) {\n        container.setAttribute(\"data-pa-terminal-style\", styles);\n    } else {\n        container.removeAttribute(\"data-pa-terminal-style\");\n    }\n\n    if (return_html) {\n        return container.innerHTML;\n    }\n}\n\nrender_text.add_format({\n    format: 2,\n    render: function (text) {\n        return render_terminal(text);\n    }\n});\n","// grade-ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { handle_ui } from \"./ui.js\";\n\nexport function grades_fetch(p) {\n    api_conditioner(hoturl(\"api/grade\", {psetinfo: p}), null, \"GET\")\n        .then(function (data) {\n            if (data && data.ok) {\n                GradeSheet.store(p, data);\n            }\n        });\n}\n\nfunction toggle_grade_history() {\n    const gelt = this.closest(\".pa-grade\");\n    this.classList.toggle(\"pa-grade-latest\");\n    this.classList.toggle(\"pa-grade-earlier\");\n    GradeSheet.closest(this).update_at(gelt);\n}\n\nhandle_ui.on(\"pa-grade-latest\", toggle_grade_history);\nhandle_ui.on(\"pa-grade-earlier\", toggle_grade_history);\n","// run.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { wstorage, sprintf, strftime } from \"./utils.js\";\nimport { $e, hasClass, addClass, removeClass, fold61, handle_ui } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { render_terminal } from \"./render-terminal.js\";\nimport { grades_fetch } from \"./grade-ui.js\";\n\nfunction make_xterm_write_handler(write) {\n    return function (event) {\n        if (event.type === \"keydown\") {\n            let key = event_key(event), mod = event_key.modcode(event);\n            if (key.length === 1) {\n                mod &= ~event_key.SHIFT;\n                if (mod === 0 && event_key.printable(event)) {\n                    // keep `key`\n                } else if (mod === event_key.CTRL\n                           && key >= \"a\"\n                           && key <= \"z\") {\n                    key = String.fromCharCode(key.charCodeAt(0) - 96);\n                } else if ((mod === event_key.META && key == \"v\")\n                           || (mod == event_key.CTRL && key == \"V\")) {\n                    navigator.clipboard.readText().then(tx => write(tx));\n                    event.preventDefault();\n                    return;\n                } else {\n                    key = \"\";\n                }\n            } else {\n                // send escape sequences compatible with xterm256-color terminfo\n                if (key === \"Enter\" && !mod) {\n                    key = \"\\r\";\n                } else if (key === \"Escape\" && !mod) {\n                    key = \"\\x1b\";\n                } else if (key === \"Backspace\" && !mod) {\n                    key = \"\\x7f\";\n                } else if (key === \"Tab\" && !mod) {\n                    key = \"\\x09\";\n                } else if (key === \"ArrowUp\" && !mod) {\n                    key = \"\\x1bOA\";\n                } else if (key === \"ArrowDown\" && !mod) {\n                    key = \"\\x1bOB\";\n                } else if (key === \"ArrowRight\" && !mod) {\n                    key = \"\\x1bOC\";\n                } else if (key === \"Home\" && !mod) {\n                    key = \"\\x1bOH\";\n                } else if (key === \"End\" && !mod) {\n                    key = \"\\x1bOF\";\n                } else if (key === \"ArrowLeft\" && !mod) {\n                    key = \"\\x1bOD\";\n                } else if (key === \"Delete\" && !mod) {\n                    key = \"\\x1b[3~\";\n                } else if (key === \"PageUp\" && !mod) {\n                    key = \"\\x1b[5~\";\n                } else if (key === \"PageDown\" && !mod) {\n                    key = \"\\x1b[6~\";\n                } else {\n                    key = \"\";\n                }\n            }\n            if (key !== \"\") {\n                write(key);\n                event.preventDefault();\n            }\n        }\n        return false;\n    };\n}\n\nfunction trim_data_to_offset(data, offset) {\n    const re = /^([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y;\n    let matchIndex = 0;\n    while (matchIndex < data.data.length && data.offset < offset) {\n        re.lastIndex = matchIndex;\n        const m = data.data.match(re);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            const n = Math.min(offset - data.offset, m[1].length);\n            matchIndex += n;\n            data.offset += n;\n        }\n        if (m[2].length) {\n            const n = Math.min(offset - data.offset, m[2].length * 2);\n            matchIndex += n / 2;\n            data.offset += n;\n        }\n        if (m[3].length) {\n            const n = Math.min(offset - data.offset, m[3].length * 3);\n            matchIndex += n / 3;\n            data.offset += n;\n        }\n        if (m[4].length) {\n            const n = Math.min(offset - data.offset, m[4].length * 2);\n            matchIndex += n / 2; // surrogate pairs\n            data.offset += n;\n        }\n    }\n    data.data = data.data.substring(matchIndex);\n}\n\nfunction utf8_length(str) {\n    const re = /^([\\x00-\\x7F]*)([\\u0080-\\u07FF]*)([\\u0800-\\uD7FF\\uE000-\\uFFFF]*)((?:[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])*)/y;\n    let matchIndex = 0, offset = 0;\n    while (matchIndex < str.length) {\n        re.lastIndex = matchIndex;\n        const m = str.match(re);\n        if (!m) {\n            break;\n        }\n        if (m[1].length) {\n            matchIndex += m[1].length;\n            offset += m[1].length;\n        }\n        if (m[2].length) {\n            matchIndex += m[2].length;\n            offset += m[2].length * 2;\n        }\n        if (m[3].length) {\n            matchIndex += m[3].length;\n            offset += m[3].length * 3;\n        }\n        if (m[4].length) {\n            matchIndex += m[4].length;\n            offset += m[4].length * 2; // surrogate pairs\n        }\n    }\n    return offset;\n}\n\nexport function run(button, opts) {\n    const form = button.closest(\"form\"),\n        category = button.getAttribute(\"data-pa-run-category\") || button.value,\n        psetinfo = button.closest(\".pa-psetinfo\"),\n        directory = psetinfo ? psetinfo.getAttribute(\"data-pa-directory\") : \"\",\n        therun = document.getElementById(\"pa-run-\" + category),\n        therunout = therun.closest(\".pa-runout\"),\n        thepre = $(therun).find(\"pre\");\n    let thexterm,\n        checkt,\n        kill_checkt,\n        queueid = opts.queueid || null, was_onqueue = false,\n        eventsource = null,\n        sendtimeout = null,\n        completed = false;\n\n    therunout && removeClass(therunout, \"hidden\");\n    removeClass(therun, \"need-run\");\n    fold61(therun, therunout, true);\n\n    if (hasClass(therun, \"pa-run-active\")) {\n        return true;\n    }\n    addClass(therun, \"pa-run-active\");\n\n    if (opts.unfold && therun.hasAttribute(\"data-pa-timestamp\")) {\n        checkt = +therun.getAttribute(\"data-pa-timestamp\");\n    } else if (opts.timestamp) {\n        checkt = opts.timestamp;\n    }\n    if (!checkt) {\n        therun.removeAttribute(\"data-pa-timestamp\");\n    }\n    if (!checkt && opts.clear !== false) {\n        thepre[0].replaceChildren();\n        addClass(thepre[0].parentElement, \"pa-run-short\");\n        thepre[0].removeAttribute(\"data-pa-terminal-style\");\n        $(therun).children(\".pa-runrange\").remove();\n    } else if (therun.lastChild) {\n        $(therun.lastChild).find(\"span.pa-runcursor\").remove();\n    }\n\n    function stop_button(on) {\n        const h3 = therunout ? therunout.firstChild : null;\n        if (h3 && h3.tagName === \"H3\") {\n            const btn = $(h3).find(\".pa-runstop\");\n            if (on && !btn.length) {\n                const b = $e(\"button\", {class: \"btn-danger pa-runstop\", type: \"button\"}, \"Stop\");\n                $(b).click(stop).appendTo(h3);\n            } else if (!on && btn.length) {\n                btn.remove();\n            }\n        }\n    }\n\n    function terminal_char_width(min, max) {\n        const x = $e(\"span\", {style: \"position:absolute\"}, \"0\");\n        thepre.append(x);\n        const w = Math.trunc(thepre.width() / $(x).width() / 1.33);\n        x.remove();\n        return Math.max(min, Math.min(w, max));\n    }\n\n    if (therun.getAttribute(\"data-pa-xterm-js\")\n        && therun.getAttribute(\"data-pa-xterm-js\") !== \"false\"\n        && window.Terminal) {\n        removeClass(thepre[0].parentElement, \"pa-run-short\");\n        addClass(thepre[0].parentElement, \"pa-run-xterm-js\");\n        const cols = +therun.getAttribute(\"data-pa-columns\"),\n            rows = +therun.getAttribute(\"data-pa-rows\"),\n            fontsize = +therun.getAttribute(\"data-pa-font-size\"),\n            args = {\n                cols: !cols || cols < 0 || cols != cols ? terminal_char_width(80, 132) : cols,\n                rows: !rows || rows < 0 || rows != rows ? 25 : rows\n            };\n        if (fontsize && fontsize > 0 && fontsize == fontsize) {\n            args.fontSize = fontsize;\n        }\n        thexterm = new Terminal(args);\n        thexterm.open(thepre[0]);\n        thexterm.attachCustomKeyEventHandler(make_xterm_write_handler(write));\n        if (opts.focus) {\n            thexterm.focus();\n        }\n    }\n\n    function scroll_therun() {\n        if (!thexterm\n            && (hasClass(therun, \"pa-run-short\")\n                || therun.hasAttribute(\"data-pa-runbottom\"))) {\n            requestAnimationFrame(function () {\n                if (therun.scrollHeight > therun.clientHeight) {\n                    removeClass(therun, \"pa-run-short\");\n                }\n                if (therun.hasAttribute(\"data-pa-runbottom\")) {\n                    therun.scrollTop = Math.max(therun.scrollHeight - therun.clientHeight, 0);\n                }\n            });\n        }\n    }\n\n    if (!therun.hasAttribute(\"data-pa-opened\")) {\n        therun.setAttribute(\"data-pa-opened\", \"true\");\n        if (!thexterm) {\n            therun.setAttribute(\"data-pa-runbottom\", \"true\");\n            therun.addEventListener(\"scroll\", function () {\n                requestAnimationFrame(function () {\n                    if (therun.scrollTop + therun.clientHeight >= therun.scrollHeight - 10)\n                        therun.setAttribute(\"data-pa-runbottom\", \"true\");\n                    else\n                        therun.removeAttribute(\"data-pa-runbottom\");\n                });\n            });\n            scroll_therun();\n        }\n    }\n\n    let ibuffer = \"\", // initial buffer; holds data before any results arrive\n        preamble_offset = null,\n        offset = 0, backoff = 50, times = null;\n\n    function hide_cursor() {\n        if (thexterm) {\n            thexterm.write(\"\\x1b[?25l\"); // hide cursor escape\n        } else if (therun.lastChild) {\n            $(therun.lastChild).find(\".pa-runcursor\").remove();\n        }\n    }\n\n    function complete(isdone) {\n        removeClass(therun, \"pa-run-active\");\n        if (isdone !== false && !completed) {\n            hide_cursor();\n            if (button.hasAttribute(\"data-pa-run-grade\")) {\n                grades_fetch(psetinfo); // XXX not on replay\n            }\n            opts.done_function && opts.done_function();\n            completed = true;\n        }\n        send_after(-1);\n    }\n\n    function append(str, done) {\n        if (thexterm) {\n            thexterm.write(str, done);\n        } else {\n            render_terminal(thepre[0], str, {cursor: true, directory: directory});\n            done && Promise.resolve(true).then(done);\n        }\n    }\n\n    function append_data(str, data, done) {\n        if (ibuffer !== null) { // haven't started generating output\n            ibuffer += str;\n            const pos = ibuffer.indexOf(\"\\n\\n\");\n            if (pos < 0) {\n                return; // not ready yet\n            }\n            preamble_offset = utf8_length(ibuffer.substr(0, pos + 2));\n            let tsmsg = opts.clear === false ? \"\" : \"\\x1bc\";\n            if (data && data.timestamp) {\n                tsmsg += \"\\x1b[38;5;108;3m...started \" + strftime(\"%l:%M:%S%P %e %b %Y\", new Date(data.timestamp * 1000)) + \"\\x1b[m\\r\\n\";\n            }\n            str = tsmsg + ibuffer.substr(pos + 2);\n            ibuffer = null;\n        }\n        if (str !== \"\") {\n            append(str, done);\n        }\n    }\n\n    function parse_times(times) {\n        let a = [0, 0], p = 0;\n        while (p < times.length) {\n            let n = times.indexOf(\"\\n\", p + 1), c;\n            if (n < 0) {\n                n = times.length;\n            }\n            const ch = times.charCodeAt(p);\n            if ((ch === 43 /* + */ || (ch >= 48 && ch <= 57 /* 0-9 */))\n                && (c = times.indexOf(\",\", p)) >= 0\n                && c < n) {\n                let time = +times.substring(p, c),\n                    offset = +times.substring(c + 1, n);\n                if (ch === 43) {\n                    time += a[a.length - 2];\n                }\n                if (times.charCodeAt(c + 1) === 43) {\n                    offset += a[a.length - 1];\n                }\n                a.push(time, offset);\n            }\n            p = n + 1;\n        }\n        return a;\n    }\n\n    function set_time_data(data, at_end) {\n        let tpos, tstart, tlast, timeout, running,\n            partial_outstanding = false, partial_time;\n        if (times) {\n            return;\n        } else if (data.offset !== 0) {\n            throw new Error(\"fuck\");\n        }\n\n        let factor = data.time_factor;\n        {\n            const runspeed = wstorage.site_json(false, \"pa-runspeed-\" + category);\n            if (runspeed && runspeed[1] >= (new Date).getTime() - 86400000) {\n                factor = runspeed[0];\n            } else if (runspeed) {\n                wstorage.site_json(false, \"pa-runspeed-\" + category, null);\n            }\n            if (factor < 0.1 || factor > 10) {\n                factor = 1;\n            }\n        }\n\n        times = data.time_data;\n        if (typeof times === \"string\") {\n            times = parse_times(times);\n        }\n\n        let ebutton, erange, etime, espeed;\n        if (times.length > 2) {\n            therun.prepend($e(\"div\", \"pa-runrange\",\n                (ebutton = $e(\"button\", {type: \"button\", \"class\": \"pa-runrange-play\"})),\n                (erange = $e(\"input\", {type: \"range\", \"class\": \"pa-runrange-range\", min: 0, max: times[times.length -2]})),\n                (etime = $e(\"span\", \"pa-runrange-time\")),\n                $e(\"span\", {title: \"Slow\", \"class\": \"pa-runrange-speed-slow\"}, \"\"),\n                (espeed = $e(\"input\", {type: \"range\", \"class\": \"pa-runrange-speed\", min: \"0.1\", max: 10, step: \"0.1\"})),\n                $e(\"span\", {title: \"Fast\", \"class\": \"pa-runrange-speen-fast\"}, \"\")));\n            erange.addEventListener(\"input\", function () {\n                running = false;\n                addClass(ebutton, \"paused\");\n                f(+this.value);\n            }, false);\n            ebutton.addEventListener(\"click\", function () {\n                if (hasClass(ebutton, \"paused\")) {\n                    removeClass(ebutton, \"paused\");\n                    running = true;\n                    tstart = (new Date).getTime();\n                    if (tlast < times[times.length - 2])\n                        tstart -= tlast / factor;\n                    f(null);\n                } else {\n                    addClass(ebutton, \"paused\");\n                    running = false;\n                }\n            }, false);\n            espeed.addEventListener(\"input\", function () {\n                factor = +this.value;\n                wstorage.site(false, \"pa-runspeed-\" + category, [factor, (new Date).getTime()]);\n                if (running) {\n                    tstart = (new Date).getTime() - tlast / factor;\n                    f(null);\n                }\n            }, false);\n            espeed.value = factor;\n        }\n\n        data = {\n            data: data.data,\n            end_offset: data.end_offset,\n            size: data.size || data.end_offset,\n            timestamp: data.timestamp\n        };\n\n        function set_time() {\n            if (erange) {\n                erange.value = tlast;\n                etime.textContent = sprintf(\"%d:%02d.%03d\", Math.trunc(tlast / 60000), Math.trunc(tlast / 1000) % 60, Math.trunc(tlast) % 1000);\n            }\n        }\n\n        function load_more() {\n            if (!partial_outstanding) {\n                partial_outstanding = true;\n                send({offset: data.end_offset}, function (xdata) {\n                    if (xdata.ok && xdata.offset === data.end_offset) {\n                        data.data += xdata.data;\n                        data.end_offset = xdata.end_offset;\n                    } else if (!xdata.ok) {\n                        data.size = data.end_offset;\n                    }\n                    partial_outstanding = false;\n                    partial_time && f(partial_time);\n                });\n            }\n        }\n\n        function add_data() {\n            if (ibuffer !== null) {\n                const nlnl = data.data.indexOf(\"\\n\\n\");\n                append_data(data.data.substring(0, nlnl + 2), data);\n                // ... which sets `ibuffer = null`\n            }\n        }\n\n        function tpos_offset(tpos) {\n            if (tpos < times.length) {\n                return preamble_offset + times[tpos + 1];\n            } else {\n                return data.size;\n            }\n        }\n\n        function tpos_lower_bound(l, r, time) {\n            while (l < r) {\n                const m = l + (((r - l) >> 1) & ~1);\n                if (time <= times[m]) {\n                    r = m;\n                } else {\n                    l = m + 2;\n                }\n            }\n            return l;\n        }\n\n        function offset_lower_bound(offset) {\n            let l = 0, r = times.length;\n            while (l < r) {\n                const m = l + (((r - l) >> 1) & ~1);\n                if (offset <= times[m + 1]) {\n                    r = m;\n                } else {\n                    l = m + 2;\n                }\n            }\n            return l;\n        }\n\n        function f(time) {\n            if (time === null) {\n                if (running) {\n                    time = ((new Date).getTime() - tstart) * factor;\n                } else {\n                    return;\n                }\n            }\n\n            // find `npos`, the new time position\n            let npos = tpos;\n            if (npos >= times.length || time < times[npos]) {\n                npos = 0;\n            }\n            if (npos + 2 < times.length && time >= times[npos]) {\n                npos = tpos_lower_bound(npos, times.length, time);\n            }\n            while (npos < times.length && time >= times[npos]) {\n                npos += 2;\n            }\n\n            // reset buffer if new time position is less than current\n            if (npos < tpos) {\n                ibuffer = \"\";\n                tpos = 0;\n            }\n            if (ibuffer !== null) {\n                add_data();\n            }\n\n            // range of data [boffset, eoffset) to feed to xterm.js\n            let boffset = tpos_offset(tpos), eoffset = tpos_offset(npos);\n\n            // flow control: give xterm.js 8MB of data at a time\n            const maxdata = 8 << 20;\n            if (boffset + maxdata < eoffset) {\n                let lpos = tpos;\n                while (lpos < npos) {\n                    const m = lpos + (((npos - lpos) >> 1) & ~1);\n                    if (boffset + maxdata < times[m + 1] + preamble_offset) {\n                        npos = m;\n                        eoffset = tpos_offset(m);\n                    } else {\n                        lpos = m + 2;\n                    }\n                }\n            }\n\n            // maybe load more data\n            if (data.end_offset < data.size) {\n                if (eoffset > data.end_offset) {\n                    partial_time = time;\n                    load_more();\n                    return;\n                } else if (eoffset > data.end_offset - (1 << 20)) {\n                    load_more();\n                }\n            }\n\n            tlast = npos < times.length ? Math.min(time, times[npos]) : time;\n            partial_time = time > tlast ? time : null;\n            if (partial_time) {\n                const moffset = Math.min(boffset + (4 << 20), eoffset);\n                append_data(data.data.substring(boffset, moffset), data, () => { f(partial_time) });\n                boffset = moffset;\n            }\n            append_data(data.data.substring(boffset, eoffset), data);\n            scroll_therun();\n            set_time();\n\n            tpos = npos;\n            if (timeout) {\n                timeout = clearTimeout(timeout);\n            }\n            if (running && !partial_time) {\n                if (tpos < times.length) {\n                    timeout = setTimeout(f, Math.min(100, (times[tpos] - (tpos ? times[tpos - 2] : 0)) / factor), null);\n                } else {\n                    ebutton && addClass(ebutton, \"paused\");\n                    hide_cursor();\n                }\n            }\n        }\n\n        if (at_end) {\n            tpos = times.length;\n            tlast = times[tpos - 2];\n            running = false;\n            ebutton && addClass(ebutton, \"paused\");\n            set_time();\n        } else {\n            tpos = 0;\n            tlast = 0;\n            tstart = (new Date).getTime();\n            running = true;\n            if (times.length) {\n                if (therun.getAttribute(\"data-pa-start\") === \"alternate-screen\") {\n                    const nlnl = data.data.indexOf(\"\\n\\n\"),\n                        altscr = data.data.indexOf(\"\\x1b[?1049h\"),\n                        xtpos = altscr > nlnl ? offset_lower_bound(altscr - nlnl - 2) : -1;\n                    if (xtpos >= 0 && xtpos < times.length) {\n                        tstart -= times[xtpos] / factor;\n                    }\n                }\n                f(null);\n            }\n        }\n    }\n\n    let send_out = 0, send_args = {};\n\n    function succeed_eventsource(msge) {\n        let ok = false;\n        if (msge && msge.data) {\n            try {\n                let json = JSON.parse(msge.data);\n                if (json\n                    && typeof json === \"object\"\n                    && json.data != null\n                    && json.offset != null) {\n                    json.offset += preamble_offset;\n                    json.end_offset += preamble_offset;\n                    if (json.ok == null) {\n                        json.ok = true;\n                    }\n                    if (json.offset <= offset) {\n                        succeed(json);\n                    } else {\n                        send({write: \"\"});\n                    }\n                    ok = true;\n                }\n            } catch {\n            }\n        }\n        ok || error_eventsource();\n    }\n\n    function error_eventsource() {\n        if (eventsource) {\n            eventsource.close();\n            eventsource = false;\n            send();\n        }\n    }\n\n    function send_after(ms) {\n        if (sendtimeout) {\n            clearTimeout(sendtimeout);\n        }\n        if (ms >= 0) {\n            sendtimeout = setTimeout(send_from_timeout, ms);\n        } else {\n            sendtimeout = null;\n        }\n    }\n\n    function send_from_timeout() {\n        sendtimeout = null;\n        send();\n    }\n\n    function succeed(data) {\n        if (was_onqueue) {\n            append(\"\\r\\x1b[K\");\n            was_onqueue = false;\n        }\n        if (data && data.onqueue) {\n            queueid = data.queueid;\n            let t = `\\x1b[38;5;108;3mOn queue, ${data.nahead} ${data.nahead == 1 ? \"job\" : \"jobs\"} ahead`;\n            if (data.headage) {\n                let headage = data.headage;\n                if (headage > 10) {\n                    headage = Math.round(headage / 5 + 0.5) * 5;\n                }\n                t += `, oldest began about ${headage} ${headage == 1 ? \"second\" : \"seconds\"} ago`;\n            }\n            append(t + \"\\x1b[m\");\n            scroll_therun();\n            was_onqueue = true;\n            send_after(8000);\n            return;\n        }\n\n        stop_button(data && (data.status == null || data.status === \"working\") && !data.done);\n\n        if (!data || !data.ok) {\n            let x = \"Unknown error\";\n            if (data && data.loggedout) {\n                x = \"You have been logged out (perhaps due to inactivity). Please reload this page.\";\n            } else if (data) {\n                if (data.error && data.error !== true) {\n                    x = data.error;\n                } else if (data.message) {\n                    x = data.message;\n                }\n                if (data.errorcode === 1001 // ERRORCODE_RUNCONFLICT\n                    && data.conflict_timestamp) {\n                    kill_checkt = data.conflict_timestamp;\n                }\n            }\n            append(\"\\x1b[1;3;31m\" + x + \"\\x1b[m\\r\\n\");\n            scroll_therun();\n            return complete();\n        } else if (data.done) {\n            complete(false);\n        }\n\n        if (data.eventsource\n            && data.status === \"working\"\n            && eventsource == null) {\n            eventsource = new EventSource(window.siteinfo.base.concat(\"runevents/v1/\", data.eventsource));\n            eventsource.onmessage = succeed_eventsource;\n            eventsource.onerror = error_eventsource;\n        }\n\n        if (!checkt && data.timestamp) {\n            checkt = data.timestamp;\n            therun.setAttribute(\"data-pa-timestamp\", data.timestamp);\n        }\n\n        // Skip data up to UTF-8 `offset`\n        if (data.data\n            && data.offset < offset) {\n            trim_data_to_offset(data, offset);\n            if (data.offset < offset) {\n                send_after(0);\n                return;\n            }\n        }\n\n        // Stay on alternate screen when done (rather than clearing it)\n        let m;\n        if (data.data\n            && data.done\n            && data.end_offset < data.size\n            && (m = data.data.match(/\\x1b\\[\\?1049l(?:[\\r\\n]|\\x1b\\[\\?1l|\\x1b\\[23;0;0t|\\x1b>)*$/))) {\n            data.data = data.data.substring(0, data.data.length - m[0].length);\n        }\n\n        // Pure replay -> set_time_data\n        if (data.done\n            && data.time_data != null\n            && ibuffer === \"\"\n            && opts.timed !== false) {\n            // Parse timing data\n            set_time_data(data);\n            return;\n        }\n\n        // Append data\n        if (data.data != null\n            && data.offset === offset\n            && data.end_offset >= offset) {\n            offset = data.end_offset;\n            append_data(data.data, data);\n            backoff = 100;\n        }\n\n        if (data.result) {\n            if (!data.done || data.end_offset < data.size) {\n                throw new Error(\"data.result must only be present on last\");\n            }\n            if (ibuffer !== null) {\n                append_data(\"\\n\\n\", data);\n            }\n            append_data(data.result, data);\n        }\n        if (!data.data && !data.result) {\n            backoff = Math.min(backoff * 2, 500);\n        }\n\n        scroll_therun();\n        if (data.status === \"old\") {\n            send_after(2000);\n        } else if (!data.done || data.end_offset < data.size) {\n            send_after(backoff);\n        } else {\n            complete();\n            if (data.timed\n                && !hasClass(therun.firstChild, \"pa-runrange\")\n                && opts.timed !== false) {\n                send({offset: 0}, succeed_add_times);\n            }\n        }\n    }\n\n    function succeed_add_times(data) {\n        --send_out;\n        if (data.data && data.done && data.time_data != null) {\n            set_time_data(data, true);\n        }\n    }\n\n    function send(args, success) {\n        if (args && args.stop) {\n            send_args.stop = 1;\n        }\n        if (args && args.write != null) {\n            send_args.write = (send_args.write || \"\").concat(args.write);\n        }\n        if ((send_args.write && send_out > 0)\n            || (!send_args.stop && send_args.write == null && eventsource)) {\n            return;\n        }\n\n        let a = {};\n        if (!form.elements.run) {\n            a.run = category;\n        }\n        a.offset = offset;\n        if (args && args.offset != null) {\n            a.offset = args.offset;\n        }\n        if (checkt) {\n            a.check = checkt;\n        } else if (args && args.stop && kill_checkt) {\n            a.check = kill_checkt;\n        }\n        if (queueid) {\n            a.queueid = queueid;\n        }\n        Object.assign(a, send_args);\n        delete send_args.write;\n        delete send_args.stop;\n        ++send_out;\n\n        jQuery.ajax(form.getAttribute(\"action\"), {\n            data: $(form).serializeWith(a),\n            type: \"POST\", cache: false, dataType: \"json\", timeout: 30000,\n            success: function (data) {\n                --send_out;\n                (success || succeed)(data);\n                send_args.write && send();\n            },\n            error: function () {\n                $(form).find(\".ajaxsave61\").html(\"Failed\");\n                removeClass(therun, \"pa-run-active\");\n            }\n        });\n    }\n\n    function stop() {\n        send({stop: 1});\n    }\n\n    function write(value) {\n        send({write: value});\n    }\n\n    if (opts.headline && opts.clear === false && thepre[0].firstChild) {\n        append(\"\\r\\n\\r\\n\");\n    }\n    if (opts.headline) {\n        append(\"\\x1b[1;37m\" + opts.headline + \"\\x1b[m\\r\\n\");\n    }\n    if (opts.unfold && therun.getAttribute(\"data-pa-content\")) {\n        append(therun.getAttribute(\"data-pa-content\"));\n    }\n    if (opts.focus) {\n        $(therunout).scrollIntoView();\n    }\n    therun.removeAttribute(\"data-pa-content\");\n    scroll_therun();\n\n    send();\n    return false;\n}\n\n\nhandle_ui.on(\"pa-runner\", function () {\n    run(this, {focus: true});\n});\n\nhandle_ui.on(\"pa-run-show\", function () {\n    const parent = this.closest(\".pa-runout\"),\n        name = parent.id.substring(4),\n        therun = document.getElementById(\"pa-run-\" + name);\n    if (therun.hasAttribute(\"data-pa-timestamp\") && hasClass(therun, \"need-run\")) {\n        const thebutton = jQuery(\".pa-runner[value='\" + name + \"']\")[0];\n        run(thebutton, {unfold: true});\n    } else {\n        fold61(therun, document.getElementById(\"run-\" + name));\n    }\n});\n","// run-settings.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui } from \"./ui.js\";\n\nfunction add(name, value) {\n    var $j = $(\"#pa-runsettings\"), num = $j.find(\".n\").length;\n    while ($j.find(\"[data-runsetting-num=\" + num + \"]\").length)\n        ++num;\n    var $x = $(\"<div class=\\\"pa-p\\\" data-runsetting-num=\\\"\" + num + \"\\\"><div class=\\\"pa-pt\\\"></div><div class=\\\"pa-pv\\\"><input name=\\\"n\" + num + \"\\\" class=\\\"uich pa-runconfig ignore-diff n\\\" size=\\\"30\\\" placeholder=\\\"Name\\\"> &nbsp; <input name=\\\"v\" + num + \"\\\" class=\\\"uich pa-runconfig ignore-diff v\\\" size=\\\"40\\\" placeholder=\\\"Value\\\"></div></div>\");\n    if (name) {\n        $x.find(\".n\").val(name);\n        $x.find(\".v\").val(value);\n    }\n    $j.append($x);\n    if (!name)\n        $x.find(\".n\").focus();\n}\n\nfunction save() {\n    var $j = $(\"#pa-runsettings .pa-p\"), j = {}, i, k, v;\n    for (i = 0; i != $j.length; ++i) {\n        k = $.trim($($j[i]).find(\".n\").val());\n        v = $.trim($($j[i]).find(\".v\").val());\n        if (k != \"\")\n            j[k] = v;\n    }\n    $.ajax($j.closest(\"form\").attr(\"action\"), {\n        data: {runsettings: j},\n        type: \"POST\", cache: false,\n        dataType: \"json\"\n    });\n}\n\nexport function run_settings_load(j) {\n    var $j = $(\"#pa-runsettings\"), $n = $j.find(\".n\"), i, x;\n    $n.attr(\"data-outstanding\", \"1\");\n    for (x in j) {\n        for (i = 0; i != $n.length && $.trim($($n[0]).val()) != x; ++i)\n            /* nada */;\n        if (i == $n.length)\n            add(x, j[x]);\n        else if ($.trim($j.find(\"[name=v\" + i + \"]\").val()) != j[x]) {\n            $j.find(\"[name=v\" + i + \"]\").val(j[x]);\n            $($n[i]).removeAttr(\"data-outstanding\");\n        }\n    }\n    for (i = 0; i != $n.length; ++i)\n        if ($($n[i]).attr(\"data-outstanding\"))\n            $(\"[data-runsetting-num=\" + $($n[i]).attr(\"name\").substr(1) + \"]\").remove();\n}\n\nhandle_ui.on(\"pa-runconfig\", function () {\n    if (this.name === \"define\") {\n        add();\n    } else {\n        save();\n    }\n});\n","// svgpathutil.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { log_jserror } from \"./utils-errors.js\";\n\n\nexport function eval_function_path(x) {\n    var l = 0, r = this.getTotalLength(), m, pt;\n    if (l != r) {\n        while (r - l > 0.5) {\n            m = l + (r - l) / 2;\n            pt = this.getPointAtLength(m);\n            if (pt.x >= x + 0.25)\n                r = m;\n            else if (pt.x >= x - 0.25)\n                return pt.y;\n            else\n                l = m;\n        }\n        pt = this.getPointAtLength(r === m ? l : r);\n        if (pt.x >= x - 0.25 && pt.x <= x + 0.25)\n            return pt.y;\n    }\n    return null;\n}\n\n\nconst PATHSEG_ARGMAP = {\n    m: 2, M: 2, z: 0, Z: 0, l: 2, L: 2, h: 1, H: 1, v: 1, V: 1, c: 6, C: 6,\n    s: 4, S: 4, q: 4, Q: 4, t: 2, T: 2, a: 7, A: 7, b: 1, B: 1\n};\nlet normalized_path_cache = {},\n    normalized_path_cache_size = 0,\n    normalized_path_complaint = false;\n\nfunction svg_path_number_of_items(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    if (normalized_path_cache[s])\n        return normalized_path_cache[s].length;\n    else\n        return s.replace(/[^A-DF-Za-df-z]+/g, \"\").length;\n}\n\nfunction make_svg_path_parser(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    s = s.split(/([a-zA-Z]|[-+]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[Ee][-+]?\\d+)?)/);\n    var i = 1, e = s.length, next_cmd;\n    return function () {\n        var a = null, ch;\n        while (i < e) {\n            ch = s[i];\n            if (ch >= \"A\") {\n                if (a)\n                    break;\n                a = [ch];\n                next_cmd = ch;\n                if (ch === \"m\" || ch === \"M\" || ch === \"z\" || ch === \"Z\")\n                    next_cmd = (ch === \"m\" || ch === \"z\" ? \"l\" : \"L\");\n            } else {\n                if (!a && next_cmd)\n                    a = [next_cmd];\n                else if (!a || a.length === PATHSEG_ARGMAP[a[0]] + 1)\n                    break;\n                a.push(+ch);\n            }\n            i += 2;\n        }\n        return a;\n    };\n}\n\nfunction normalize(s) {\n    if (s instanceof SVGPathElement)\n        s = s.getAttribute(\"d\");\n    if (normalized_path_cache[s])\n        return normalized_path_cache[s];\n\n    var res = [],\n        cx = 0, cy = 0, cx0 = 0, cy0 = 0, copen = false,\n        cb = 0, sincb = 0, coscb = 1,\n        i, dx, dy,\n        parser = make_svg_path_parser(s), a, ch, preva;\n    while ((a = parser())) {\n        ch = a[0];\n        // special commands: bearing, closepath\n        if (ch === \"b\" || ch === \"B\") {\n            cb = ch === \"b\" ? cb + a[1] : a[1];\n            coscb = Math.cos(cb);\n            sincb = Math.sin(cb);\n            continue;\n        } else if (ch === \"z\" || ch === \"Z\") {\n            preva = res.length ? res[res.length - 1] : null;\n            if (copen) {\n                if (cx != cx0 || cy != cy0)\n                    res.push([\"L\", cx, cy, cx0, cy0]);\n                res.push([\"Z\"]);\n                copen = false;\n            }\n            cx = cx0, cy = cy0;\n            continue;\n        }\n\n        // normalize command 1: remove horiz/vert\n        if (PATHSEG_ARGMAP[ch] == 1) {\n            if (a.length == 1)\n                a = [\"L\"]; // all data is missing\n            else if (ch === \"h\")\n                a = [\"l\", a[1], 0];\n            else if (ch === \"H\")\n                a = [\"L\", a[1], cy];\n            else if (ch === \"v\")\n                a = [\"l\", 0, a[1]];\n            else if (ch === \"V\")\n                a = [\"L\", cx, a[1]];\n        }\n\n        // normalize command 2: relative -> absolute\n        ch = a[0];\n        if (ch >= \"a\" && !cb) {\n            for (i = ch !== \"a\" ? 1 : 6; i < a.length; i += 2) {\n                a[i] += cx;\n                a[i+1] += cy;\n            }\n        } else if (ch >= \"a\") {\n            if (ch === \"a\")\n                a[3] += cb;\n            for (i = ch !== \"a\" ? 1 : 6; i < a.length; i += 2) {\n                dx = a[i], dy = a[i + 1];\n                a[i] = cx + dx * coscb + dy * sincb;\n                a[i+1] = cy + dx * sincb + dy * coscb;\n            }\n        }\n        ch = a[0] = ch.toUpperCase();\n\n        // normalize command 3: use cx0,cy0 for missing data\n        while (a.length < PATHSEG_ARGMAP[ch] + 1)\n            a.push(cx0, cy0);\n\n        // normalize command 4: shortcut -> full\n        if (ch === \"S\") {\n            dx = dy = 0;\n            if (preva && preva[0] === \"C\")\n                dx = cx - preva[3], dy = cy - preva[4];\n            a = [\"C\", cx + dx, cy + dy, a[1], a[2], a[3], a[4]];\n            ch = \"C\";\n        } else if (ch === \"T\") {\n            dx = dy = 0;\n            if (preva && preva[0] === \"Q\")\n                dx = cx - preva[1], dy = cy - preva[2];\n            a = [\"Q\", cx + dx, cy + dy, a[1], a[2]];\n            ch = \"Q\";\n        }\n\n        // process command\n        if (!copen && ch !== \"M\") {\n            if (res.length !== 0 && res[res.length - 1][0] !== \"Z\")\n                res.push([\"M\"]);\n            copen = true;\n        }\n        if (ch === \"M\") {\n            cx0 = a[1];\n            cy0 = a[2];\n            copen = false;\n        } else if (ch === \"L\") {\n            res.push([\"L\", cx, cy, a[1], a[2]]);\n        } else if (ch === \"C\") {\n            res.push([\"C\", cx, cy, a[1], a[2], a[3], a[4], a[5], a[6]]);\n        } else if (ch === \"Q\") {\n            res.push([\"C\", cx, cy,\n                      cx + 2 * (a[1] - cx) / 3, cy + 2 * (a[2] - cy) / 3,\n                      a[3] + 2 * (a[1] - a[3]) / 3, a[4] + 2 * (a[2] - a[4]) / 3,\n                      a[3], a[4]]);\n        } else {\n            // XXX should render \"A\" as a bezier\n            if (++normalized_path_complaint == 1)\n                log_jserror(\"bad normalize \" + ch);\n            res.push(a);\n        }\n\n        preva = a;\n        cx = a[a.length - 2];\n        cy = a[a.length - 1];\n    }\n\n    if (normalized_path_cache_size >= 1000) {\n        normalized_path_cache = {};\n        normalized_path_cache_size = 0;\n    }\n    normalized_path_cache[s] = res;\n    ++normalized_path_cache_size;\n    return res;\n}\n\n\nfunction pathNodeMayBeNearer(pathNode, point, dist) {\n    function oob(l, t, r, b) {\n        return l - point[0] >= dist || point[0] - r >= dist\n            || t - point[1] >= dist || point[1] - b >= dist;\n    }\n    // check bounding rectangle of path\n    if (\"clientX\" in point) {\n        var bounds = pathNode.getBoundingClientRect(),\n            dx = point[0] - point.clientX, dy = point[1] - point.clientY;\n        if (bounds && oob(bounds.left + dx, bounds.top + dy,\n                          bounds.right + dx, bounds.bottom + dy)) {\n            return false;\n        }\n    }\n    // check path\n    var npsl = normalize(pathNode);\n    var l, t, r, b;\n    for (var i = 0; i !== npsl.length; ++i) {\n        var item = npsl[i];\n        if (item[0] === \"L\") {\n            l = Math.min(item[1], item[3]);\n            t = Math.min(item[2], item[4]);\n            r = Math.max(item[1], item[3]);\n            b = Math.max(item[2], item[4]);\n        } else if (item[0] === \"C\") {\n            l = Math.min(item[1], item[3], item[5], item[7]);\n            t = Math.min(item[2], item[4], item[6], item[8]);\n            r = Math.max(item[1], item[3], item[5], item[7]);\n            b = Math.max(item[2], item[4], item[6], item[8]);\n        } else if (item[0] === \"Z\" || item[0] === \"M\") {\n            continue;\n        } else {\n            return true;\n        }\n        if (!oob(l, t, r, b)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction path_x_distance2_buckets(pathNode, point) {\n    var npsl = normalize(pathNode);\n    function pdist(l, t, r, b) {\n        var xd = point[0] < l ? l - point[0] : (point[0] > r ? point[0] - r : 0),\n            yd = point[1] < t ? t - point[1] : (point[1] > b ? point[1] - b : 0);\n        return Math.max(xd, yd);\n    }\n    var xmin = Infinity, xmax = -Infinity, width = 24, i, item;\n    for (i = 0; i !== npsl.length; ++i) {\n        item = npsl[i];\n        if (item[0] === \"L\") {\n            xmin = Math.min(xmin, item[1], item[3]);\n            xmax = Math.max(xmax, item[1], item[3]);\n        } else if (item[0] === \"C\") {\n            xmin = Math.min(xmin, item[1], item[3], item[5], item[7]);\n            xmax = Math.max(xmax, item[1], item[3], item[5], item[7]);\n        }\n    }\n    xmin -= width;\n    xmax += width;\n    var n = Math.max(Math.ceil((xmax - xmin) / width), 1),\n        a = new Array(n + 1),\n        l, t, r, b, d;\n    a.fill(Infinity);\n    for (i = 0; i !== npsl.length; ++i) {\n        item = npsl[i];\n        if (item[0] === \"L\") {\n            l = Math.min(item[1], item[3]);\n            t = Math.min(item[2], item[4]);\n            r = Math.max(item[1], item[3]);\n            b = Math.max(item[2], item[4]);\n        } else if (item[0] === \"C\") {\n            l = Math.min(item[1], item[3], item[5], item[7]);\n            t = Math.min(item[2], item[4], item[6], item[8]);\n            r = Math.max(item[1], item[3], item[5], item[7]);\n            b = Math.max(item[2], item[4], item[6], item[8]);\n        } else {\n            continue;\n        }\n        d = pdist(l, t, r, b);\n        l = Math.floor((l - xmin) / width);\n        r = Math.ceil((r - xmin) / width);\n        while (l <= r) {\n            a[l] = Math.min(a[l], d);\n            ++l;\n        }\n    }\n    for (i = 0; i !== a.length; ++i) {\n        if (a[i] < Infinity)\n            a[i] = a[i] * a[i];\n    }\n    a.xmin = xmin;\n    a.xmax = xmax;\n    a.width = width;\n    a.point = point;\n    return a;\n}\n\nexport function closest_point(pathNode, point, inbest) {\n    // originally from Mike Bostock http://bl.ocks.org/mbostock/8027637\n    if (inbest && !pathNodeMayBeNearer(pathNode, point, inbest.distance)) {\n        return inbest;\n    }\n\n    var pathLength = pathNode.getTotalLength(),\n        pathSegments = svg_path_number_of_items(pathNode),\n        precision = Math.max(pathLength / pathSegments / 8, 4),\n        best, bestLength, sl,\n        bestDistance2 = inbest ? (inbest.distance + 0.01) * (inbest.distance + 0.01) : Infinity;\n\n    function check(pLength) {\n        var p = pathNode.getPointAtLength(pLength),\n            dx = point[0] - p.x, dy = point[1] - p.y,\n            d2 = dx * dx + dy * dy;\n        if (d2 < bestDistance2) {\n            best = [p.x, p.y];\n            bestLength = pLength;\n            bestDistance2 = d2;\n        }\n        return p;\n    }\n\n    if (pathSegments > 20) {\n        // big-step/small-step\n        var xdb = path_x_distance2_buckets(pathNode, point),\n            xmin = xdb.xmin, width = xdb.width, p, xx;\n        for (sl = 0; sl < pathLength; ) {\n            p = check(sl);\n            xx = Math.floor((p.x - xmin) / width);\n            if (xdb[xx] > bestDistance2\n                && xdb[xx-1] > bestDistance2\n                && xdb[xx+1] > bestDistance2)\n                sl += width;\n            else\n                sl += precision;\n        }\n    } else {\n        // linear scan for coarse approximation\n        for (sl = 0; sl < pathLength; sl += precision)\n            check(sl);\n    }\n    // edge condition: always check both ends\n    check(pathLength);\n\n    // binary search for precise estimate\n    do {\n        sl = bestLength - precision / 2;\n        sl > 0 && check(sl);\n        sl += precision;\n        sl < pathLength && check(sl);\n        precision /= 2;\n    } while (precision > 0.5);\n\n    if (best) {\n        best.distance = Math.sqrt(bestDistance2);\n        best.pathNode = pathNode;\n        best.pathLength = bestLength;\n    }\n    if (best && (!inbest || best.distance <= inbest.distance + 0.01)) {\n        return best;\n    } else {\n        return inbest;\n    }\n}\n\nexport function tangent_angle(pathNode, length) {\n    var length0 = Math.max(0, length - 0.25);\n    if (length0 == length)\n        length += 0.25;\n    var p0 = pathNode.getPointAtLength(length0),\n        p1 = pathNode.getPointAtLength(length);\n    return Math.atan2(p1.y - p0.y, p1.x - p0.x);\n}\n\nexport function event_to_point(element, event) {\n    // borrowed from D3\n    var svg = element.ownerSVGElement || element, point;\n    if (svg.createSVGPoint) {\n        point = svg.createSVGPoint();\n        point.x = event.clientX;\n        point.y = event.clientY;\n        point = point.matrixTransform(element.getScreenCTM().inverse());\n    } else {\n        var rect = element.getBoundingClientRect();\n        point = {x: event.clientX - rect.left - element.clientLeft,\n                 y: event.clientY - rect.top - element.clientTop};\n    }\n    var result = [point.x, point.y];\n    result.clientX = event.clientX;\n    result.clientY = event.clientY;\n    return result;\n}\n","// ui-history.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport let push_history_state;\n\nif (\"pushState\" in window.history) {\n    push_history_state = function (href) {\n        var state;\n        if (!history.state) {\n            state = {href: location.href};\n            $(document).trigger(\"collectState\", [state]);\n            history.replaceState(state, document.title, state.href);\n        }\n        if (href) {\n            state = {href: href};\n            $(document).trigger(\"collectState\", [state]);\n            history.pushState(state, document.title, state.href);\n        }\n        return true;\n    };\n} else {\n    push_history_state = function () { return false; };\n}\n","// intervalseq.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2020 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nexport default class IntervalSeq {\n    constructor() {\n        this.is = [];\n    }\n    lower(x) {\n        var is = this.is, l = 0, r = is.length;\n        while (l < r) {\n            var m = l + ((r - l) >> 2) * 2;\n            if (is[m] > x)\n                r = m;\n            else if (x > is[m + 1])\n                l = m + 2;\n            else /* is[m] <= x <= is[m + 1] */\n                return m;\n        }\n        return l;\n    }\n    contains(x) {\n        var i = this.lower(x);\n        return i < this.is.length && x >= this.is[i];\n    }\n    overlaps(lo, hi) {\n        var i = this.lower(lo);\n        return i < this.is.length && hi >= this.is[i];\n    }\n    add(lo, hi) {\n        var is = this.is, i = this.lower(lo);\n        if (i >= is.length || lo < is[i])\n            is.splice(i, 0, lo, lo);\n        var j = i;\n        while (j + 2 < is.length && hi >= is[j + 2])\n            j += 2;\n        if (j !== i)\n            is.splice(i + 1, j - i);\n        is[i + 1] = Math.max(is[i + 1], hi);\n    }\n    clear() {\n        this.is = [];\n    }\n}\n","// gradegraph.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport * as svgutil from \"./svgpathutil.js\";\nimport IntervalSeq from \"./intervalseq.js\";\nimport { sprintf } from \"./utils.js\";\nimport { hasClass, addClass } from \"./ui.js\";\nimport { GradeClass } from \"./gc.js\";\n\nfunction mksvg(tag) {\n    return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\nexport class GradeGraph {\n    constructor(parent, d, plot_type) {\n        const $parent = $(parent);\n\n        let mainplot = \"all\";\n        if (plot_type.indexOf(\"extension\") >= 0) {\n            mainplot = \"extension\";\n        } else if (plot_type.indexOf(\"noextra\") >= 0) {\n            mainplot = \"noextra\";\n        }\n        const dd = d.series[mainplot] || d.series.all,\n            ddmin = dd.min();\n        let xmin = ddmin < 0 ? ddmin - 1 : 0;\n        if (d.entry && d.entry.type === \"letter\") {\n            xmin = Math.min(65, ddmin < 0 ? ddmin : Math.max(ddmin - 5, 0));\n        }\n        this.min = xmin;\n        this.max = dd.max();\n        if (d.maxtotal) {\n            this.max = Math.max(this.max, d.maxtotal);\n        }\n        if (this.min == this.max) {\n            xmin = this.min = this.min - 1;\n            this.max += 1;\n        }\n        this.total = d.maxtotal;\n        this.cutoff = dd.cutoff;\n\n        this.svg = mksvg(\"svg\");\n        this.gg = mksvg(\"g\");\n        this.gx = mksvg(\"g\");\n        this.gy = mksvg(\"g\");\n        this.xl = this.xt = true;\n        this.yl = this.yt = plot_type.substring(0, 3) !== \"pdf\";\n        this.tw = $parent.width();\n        this.th = $parent.height();\n        this.svg.setAttribute(\"preserveAspectRatio\", \"none\");\n        this.svg.setAttribute(\"width\", this.tw);\n        this.svg.setAttribute(\"height\", this.th);\n        this.svg.setAttribute(\"overflow\", \"visible\");\n        this.svg.appendChild(this.gg);\n        this.gx.setAttribute(\"class\", \"pa-gg-axis pa-gg-xaxis\");\n        this.svg.appendChild(this.gx);\n        this.gy.setAttribute(\"class\", \"pa-gg-axis pa-gg-yaxis\");\n        this.svg.appendChild(this.gy);\n        this.maxp = 0;\n        this.hoveranno = null;\n        this.hoveron = false;\n        $parent.html(this.svg);\n\n        const digits = mksvg(\"text\");\n        digits.appendChild(document.createTextNode(\"888\"));\n        this.gx.appendChild(digits);\n        var domr = digits.getBBox();\n        this.xdw = domr.width / 3;\n        this.xdh = domr.height;\n        this.gx.removeChild(digits);\n\n        this.xlw = this.xdw * (this.max > 0 ? Math.floor(Math.log10(this.max)) + 1 : 1);\n\n        this.mt = Math.ceil(Math.max(this.yl ? this.xdh / 2 : 0, 2));\n        this.mr = Math.ceil(this.xl ? this.xlw / 2 : 0);\n        this.mb = (this.xt ? 5 : 0) + (this.xl ? this.xdh + 3 : 0);\n        if (this.yl) {\n            const h = this.th - this.mt - Math.max(this.mb, Math.ceil(this.xdh / 2));\n            if (h > this.xdh) {\n                var minyaxis = $parent.hasClass(\"pa-grgraph-min-yaxis\");\n                if (minyaxis) {\n                    this.yfmt = \"%.0r%%\";\n                } else {\n                    this.yfmt = \"%.0r\";\n                }\n                const labelcap = h / this.xdh;\n                this.ymax = 100;\n                if (labelcap > 15) {\n                    this.ylu = 10;\n                } else if (labelcap > 5) {\n                    this.ylu = 25;\n                } else if (labelcap > 3) {\n                    this.ylu = 50;\n                } else {\n                    this.ylu = 100;\n                }\n                this.ml = (this.yt ? 5 : 0) + 5 + (minyaxis ? 4.2 : 3) * this.xdw;\n\n                if (!$parent.hasClass(\"pa-grgraph-min-yaxis\")) {\n                    this.yltext = mksvg(\"text\");\n                    this.yltext.appendChild(document.createTextNode(\"% of grades\"));\n                    this.gy.appendChild(this.yltext);\n                    domr = this.yltext.getBBox();\n                    if (domr.width <= 0.875 * h) {\n                        this.ml += this.xdw * 0.5 + this.xdh;\n                    } else {\n                        this.gy.removeText(this.yltext);\n                        this.yltext = null;\n                    }\n                }\n\n                this.mb = Math.max(this.mb, Math.ceil(this.xdh / 2));\n            } else {\n                this.yl = false;\n                this.ml = 0;\n                this.mt = 2;\n            }\n        } else {\n            this.ml = this.yt ? 5 : 0;\n        }\n        if (this.xl) {\n            this.ml = Math.max(this.ml, Math.ceil(this.xdw / 2));\n        }\n\n        this.gw = this.tw - this.ml - this.mr;\n        var gh = this.gh = this.th - this.mt - this.mb;\n        const xfactor = this.gw / Math.max(this.max - this.min, 0.001);\n        this.xax = function (x) {\n            return (x - xmin) * xfactor;\n        };\n        this.yax = function (y) {\n            return gh - y * gh;\n        };\n        this.unxax = function (ax) {\n            return (ax / xfactor) + xmin;\n        };\n        this.unyax = function (ay) {\n            return -(ay - gh) / gh;\n        };\n        if (d.entry && d.entry.type) {\n            const gt = GradeClass.find(d.entry.type);\n            if (gt && gt.tics)\n                this.xtics = gt.tics.call(gt);\n        }\n        if (this.max - this.min > 900) {\n            this.xfmt = \"%.0r\";\n        } else if (this.max - this.min > 10) {\n            this.xfmt = \"%.1r\";\n        } else {\n            this.xfmt = \"%.3r\";\n        }\n\n        this.gg.setAttribute(\"transform\", `translate(${this.ml},${this.mt})`);\n        this.gx.setAttribute(\"transform\", `translate(${this.ml},${this.mt + this.gh + (this.xt ? 2 : -5)})`);\n        this.gy.setAttribute(\"transform\", `translate(${this.ml + (this.yt ? -2 : 5)},${this.mt})`);\n\n        this.hlcurve = null;\n        this.hlcurve_series = null;\n        this.hlcurve_priority = null;\n        this.hlcurve_ucdf = null;\n    }\n\n    #numeric_xaxis() {\n        // determine number\n        const ndigit_max = Math.floor(Math.log10(this.max)) + 1,\n            labelw = this.xdw * (ndigit_max + 0.5),\n            labelcap = this.gw / labelw;\n\n        const unitbase = Math.pow(10, Math.max(0, ndigit_max - 2)),\n            nunits = (this.max - this.min) / unitbase;\n        let unit;\n        if (labelcap > nunits * 4 && unitbase > 1) {\n            unit = unitbase / 2;\n        } else if (labelcap > nunits * 2) {\n            unit = unitbase;\n        } else if (labelcap > nunits * (unitbase <= 1 ? 0.75 : 1)) {\n            unit = 2 * unitbase;\n        } else if (unitbase > 1 && labelcap > nunits * 0.6) {\n            unit = 2.5 * unitbase;\n        } else if (labelcap > nunits * 0.3) {\n            unit = 5 * unitbase;\n        } else {\n            unit = 10 * unitbase;\n        }\n\n        const d = [];\n        let x = Math.floor(this.min / unit) * unit, total_done = false;\n        while (x < this.max + unit) {\n            let xx = x, draw = this.xl;\n            if (this.total) {\n                if (xx > this.total\n                    && xx - unit < this.total\n                    && !total_done) {\n                    xx = this.total;\n                    x -= unit;\n                }\n                if (xx == this.total) {\n                    total_done = true;\n                }\n            }\n            x += unit;\n            if (xx < this.min) {\n                continue;\n            }\n            if (xx > this.max) {\n                xx = this.max;\n            }\n\n            const xxv = this.xax(xx);\n            d.push(\"M\", xxv, \",0v5\");\n\n            if ((this.total\n                 && xx != this.total\n                 && Math.abs(xxv - this.xax(this.total)) < labelw)\n                || (xx != this.max\n                    && xx != this.total\n                    && Math.abs(xxv - this.xax(this.max)) < labelw)) {\n                draw = false;\n            }\n\n            if (draw) {\n                const e = mksvg(\"text\");\n                e.appendChild(document.createTextNode(xx));\n                e.setAttribute(\"x\", xxv);\n                e.setAttribute(\"y\", this.xdh + 3);\n                this.gx.appendChild(e);\n            }\n        }\n\n        if (this.xt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gx.appendChild(e);\n        }\n    }\n\n    #xtics_xaxis() {\n        // determine number\n        let label_restrictions = new IntervalSeq,\n            tic_restrictions = new IntervalSeq,\n            d = [];\n\n        for (let i = 0; i !== this.xtics.length; ++i) {\n            let xt = this.xtics[i];\n            if (xt.x < this.min || xt.x > this.max) {\n                continue;\n            }\n            let xxv = this.xax(xt.x);\n            if (xt.notic || !tic_restrictions.contains(xxv)) {\n                if (!xt.notic) {\n                    d.push(\"M\", xxv, \",0v5\");\n                    tic_restrictions.add(xxv - 3, xxv + 3);\n                }\n\n                if (this.xl && xt.text) {\n                    let lw = this.xdw * (xt.label_space || xt.text.length + 0.5) * 0.5;\n                    if (!label_restrictions.overlaps(xxv - lw, xxv + lw)) {\n                        const e = mksvg(\"text\");\n                        e.appendChild(document.createTextNode(xt.text));\n                        e.setAttribute(\"x\", xxv);\n                        e.setAttribute(\"y\", this.xdh + 3);\n                        this.gx.appendChild(e);\n                        lw = this.xdw * (xt.text.length + 0.5) * 0.5;\n                        label_restrictions.add(xxv - lw, xxv + lw);\n                    }\n                }\n            }\n        }\n\n        if (this.xt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gx.appendChild(e);\n        }\n    }\n\n    xaxis() {\n        if (this.xtics) {\n            this.#xtics_xaxis();\n        } else {\n            this.#numeric_xaxis();\n        }\n    }\n\n    yaxis() {\n        const d = [];\n        let y = 0;\n        while (y <= this.ymax && this.yl) {\n            const e = mksvg(\"text\");\n            e.appendChild(document.createTextNode(sprintf(this.yfmt, y)));\n            e.setAttribute(\"x\", -8);\n            e.setAttribute(\"y\", this.yax(y / this.ymax) + 0.25 * this.xdh);\n            this.gy.appendChild(e);\n\n            d.push(\"M-5,\", this.yax(y / this.ymax), \"h5\");\n\n            y += this.ylu;\n        }\n\n        if (this.yt) {\n            const e = mksvg(\"path\");\n            e.setAttribute(\"d\", d.join(\"\"));\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gy.appendChild(e);\n        }\n\n        if (this.yltext) {\n            this.yltext.setAttribute(\"transform\", \"translate(\" + (-this.ml + this.xdh) + \",\" + this.yax(0.5) + \") rotate(-90)\");\n            this.yltext.setAttribute(\"text-anchor\", \"middle\");\n        }\n    }\n\n    container() {\n        return this.svg.closest(\".pa-grgraph\");\n    }\n\n    #add_path_curve(d, klass, series, prio) {\n        const path = mksvg(\"path\");\n        path.setAttribute(\"d\", d);\n        path.setAttribute(\"fill\", \"none\");\n        path.setAttribute(\"class\", klass);\n        this.gg.appendChild(path);\n        if (prio == null) {\n            prio = 0;\n        }\n        if (this.hlcurve_priority == null || this.hlcurve_priority <= prio) {\n            this.hlcurve = path;\n            this.hlcurve_series = series;\n            this.hlcurve_priority = prio;\n            this.hlcurve_ucdf = null;\n        }\n        return path;\n    }\n\n    append_cdf(d, klass, prio) {\n        const cdf = d.cdf, data = [], nr = 1 / d.n,\n              cutoff = this.cutoff || 0, xmin = this.min;\n        let i = 0;\n        if (cutoff && cdf.length > 0 && cdf[0] > xmin) {\n            const path = mksvg(\"path\"),\n                x = Math.max(xmin, cdf[0] - 0.5);\n            path.setAttribute(\"d\", `M${this.xax(xmin)},${this.yax(0)}L${this.xax(x)},${this.yax(cutoff)}`);\n            path.setAttribute(\"fill\", \"none\");\n            path.setAttribute(\"class\", klass + \" pa-gg-cutoff\");\n            this.gg.appendChild(path);\n        }\n        for (; i < cdf.length; i += 2) {\n            if (data.length !== 0) {\n                const x = Math.max(xmin, cdf[i] - Math.min(1, cdf[i] - cdf[i-2]) / 2);\n                data.push(`H${this.xax(x)}`);\n            } else {\n                data.push(`M${this.xax(Math.max(xmin, cdf[i] - 0.5))},${this.yax(cutoff)}`);\n            }\n            data.push(`V${this.yax(cdf[i+1] * nr)}`);\n        }\n        if (data.length !== 0) {\n            data.push(`H${this.xax(Math.max(this.max, cdf[cdf.length-2]))}`);\n        }\n        return this.#add_path_curve(data.join(\"\"), klass, d, prio);\n    }\n\n    append_pdf(kde, klass, prio) {\n        if (kde.maxp === 0) {\n            return null;\n        }\n        const data = [], bins = kde.kde, nrdy = 0.9 / this.maxp,\n            xax = this.xax, yax = this.yax;\n        let xcutoff = null;\n        if (this.cutoff && kde.series.cdf.length > 0) {\n            xcutoff = this.xax(kde.series.cdf[0]);\n        }\n        // adapted from d3-shape by Mike Bostock\n        const xs = [0, 0, 0, 0], ys = [0, 0, 0, 0],\n            la = [0, 0, 0, 0], la2 = [0, 0, 0, 0],\n            epsilon = 1e-6;\n        function point(i2) {\n            const i0 = (i2 + 2) % 4, i1 = (i2 + 3) % 4, i3 = (i2 + 1) % 4;\n            let x1 = xs[i1], y1 = ys[i1], x2 = xs[i2], y2 = ys[i2];\n            if (la[i1] > epsilon) {\n                let a = 2 * la2[i1] + 3 * la[i1] * la[i2] + la2[i2],\n                    n = 3 * la[i1] * (la[i1] + la[i2]);\n                x1 = (x1 * a - xs[i0] * la2[i2] + xs[i2] * la2[i1]) / n;\n                y1 = (y1 * a - ys[i0] * la2[i2] + ys[i2] * la2[i1]) / n;\n            }\n            if (la[i3] > epsilon) {\n                let b = 2 * la2[i3] + 3 * la[i3] * la[i2] + la2[i2],\n                    m = 3 * la[i3] * (la[i3] + la[i2]);\n                x2 = (x2 * b - xs[i3] * la2[i2] + xs[i1] * la2[i3]) / m;\n                y2 = (y2 * b - ys[i3] * la2[i2] + ys[i1] * la2[i3]) / m;\n            }\n            data.push(`C${x1},${y1} ${x2},${y2} ${xs[i2]},${ys[i2]}`);\n        }\n        for (let i = 0; i !== bins.length; ++i) {\n            const x = xax(this.min + i * kde.binwidth),\n                y = yax(bins[i] * nrdy);\n            if (i === 0) {\n                data.push(`M${x},${y}`);\n                xs[3] = xs[0] = x;\n                ys[3] = ys[0] = y;\n            } else {\n                const i1 = (i + 3) % 4, i2 = i % 4;\n                xs[i2] = x;\n                ys[i2] = y;\n\n                const dx = xs[i1] - x, dy = ys[i1] - y;\n                la2[i2] = Math.sqrt(dx * dx + dy * dy);\n                la[i2] = Math.sqrt(la2[i2]);\n\n                if (i > 1) {\n                    point(i1);\n                    if (xcutoff != null && xs[i1] > xcutoff) {\n                        this.#add_path_curve(data.join(\"\"), klass + \" pa-gg-cutoff\", kde.series, prio);\n                        data.splice(0);\n                        data.push(`M${xs[i1]},${ys[i1]}`);\n                        xcutoff = null;\n                    }\n                }\n\n                if (i === bins.length - 1) {\n                    const i3 = (i + 1) % 4;\n                    xs[i3] = x;\n                    ys[i3] = y;\n                    la2[i3] = 0;\n                    la[i3] = 0;\n                    point(i2);\n                }\n            }\n        }\n        return this.#add_path_curve(data.join(\"\"), klass, kde.series, prio);\n    }\n\n    remove_if(predicate) {\n        let e = this.gg.firstChild;\n        while (e) {\n            const next = e.nextSibling;\n            if (predicate.call(e)) {\n                this.gg.removeChild(e);\n            }\n            e = next;\n        }\n    }\n\n    highlight(d, predicate, klass) {\n        if (!this.hlcurve || !this.hlcurve_series.cdfu) {\n            return null;\n        }\n        const ispdf = hasClass(this.hlcurve, \"pa-gg-pdf\"),\n            cdf = this.hlcurve_series.cdf,\n            cdfu = this.hlcurve_series.cdfu,\n            data = [];\n        let nr, nrgh, i, ui, xv, yv, yc;\n        if (ispdf) {\n            nr = 0.9 / (this.maxp * d.n);\n        } else {\n            nr = 1 / d.n;\n        }\n        nrgh = nr * this.gh;\n        for (i = ui = 0; i !== cdf.length; i += 2) {\n            for (yc = 0; ui !== cdf[i + 1]; ++ui) {\n                if (predicate(cdfu[ui], d))\n                    ++yc;\n            }\n            if (yc) {\n                xv = this.xax(cdf[i]);\n                if (ispdf) {\n                    yv = svgutil.eval_function_path.call(this.hlcurve, xv);\n                } else {\n                    yv = this.yax(cdf[i+1] * nr);\n                }\n                if (yv != null) {\n                    data.push(`M${xv},${yv}v${yc * nrgh}`);\n                }\n            }\n        }\n        if (!data.length) {\n            return null;\n        }\n        const path = mksvg(\"path\");\n        path.setAttribute(\"d\", data.join(\"\"));\n        path.setAttribute(\"fill\", \"none\");\n        path.setAttribute(\"class\", klass);\n        this.gg.appendChild(path);\n        addClass(this.gg, \"pa-gg-has-hl\");\n        return path;\n    }\n\n    typed_annotation(klass) {\n        const dot = mksvg(\"circle\");\n        dot.setAttribute(\"class\", \"pa-gg-mark hl-\" + (klass || \"main\"));\n        dot.setAttribute(\"r\", !klass || klass === \"main\" ? 5 : 3.5);\n        return dot;\n    }\n\n    star_annotation(rs, start, n, klass) {\n        if (start == null) {\n            start = Math.PI / 2;\n        }\n        if (n == null) {\n            n = 5;\n        }\n        var star = mksvg(\"path\");\n        star.setAttribute(\"class\", klass);\n        var d = [\"M\"], cos = Math.cos, sin = Math.sin, delta = Math.PI / n;\n        for (var i = 0; i < 2 * n; ++i) {\n            d.push(rs[i & 1] * cos(start), \",\", rs[i & 1] * sin(start), i ? \" \" : \"L\");\n            start += delta;\n        }\n        d.push(\"z\");\n        star.setAttribute(\"d\", d.join(\"\"));\n        return star;\n    }\n\n    annotate(x, elt, after) {\n        if (!this.hlcurve)\n            return false;\n        let xv = this.xax(x), yv = svgutil.eval_function_path.call(this.hlcurve, xv);\n        if (yv === null && this.cutoff) {\n            const yv0 = this.yax(0), yv1 = this.yax(this.cutoff),\n                frac = (x - this.min) / (this.hlcurve_series.cdf[0] - this.min);\n            yv = yv0 + (yv1 - yv0) * frac;\n        }\n        if (yv === null)\n            return false;\n        elt = elt || this.typed_annotation();\n        elt.setAttribute(\"transform\", `translate(${xv},${yv})`);\n        this.gg.insertBefore(elt, after || null);\n        return true;\n    }\n\n    user_x(uid) {\n        let ucdf = this.hlcurve_ucdf;\n        if (!ucdf) {\n            if (!this.hlcurve_series || !this.hlcurve_series.cdfu) {\n                return undefined;\n            }\n            const cdf = this.hlcurve_series.cdf,\n                cdfu = this.hlcurve_series.cdfu;\n            this.hlcurve_ucdf = ucdf = {};\n            let i = 0;\n            for (let ui = 0; ui !== cdfu.length; ++ui) {\n                while (ui >= cdf[i + 1]) {\n                    i += 2;\n                }\n                ucdf[cdfu[ui]] = cdf[i];\n            }\n        }\n        return ucdf[uid];\n    }\n\n    highlight_users() {\n        if (!this.hlcurve_series || !this.hlcurve_series.cdfu) {\n            return;\n        }\n\n        this.last_highlight = this.last_highlight || {};\n        const attrs = this.container().attributes, desired = {};\n        for (let i = 0; i !== attrs.length; ++i) {\n            if (attrs[i].name.startsWith(\"data-pa-highlight\")) {\n                let type;\n                if (attrs[i].name === \"data-pa-highlight\") {\n                    type = \"main\";\n                } else {\n                    type = attrs[i].name.substring(18);\n                }\n                desired[type] = attrs[i].value;\n                this.last_highlight[type] = this.last_highlight[type] || \"\";\n            }\n        }\n\n        for (let type in this.last_highlight) {\n            var uids = desired[type] || \"\";\n            if (this.last_highlight[type] === uids) {\n                continue;\n            }\n\n            const uidm = {}, uidx = uids.split(/\\s+/);\n            for (const uid of uidx) {\n                if (uid !== \"\")\n                    uidm[uid] = 1;\n            }\n\n            var el = this.gg.firstChild, elnext;\n            var klass = \"pa-gg-mark hl-\" + type;\n            while (el && (!hasClass(el, \"pa-gg-mark\") || el.className.animVal < klass)) {\n                el = el.nextSibling;\n            }\n\n            while (el && el.className.animVal === klass) {\n                elnext = el.nextSibling;\n                const uid = +el.getAttribute(\"data-pa-uid\");\n                if (uidm[uid]) {\n                    uidm[uid] = 2;\n                } else {\n                    this.gg.removeChild(el);\n                }\n                el = elnext;\n            }\n\n            for (const uid in uidm) {\n                if (uidm[uid] !== 1) {\n                    continue;\n                }\n                const x = this.user_x(uid);\n                if (x != null) {\n                    const e = this.typed_annotation(type);\n                    e.setAttribute(\"data-pa-uid\", uid);\n                    this.annotate(x, e, el);\n                }\n            }\n\n            this.last_highlight[type] = uids;\n        }\n    }\n\n    hover() {\n        const that = this;\n        function handle(event) {\n            that.#handle_hover(this, event);\n        }\n        this.svg.addEventListener(\"mouseenter\", handle, false);\n        this.svg.addEventListener(\"mousemove\", handle, false);\n        this.svg.addEventListener(\"mouseleave\", handle, false);\n    }\n\n    #handle_hover(elt, event) {\n        let pt = {distance: 20}, xfmt = this.xfmt;\n        if (event.type !== \"mousemove\") {\n            this.hoveron = event.type !== \"mouseleave\";\n        }\n        if (this.hoveron) {\n            const loc = svgutil.event_to_point(this.svg, event),\n                paths = this.gg.querySelectorAll(\".pa-gg-pdf, .pa-gg-cdf\");\n            loc[0] -= this.ml;\n            loc[1] -= this.mt;\n            for (var p of paths) {\n                pt = svgutil.closest_point(p, loc, pt);\n            }\n            if (pt.pathNode) {\n                const hlpt = closer_mark(this.gg.querySelectorAll(\".pa-gg-mark.hl-main\"), pt, 36)\n                    || closer_mark(this.gg.querySelectorAll(\".pa-gg-mark:not(.hl-main)\"), pt, 25);\n                if (hlpt) {\n                    pt = hlpt;\n                    if (xfmt === \"%.0r\" || xfmt === \"%.1f\") {\n                        xfmt = \"%.2r\";\n                    }\n                }\n            }\n        }\n        if (!pt.pathNode) {\n            this.hoveranno && this.#remove_hover();\n            return;\n        }\n\n        const ha = this.hoveranno || this.#create_hover();\n        ha[0].setAttribute(\"transform\", `translate(${pt[0]},${pt[1]})`);\n\n        ha[1].setAttribute(\"transform\", `translate(${pt[0]},0)`);\n        ha[3].setAttribute(\"x\", pt[0]);\n        ha[3].firstChild.data = sprintf(xfmt, this.unxax(pt[0]));\n        var bb = ha[3].getBBox();\n        ha[2].setAttribute(\"x\", pt[0] - bb.width / 2 - 2);\n        ha[2].setAttribute(\"width\", bb.width + 4);\n\n        let ptconf, s, name;\n        if (pt.pathNode.hasAttribute(\"data-pa-uid\")\n            && (ptconf = elt.closest(\"form\").pa__ptconf)\n            && (s = ptconf.uidmap[pt.pathNode.getAttribute(\"data-pa-uid\")])\n            && (name = ptconf.render_tooltip_name(s))) {\n            ha[4].firstChild.data = name;\n            ha[4].setAttribute(\"x\", pt[0]);\n            ha[4].setAttribute(\"y\", pt[1]);\n        } else {\n            ha[4].firstChild.data = \"\";\n        }\n\n        if (this.yl) {\n            const yv = this.unyax(pt[1]);\n            if (this.cutoff && (yv < this.cutoff) !== ha[8]) {\n                if ((ha[8] = yv < this.cutoff)) {\n                    ha[5].setAttribute(\"visibility\", \"hidden\");\n                    ha[6].setAttribute(\"visibility\", \"hidden\");\n                    ha[7].setAttribute(\"visibility\", \"hidden\");\n                } else {\n                    ha[5].removeAttribute(\"visibility\");\n                    ha[6].removeAttribute(\"visibility\");\n                    ha[7].removeAttribute(\"visibility\");\n                }\n            }\n            ha[5].setAttribute(\"transform\", `translate(0,${pt[1]})`);\n            ha[7].setAttribute(\"y\", pt[1] + 0.25 * this.xdh);\n            ha[7].firstChild.data = sprintf(this.yfmt, yv * this.ymax);\n            bb = ha[7].getBBox();\n            ha[6].setAttribute(\"x\", -bb.width - 10);\n            ha[6].setAttribute(\"y\", pt[1] - (this.xdh + 2) / 2);\n            ha[6].setAttribute(\"width\", bb.width + 4);\n        }\n    }\n\n    #create_hover() {\n        const ha = this.hoveranno = [this.star_annotation([4, 10], null, null, \"pa-gg-hover-mark\")];\n        this.gg.appendChild(ha[0]);\n\n        let e = mksvg(\"path\");\n        e.setAttribute(\"d\", \"M0,0v5\");\n        e.setAttribute(\"fill\", \"none\");\n        e.setAttribute(\"stroke\", \"black\");\n        this.gx.appendChild(e);\n        ha.push(e);\n\n        e = mksvg(\"rect\");\n        e.setAttribute(\"class\", \"pa-gg-hover-box\");\n        e.setAttribute(\"y\", 5);\n        e.setAttribute(\"height\", this.xdh + 1.5);\n        e.setAttribute(\"rx\", 3);\n        this.gx.appendChild(e);\n        ha.push(e);\n\n        e = mksvg(\"text\");\n        e.appendChild(document.createTextNode(\"\"));\n        e.setAttribute(\"class\", \"pa-gg-hover-text\");\n        e.setAttribute(\"y\", this.xdh + 3);\n        this.gx.appendChild(e);\n        ha.push(e);\n\n        e = mksvg(\"text\");\n        e.appendChild(document.createTextNode(\"\"));\n        e.setAttribute(\"class\", \"pa-gg-anno-name\");\n        e.setAttribute(\"text-anchor\", \"end\");\n        e.setAttribute(\"dx\", -8);\n        this.gg.appendChild(e);\n        ha.push(e);\n\n        if (this.yl) {\n            e = mksvg(\"path\");\n            e.setAttribute(\"d\", \"M-5,0h5\");\n            e.setAttribute(\"fill\", \"none\");\n            e.setAttribute(\"stroke\", \"black\");\n            this.gy.appendChild(e);\n            ha.push(e);\n\n            e = mksvg(\"rect\");\n            e.setAttribute(\"class\", \"pa-gg-hover-box\");\n            e.setAttribute(\"height\", this.xdh + 1);\n            e.setAttribute(\"rx\", 3);\n            this.gy.appendChild(e);\n            ha.push(e);\n\n            e = mksvg(\"text\");\n            e.appendChild(document.createTextNode(\"\"));\n            e.setAttribute(\"class\", \"pa-gg-hover-text\");\n            e.setAttribute(\"x\", -8);\n            this.gy.appendChild(e);\n            ha.push(e);\n\n            if (this.cutoff) {\n                ha.push(false);\n            }\n        }\n\n        return ha;\n    }\n\n    #remove_hover() {\n        const ha = this.hoveranno;\n        this.gg.removeChild(ha[0]);\n        this.gx.removeChild(ha[1]);\n        this.gx.removeChild(ha[2]);\n        this.gx.removeChild(ha[3]);\n        this.gg.removeChild(ha[4]);\n        if (this.yl) {\n            this.gy.removeChild(ha[5]);\n            this.gy.removeChild(ha[6]);\n            this.gy.removeChild(ha[7]);\n        }\n        this.hoveranno = null;\n    }\n}\n\n\nfunction closer_mark(hlpaths, pt, bestDistance2) {\n    let hlpt = null;\n    for (const hlp of hlpaths) {\n        const m = hlp.getAttribute(\"transform\").match(/^translate\\(([-+\\d.]+),([-+\\d.]+)\\)$/);\n        if (m) {\n            const dx = +m[1] - pt[0], dy = +m[2] - pt[1],\n                distance2 = dx * dx + dy * dy;\n            if (distance2 < bestDistance2) {\n                hlpt = [+m[1], +m[2]];\n                hlpt.pathNode = hlp;\n                bestDistance2 = distance2;\n            }\n        }\n    }\n    hlpt && (hlpt.distance = Math.sqrt(bestDistance2));\n    return hlpt;\n}\n","// gradestats.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nclass GradeSeries {\n    n;\n    cdf;\n    cdfu;\n    mean;\n    median;\n    stddev;\n    cutoff;\n\n    constructor(d) {\n        if (d) {\n            this.n = d.n;\n            this.cdf = d.cdf;\n            this.cdfu = d.cdfu || null;\n            this.mean = d.mean || null;\n            this.median = d.median || null;\n            this.stddev = d.stddev || null;\n            this.cutoff = d.cutoff || null;\n        }\n    }\n\n    static from_sorted_array(a) {\n        const cdf = [];\n        let ci = -2, n = 0;\n        for (const x of a) {\n            ++n;\n            if (ci < 0 || cdf[ci] !== x) {\n                cdf.push(x, n);\n                ci += 2;\n            } else {\n                cdf[ci + 1] = n;\n            }\n        }\n        return new GradeSeries({n: n, cdf: cdf});\n    }\n\n    check() {\n        if (!this.cdf) {\n            this.#fail_check();\n        }\n        if (this.n === 0 ? this.cdf.length > 0 : this.cdf[this.cdf.length - 1] !== this.n) {\n            this.#fail_check();\n        }\n        if (this.cdfu && this.cdfu.length !== this.n) {\n            this.#fail_check();\n        }\n        for (let ci = 0; ci !== this.cdf.length; ci += 2) {\n            if (this.cdf[ci + 1] <= 0\n                || (ci > 0 && this.cdf[ci + 1] <= this.cdf[ci - 1])\n                || (ci > 0 && this.cdf[ci] <= this.cdf[ci - 2])) {\n                this.#fail_check();\n            }\n        }\n    }\n\n    #fail_check() {\n        throw new Error;\n    }\n\n    min() {\n        return this.n > 0 ? this.cdf[0] : 0;\n    }\n\n    max() {\n        return this.n > 0 ? this.cdf[this.cdf.length - 2] : 0;\n    }\n\n    #x_lower_bound(x) {\n        const cdf = this.cdf;\n        let l = 0, r = cdf.length;\n        while (l + 2 < r) {\n            const m = l + (((r - l) >> 1) & ~1);\n            if (cdf[m] > x) {\n                r = m;\n            } else {\n                l = m;\n            }\n        }\n        return l;\n    }\n\n    #y_lower_bound(y) {\n        const cdf = this.cdf;\n        let l = 0, r = cdf.length;\n        while (l + 2 < r) {\n            const m = l + (((r - l) >> 1) & ~1);\n            if (m > 0 && cdf[m - 1] <= y) {\n                l = m;\n            } else {\n                r = m;\n            }\n        }\n        return l;\n    }\n\n    count_at(x) {\n        const ci = this.#x_lower_bound(x);\n        if (this.n === 0 || x < this.cdf[ci]) {\n            return 0;\n        }\n        return this.cdf[ci + 1];\n    }\n\n    quantile(p) {\n        if (this.n === 0) {\n            return 0;\n        }\n        const pos = p * (this.n - 1),\n            poslb = pos | 0,\n            ci = this.#y_lower_bound(poslb);\n        if (pos === poslb\n            || poslb < 0\n            || poslb > this.n - 1\n            || poslb + 1 < this.cdf[ci + 1]) {\n            return this.cdf[ci];\n        }\n        return this.cdf[ci] + (pos - poslb) * (this.cdf[ci + 2] - this.cdf[ci]);\n    }\n\n    #slice(n) {\n        const r = new GradeSeries;\n        r.n = n;\n        if (this.cdfu) {\n            r.cdfu = this.cdfu.slice(0, n);\n        }\n        const ci = n > 0 && this.n > 0 ? this.#y_lower_bound(n - 1) + 2 : 0;\n        r.cdf = this.cdf.slice(0, ci);\n        if (ci > 0 && r.n < r.cdf[ci - 1]) {\n            r.cdf[ci - 1] = r.n;\n        }\n        return r;\n    }\n\n    #assign_statistics() {\n        if (this.n === 0) {\n            this.mean = this.median = this.stddev = null;\n            return;\n        }\n        let ci = 0, cx = this.cdf[0], cy = this.cdf[1],\n            sum = 0, sumsq = 0;\n        const n = this.n;\n        for (let ui = 0; ui !== n; ++ui) {\n            while (ui === cy) {\n                ci += 2;\n                cx = this.cdf[ci];\n                cy = this.cdf[ci + 1];\n            }\n            sum += cx;\n            sumsq += cx * cx;\n        }\n        this.mean = sum / n;\n        this.median = this.quantile(0.5);\n        if (n > 1) {\n            this.stddev = Math.sqrt((sumsq - sum * sum / n) / (n - 1));\n        } else {\n            this.stddev = 0;\n        }\n    }\n\n    filter(predicate) {\n        let r = null, n = this.n, ci = 0, rci = 0;\n        for (let ui = 0; ui !== n; ++ui) {\n            while (this.cdf[ci + 1] === ui) {\n                ci += 2;\n            }\n            const x = this.cdf[ci], u = this.cdfu ? this.cdfu[ui] : null;\n            if (!predicate(x, u)) {\n                if (!r) {\n                    r = this.#slice(ui);\n                    rci = r.cdf.length;\n                }\n                continue;\n            } else if (!r) {\n                continue;\n            }\n            ++r.n;\n            if (this.cdfu) {\n                r.cdfu.push(u);\n            }\n            if (rci === 0 || x !== r.cdf[rci - 2]) {\n                r.cdf.push(x, r.n);\n                rci += 2;\n            }\n            r.cdf[rci - 1] = r.n;\n        }\n        if (!r) {\n            return this;\n        }\n        r.#assign_statistics();\n        return r;\n    }\n}\n\nexport class GradeKde {\n    series;\n    kde;\n    maxp;\n    binwidth;\n\n    constructor(series, gi, hfrac, nbins) {\n        const maxg = gi.max, ming = gi.min,\n            H = (maxg - ming) * hfrac, iH = 1 / H;\n        function epanechnikov(x) {\n            if (x >= -H && x <= H) {\n                x *= iH;\n                return 0.75 * iH * (1 - x * x);\n            } else {\n                return 0;\n            }\n        }\n        const bins = [];\n        for (let i = 0; i !== nbins + 1; ++i) {\n            bins.push(0);\n        }\n        let cdf = series.cdf;\n        if (series.cutoff && cdf.length > 0) {\n            const dy = Math.floor(cdf[cdf.length - 1] * series.cutoff);\n            if (dy > 0) {\n                const cdf0 = [0, 0], xd = (cdf[0] - ming) / dy;\n                for (let x = ming, y = 0, ci = 0; y !== dy; x += xd, ++y) {\n                    const xt = Math.floor(x);\n                    if (cdf0[ci] === xt) {\n                        cdf0[ci + 1] = y;\n                    } else {\n                        cdf0.push(xt, y);\n                        ci += 2;\n                    }\n                }\n                cdf0.push(...cdf);\n                cdf = cdf0;\n            }\n        }\n        const dx = (maxg - ming) / nbins, idx = 1 / dx;\n        for (let i = 0; i < cdf.length; i += 2) {\n            const y = cdf[i+1] - (i === 0 ? 0 : cdf[i-1]);\n            let x1 = Math.floor((cdf[i] - ming - H) * idx);\n            const x2 = Math.ceil((cdf[i] - ming + H) * idx);\n            while (x1 < x2) {\n                const x = Math.max(-1, Math.min(nbins + 1, x1));\n                if (x >= 0 && x <= nbins) {\n                    bins[x] += epanechnikov(x1 * dx - cdf[i] + ming) * y;\n                }\n                ++x1;\n            }\n        }\n        let maxp = 0;\n        if (series.n) {\n            const nr = 1 / series.n;\n            for (let i = 0; i !== nbins + 1; ++i) {\n                bins[i] *= nr;\n                maxp = Math.max(maxp, bins[i]);\n            }\n        }\n        this.series = series;\n        this.kde = bins;\n        this.maxp = maxp;\n        this.binwidth = dx;\n    }\n}\n\n// pset psetid all extension noextra extension_noextra maxtotal entry\nexport class GradeStats {\n    constructor(d) {\n        this.pset = d.pset;\n        this.psetid = d.psetid;\n        this.maxtotal = d.maxtotal || null;\n        this.entry = d.entry || null;\n        this.series = {};\n        for (let i in d.series) {\n            this.series[i] = new GradeSeries(d.series[i]);\n        }\n    }\n}\n","// grgraph-ui.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass, handle_ui, $e } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { wstorage } from \"./utils.js\";\nimport { GradeGraph } from \"./grgraph.js\";\nimport { GradeKde, GradeStats } from \"./gradestats.js\";\n\n\nfunction mksvg(tag) {\n    return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\n\nfunction grgraph_set_types(self) {\n    const d = self.pa__gradedata;\n    if (!d) {\n        self.removeAttribute(\"data-pa-gg-types\");\n        return;\n    }\n    const pi = self.closest(\".pa-psetinfo\"),\n        user_extension = !pi || pi.hasAttribute(\"data-pa-user-extension\"),\n        plot_types = [];\n    if (d.series.extension && pi && user_extension) {\n        plot_types.push(\"cdf-extension\", \"pdf-extension\");\n    }\n    plot_types.push(\"cdf\", \"pdf\");\n    if (d.series.extension && !pi) {\n        plot_types.push(\"cdf-extension\", \"pdf-extension\");\n    }\n    if (d.series.noextra) {\n        plot_types.push(\"cdf-noextra\", \"pdf-noextra\");\n    }\n    plot_types.push(\"all\");\n    self.setAttribute(\"data-pa-gg-types\", plot_types.join(\" \"));\n}\n\nfunction grgraph_type(self) {\n    const old_plot_type = self.getAttribute(\"data-pa-gg-type\");\n    let plot_type = old_plot_type;\n    if (!plot_type) {\n        plot_type = wstorage(true, \"pa-gg-type\");\n    }\n    if (!plot_type) {\n        let plotarg = wstorage(false, \"pa-gg-type\");\n        if (plotarg && plotarg[0] === \"{\") {\n            try {\n                plotarg = JSON.parse(plotarg);\n                // remember previous plot choice for up to two hours\n                if (typeof plotarg.type === \"string\"\n                    && typeof plotarg.at === \"number\"\n                    && plotarg.at >= new Date().getTime() - 7200000) {\n                    plot_type = plotarg.type;\n                }\n            } catch {\n            }\n        }\n    }\n    const plot_types = self.getAttribute(\"data-pa-gg-types\").split(\" \");\n    if (!plot_type || plot_type === \"default\") {\n        plot_type = plot_types[0];\n    }\n    if (plot_types.indexOf(plot_type) < 0) {\n        if (plot_type.substring(0, 3) === \"pdf\") {\n            plot_type = plot_types[1];\n        } else {\n            plot_type = plot_types[0];\n        }\n    }\n    if (plot_type !== old_plot_type) {\n        self.setAttribute(\"data-pa-gg-type\", plot_type);\n        removeClass(self, old_plot_type);\n        addClass(self, plot_type);\n    }\n    return plot_type;\n}\n\nfunction grgraph_draw() {\n    const self = this, d = self.pa__gradedata;\n    if (!d) {\n        addClass(self, \"hidden\");\n        $(self).removeData(\"paGradeGraph\").off(\"redrawgraph\");\n        return;\n    }\n    removeClass(self, \"hidden\");\n\n    const pi = self.closest(\".pa-psetinfo\"),\n        form = self.closest(\"form\"),\n        ptconf = form ? form.pa__ptconf : null,\n        user_extension = !pi || pi.hasAttribute(\"data-pa-user-extension\"),\n        plot_type = grgraph_type(self),\n        want_all = plot_type.substring(0, 3) === \"all\",\n        want_extension = plot_type.indexOf(\"-extension\") >= 0\n            || (want_all && user_extension && d.extension),\n        want_noextra = plot_type.indexOf(\"-noextra\") >= 0\n            || (want_all && d.series.noextra && !want_extension);\n\n    let $plot = $(self).find(\".pa-plot\");\n    if (!$plot.length) {\n        $plot = $(self);\n    }\n\n    const grgr = new GradeGraph($plot[0], d, plot_type);\n    self.pa__gradegraph = grgr;\n\n    if (grgr.total && grgr.total < grgr.max) {\n        let total = mksvg(\"line\");\n        total.setAttribute(\"x1\", grgr.xax(grgr.total));\n        total.setAttribute(\"y1\", grgr.yax(0));\n        total.setAttribute(\"x2\", grgr.xax(grgr.total));\n        total.setAttribute(\"y2\", grgr.yax(1));\n        total.setAttribute(\"class\", \"pa-gg-anno-total\");\n        grgr.gg.appendChild(total);\n    }\n\n    // series\n    let filtered = null;\n    if (ptconf && ptconf.has_hidden) {\n        filtered = d.series.all.filter((x, u) => {\n            const user = ptconf.uidmap[u];\n            return user && !user.hidden;\n        });\n    }\n\n    const kde_nbins = Math.ceil((grgr.max - grgr.min) / 2), kde_hfactor = 0.08, kdes = {};\n    if (plot_type === \"pdf-extension\") {\n        kdes.extension = new GradeKde(d.series.extension, grgr, kde_hfactor, kde_nbins);\n    } else if (plot_type === \"pdf-noextra\") {\n        kdes.noextra = new GradeKde(d.series.noextra, grgr, kde_hfactor, kde_nbins);\n    } else if (plot_type === \"pdf\") {\n        kdes.main = new GradeKde(d.series.all, grgr, kde_hfactor, kde_nbins);\n    }\n    if (filtered && plot_type.startsWith(\"pdf\")) {\n        kdes.filtered = new GradeKde(filtered, grgr, kde_hfactor, kde_nbins);\n    }\n    for (let i in kdes) {\n        grgr.maxp = Math.max(grgr.maxp, kdes[i].maxp);\n    }\n\n    if (filtered && plot_type.startsWith(\"pdf\")) {\n        grgr.append_pdf(kdes.filtered, \"pa-gg-pdf pa-gg-filtered\");\n    }\n    if (plot_type === \"pdf-noextra\") {\n        grgr.append_pdf(kdes.noextra, \"pa-gg-pdf pa-gg-noextra\");\n    } else if (plot_type === \"pdf\") {\n        grgr.append_pdf(kdes.main, \"pa-gg-pdf\");\n    } else if (plot_type === \"pdf-extension\") {\n        grgr.append_pdf(kdes.extension, \"pa-gg-pdf pa-gg-extension\");\n    }\n    if (filtered && !plot_type.startsWith(\"pdf\")) {\n        grgr.append_cdf(filtered, \"pa-gg-cdf pa-gg-filtered\");\n    }\n    if (plot_type === \"cdf-noextra\"\n        || (plot_type === \"all\" && d.series.noextra)) {\n        grgr.append_cdf(d.series.noextra, \"pa-gg-cdf pa-gg-noextra\");\n    }\n    if (plot_type === \"cdf\"\n        || plot_type === \"all\") {\n        grgr.append_cdf(d.series.all, \"pa-gg-cdf\", 1);\n    }\n    if (plot_type === \"cdf-extension\"\n        || (plot_type === \"all\" && d.series.extension && user_extension)) {\n        grgr.append_cdf(d.series.extension, \"pa-gg-cdf pa-gg-extension\");\n    }\n\n    // cutoff block (currently showing it another way)\n    // if (grgr.cutoff && plot_type.substring(0, 3) !== \"pdf\") {\n    //     const cutoff = mksvg(\"rect\");\n    //     cutoff.setAttribute(\"x\", grgr.xax(0));\n    //     cutoff.setAttribute(\"y\", grgr.yax(grgr.cutoff));\n    //     cutoff.setAttribute(\"width\", grgr.xax(grgr.max));\n    //     cutoff.setAttribute(\"height\", grgr.yax(0) - grgr.yax(grgr.cutoff));\n    //     cutoff.setAttribute(\"fill\", \"rgba(255,0,0,0.1)\");\n    //     grgr.gg.appendChild(cutoff);\n    // }\n\n    // load user grade\n    const sheet = pi ? pi.pa__gradesheet : null,\n        total = sheet ? sheet.grade_total(want_noextra && !want_all) : null;\n    if (total != null) {\n        grgr.annotate(total);\n    }\n\n    // axes\n    grgr.xaxis();\n    grgr.yaxis();\n\n    if (self.hasAttribute(\"data-pa-highlight\")) {\n        grgr.highlight_users();\n    }\n\n    grgr.hover();\n\n    // summary\n    $(self).find(\".statistics\").each(function () {\n        const dd = grgr.last_curve_series, stt = [];\n        if (dd && dd.mean) {\n            stt.push(\"mean \" + dd.mean.toFixed(1));\n        }\n        if (dd && dd.median) {\n            stt.push(\"median \" + dd.median.toFixed(1));\n        }\n        if (dd && dd.stddev) {\n            stt.push(\"stddev \" + dd.stddev.toFixed(1));\n        }\n        const t = [stt.join(\", \")];\n        if (dd && total != null) {\n            const y = dd.count_at(total);\n            if (dd.cutoff && y < dd.cutoff * dd.n) {\n                t.push(\"\" + Math.round(dd.cutoff * 100) + \" %ile\");\n            } else {\n                t.push(Math.round(Math.min(Math.max(1, y * 100 / dd.n), 99)) + \" %ile\");\n            }\n        }\n        if (t.length) {\n            removeClass(this, \"hidden\");\n            this.innerHTML = t.join(\"  \");\n        } else {\n            addClass(this, \"hidden\");\n            this.innerHTML = \"\";\n        }\n    });\n\n    $(self).find(\".pa-grgraph-type\").each(function () {\n        const spec = [];\n        if (plot_type.startsWith(\"cdf\")) {\n            spec.push(\"CDF\");\n        } else if (plot_type.startsWith(\"pdf\")) {\n            spec.push(\"PDF\");\n        }\n        if (want_extension && !want_all) {\n            spec.push(\"ext\");\n        }\n        if (want_noextra && !want_all) {\n            spec.push(\"no EC\");\n        }\n        if (spec.length === 0) {\n            if (this.lastChild && this.lastChild.nodeType === 1 && this.lastChild.className === \"pa-grgraph-subtype\")\n                this.lastChild.remove();\n        } else {\n            if (!this.lastChild || this.lastChild.nodeType !== 1 || this.lastChild.className !== \"pa-grgraph-subtype\")\n                this.append($e(\"span\", \"pa-grgraph-subtype\"));\n            this.lastChild.textContent = \"(\" + spec.join(\", \") + \")\";\n        }\n    });\n\n    grgr.highlight_users();\n    $(self).off(\"redrawgraph\").on(\"redrawgraph\", grgraph_draw);\n}\n\nexport function grgraph() {\n    const self = this, arg = {};\n    if (self.hasAttribute(\"data-pa-pset\")) {\n        arg.pset = self.getAttribute(\"data-pa-pset\");\n    }\n    if (self.hasAttribute(\"data-pa-grade\")) {\n        arg.grade = self.getAttribute(\"data-pa-grade\");\n    }\n    $.ajax(hoturl(\"=api/gradestatistics\", arg), {\n        type: \"GET\", cache: true, dataType: \"json\",\n        success: function (d) {\n            if (d.series && d.series.all) {\n                self.pa__gradedata = new GradeStats(d);\n                grgraph_set_types(self);\n                grgraph_draw.call(self);\n            }\n        }\n    });\n}\n\nhandle_ui.on(\"js-grgraph-flip\", function () {\n    const elt = this.closest(\".pa-grgraph\"),\n        plot_types = (elt.getAttribute(\"data-pa-gg-types\") || \"\").split(/ /),\n        plot_type = elt.getAttribute(\"data-pa-gg-type\");\n    let i = plot_types.indexOf(plot_type);\n    if (i >= 0) {\n        i = (i + (hasClass(this, \"prev\") ? plot_types.length - 1 : 1)) % plot_types.length;\n        elt.setAttribute(\"data-pa-gg-type\", plot_types[i]);\n        wstorage(true, \"pa-gg-type\", plot_types[i]);\n        wstorage(false, \"pa-gg-type\", {type: plot_types[i], at: new Date().getTime()});\n        grgraph_draw.call(elt);\n    }\n});\n","// grgraph-highlight.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { push_history_state } from \"./ui-history.js\";\n\n\nfunction hash_parse(hash) {\n    hash = hash.replace(/^[^#]*/, \"\");\n    let regex = /([^#=/]+)[=/]?([^/]*)/g, m, h = {};\n    while ((m = regex.exec(hash))) {\n        h[m[1]] = decodeURIComponent(m[2].replace(/\\+/g, \" \"));\n    }\n    return h;\n}\n\nfunction hash_unparse(h) {\n    const a = [];\n    for (var k in h) {\n        if (h[k] === null || h[k] === undefined || h[k] === \"\") {\n            a.push(k);\n        } else {\n            a.push(k + \"=\" + encodeURIComponent(h[k]).replace(/%20/g, \"+\"));\n        }\n    }\n    a.sort();\n    return a.length ? \"#\" + a.join(\"/\") : \"\";\n}\n\nfunction hash_modify(changes) {\n    const h = hash_parse(location.hash);\n    for (let k in changes) {\n        if (changes[k] === null || changes[k] === undefined) {\n            delete h[k];\n        } else {\n            h[k] = changes[k];\n        }\n    }\n    const newhash = hash_unparse(h);\n    if (newhash !== location.hash) {\n        push_history_state(location.origin + location.pathname + location.search + newhash);\n    }\n}\n\nfunction want_grgraph_hash() {\n    return hasClass(document.body, \"want-grgraph-hash\");\n}\n\n\nfunction update(where, color, attr) {\n    const key = \"data-pa-highlight\" + (color === \"main\" ? \"\" : \"-\" + color);\n    attr = attr || \"\";\n    $(where).find(\".pa-grgraph\").each(function () {\n        const old_attr = this.getAttribute(key) || \"\", that = this;\n        if (old_attr !== attr\n            && (color === \"main\" || this.getAttribute(\"data-pa-pset\") !== \"course\")) {\n            attr ? this.setAttribute(key, attr) : this.removeAttribute(key);\n            window.requestAnimationFrame(function () {\n                const gg = that.pa__gradegraph;\n                gg && gg.highlight_users();\n            });\n        }\n    });\n}\n\nfunction course_xcdf() {\n    let xd = null;\n    $(\".pa-grgraph[data-pa-pset=course]\").each(function () {\n        const d = this.pa__gradedata;\n        if (d && d.series.all && d.series.all.cdfu) {\n            xd = d.series.all;\n            return false;\n        }\n    });\n    return xd;\n}\n\nfunction update_course(str, tries) {\n    const ranges = {}, colors = {};\n    let any = false;\n    for (let range of str.match(/[-\\d.]+/g) || []) {\n        ranges[range] = true;\n    }\n    $(\".js-grgraph-highlight-course\").each(function () {\n        const range = this.getAttribute(\"data-pa-highlight-range\") || \"90-100\",\n            color = this.getAttribute(\"data-pa-highlight-type\") || \"h00\";\n        colors[color] = colors[color] || [];\n        if ((this.checked = !!ranges[range])) {\n            let m = range.match(/^([-+]?(?:\\d+\\.?\\d*|\\.\\d+))-([-+]?(?:\\d+\\.?\\d*|\\.\\d))(\\.?)$/);\n            if (m) {\n                colors[color].push(+m[1], +m[2] + (m[3] ? 0.00001 : 0));\n                any = true;\n            } else if ((m = range.match(/^([-+]?(?:\\d+\\.?\\d*|\\.\\d+))-$/))) {\n                colors[color].push(+m[1], Infinity);\n                any = true;\n            } else {\n                throw new Error(\"bad range\");\n            }\n        }\n    });\n    let xd;\n    if (!any) {\n        for (let color in colors) {\n            update(document.body, color, \"\");\n        }\n    } else if ((xd = course_xcdf())) {\n        for (let color in colors) {\n            const ranges = colors[color], a = [];\n            if (ranges.length) {\n                for (let i = 0; i !== xd.cdf.length; i += 2) {\n                    for (let j = 0; j !== ranges.length; j += 2) {\n                        if (xd.cdf[i] >= ranges[j] && xd.cdf[i] < ranges[j+1]) {\n                            const ui0 = i ? xd.cdf[i-1] : 0;\n                            Array.prototype.push.apply(a, xd.cdfu.slice(ui0, xd.cdf[i+1]));\n                            break;\n                        }\n                    }\n                }\n                a.sort();\n            }\n            update(document.body, color, a.join(\" \"));\n        }\n    } else {\n        setTimeout(function () {\n            update_course(hash_parse(location.hash).hr || \"\", tries + 1);\n        }, 8 << Math.max(tries, 230));\n    }\n}\n\nfunction update_hash(href) {\n    const h = hash_parse(href);\n    update(document.body, \"main\", h.hs || \"\");\n    $(\"input[type=checkbox].js-grgraph-highlight\").prop(\"checked\", false);\n    for (let uid of (h.hs || \"\").match(/\\d+/g) || []) {\n        $(\"tr[data-pa-uid=\" + uid + \"] input[type=checkbox].js-grgraph-highlight\").prop(\"checked\", true);\n    }\n    update_course(h.hr || \"\", 0);\n    $(\".js-grgraph-highlight-course\").prop(\"checked\", false);\n    for (let range of (h.hr || \"\").match(/[-\\d.]+/g) || []) {\n        $(\".js-grgraph-highlight-course[data-pa-highlight-range=\\\"\" + range + \"\\\"]\").prop(\"checked\", true);\n    }\n}\n\nfunction change_highlight(f, range) {\n    const a = [];\n    for (let e of f.querySelectorAll(\"input[type=checkbox]\")) {\n        let tr;\n        if (e.checked\n            && e.getAttribute(\"data-range-type\") === range\n            && (tr = e.closest(\"tr\"))\n            && tr.hasAttribute(\"data-pa-uid\"))\n            a.push(+tr.getAttribute(\"data-pa-uid\"));\n    }\n    a.sort((x, y) => x - y);\n    if (want_grgraph_hash()) {\n        hash_modify({hs: a.length ? a.join(\" \") : null});\n        update(document.body, \"main\", a.join(\" \"));\n    } else {\n        update(f, \"main\", a.join(\" \"));\n    }\n    f.removeAttribute(\"data-pa-grgraph-hl-scheduled-\" + range);\n}\n\nhandle_ui.on(\"change.js-grgraph-highlight\", function () {\n    const range = this.getAttribute(\"data-range-type\"),\n        f = this.closest(\"form\");\n    if (!f.hasAttribute(\"data-pa-grgraph-hl-scheduled-\" + range)) {\n        f.setAttribute(\"data-pa-grgraph-hl-scheduled-\" + range, \"\");\n        queueMicrotask(() => change_highlight(f, range));\n    }\n});\n\nhandle_ui.on(\"js-grgraph-highlight-course\", function () {\n    const a = [];\n    $(\".js-grgraph-highlight-course\").each(function () {\n        if (this.checked)\n            a.push(this.getAttribute(\"data-pa-highlight-range\"));\n    });\n    if (want_grgraph_hash()) {\n        hash_modify({hr: a.length ? a.join(\" \") : null});\n    }\n    update_course(a.join(\" \"), 0);\n});\n\nif (want_grgraph_hash()) {\n    $(window).on(\"popstate\", function (event) {\n        const state = (event.originalEvent || event).state;\n        state && state.href && update_hash(state.href);\n    }).on(\"hashchange\", function () {\n        update_hash(location.href);\n    });\n    $(function () { update_hash(location.href); });\n}\n","// gc-checkbox.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { GradeEntry } from \"./gradeentry.js\";\nimport { hasClass, addClass, removeClass, $e, handle_ui } from \"./ui.js\";\nimport { friendly_boolean } from \"./utils.js\";\n\n\nGradeClass.add(\"checkbox\", {\n    text: function (v) {\n        if (v == null || v === 0 || v === false) {\n            return \"\";\n        } else if (v === (this.max || 1) || v === true) {\n            return \"\";\n        }\n        return \"\" + v;\n    },\n    simple_text: GradeClass.basic_text,\n    tcell: function (v) {\n        if (v == null || v === 0 || v === false) {\n            return \"\";\n        } else if (v === (this.max || 1) || v === true) {\n            return \"\";\n        }\n        return \"\" + v;\n    },\n    mount_edit: function (elt, id) {\n        return Checkbox_GradeClass.finish_mount_edit(this, $e(\"span\", \"pa-gradewidth\", $e(\"input\", {\n            type: \"checkbox\", \"class\": \"uic uich pa-gradevalue ml-0 pa-fresh\",\n            name: this.key, id: id, value: this.max, disabled: this.disabled\n        })));\n    },\n    update_edit: function (elt, v, opts) {\n        const want_checkbox = v == null || v === \"\" || v === 0 || (this && v === this.max),\n            ve = elt.firstChild.firstChild;\n        if (!want_checkbox && ve.type === \"checkbox\") {\n            Checkbox_GradeClass.uncheckbox(ve);\n        } else if (want_checkbox && ve.type !== \"checkbox\" && opts.reset) {\n            Checkbox_GradeClass.recheckbox(ve);\n        }\n        if (ve.type === \"checkbox\") {\n            ve.checked = !!v;\n            ve.indeterminate = !!opts.mixed;\n        } else if (ve.value !== v && (opts.reset || !$(ve).is(\":focus\"))) {\n            ve.value = \"\" + v;\n        }\n    },\n    justify: \"center\",\n    parse_search: function (text, gidx) {\n        const fb = friendly_boolean(text);\n        if (fb !== null) {\n            return (ss) => (ss.grades[gidx] > 0) === fb;\n        }\n    }\n});\n\nexport class Checkbox_GradeClass {\n    static uncheckbox(element) {\n        const ge = GradeEntry.closest(element);\n        if (element.type === \"checkbox\") {\n            element.value = element.checked ? ge.max : \"\";\n        }\n        element.type = \"text\";\n        removeClass(element, \"ml-0\");\n        addClass(element, \"pa-gradewidth\");\n        removeClass(element, \"uic\");\n        hasClass(element, \"uich\") && addClass(element, \"uii\");\n        const container = element.closest(\".pa-pv\");\n        $(container).find(\".pa-grade-uncheckbox\").remove();\n        $(container).find(\"input[name^=\\\"\" + element.name + \":\\\"]\").addClass(\"hidden\");\n    }\n    static recheckbox(element) {\n        const v = element.value.trim(), ge = GradeEntry.closest(element);\n        element.type = \"checkbox\";\n        element.checked = v !== \"\" && v !== \"0\";\n        element.value = ge.max;\n        addClass(element, \"ml-0\");\n        removeClass(element, \"pa-gradewidth\");\n        removeClass(element, \"uii\");\n        hasClass(element, \"uich\") && addClass(element, \"uic\");\n        $(element.closest(\".pa-pv\")).find(\".pa-gradedesc\").append(' <button type=\"button\" class=\"qo ui pa-grade-uncheckbox\" tabindex=\"-1\">#</button>');\n    }\n    static finish_mount_edit(ge, chsp) {\n        const fr = new DocumentFragment;\n        fr.append(chsp, \" \", $e(\"span\", \"pa-gradedesc\", \"of \" + ge.max + \" \", $e(\"button\", {\n                type: \"button\", \"class\": \"link x ui pa-grade-uncheckbox\", \"tabindex\": -1\n            }, \"#\")));\n        return fr;\n    }\n}\n\nhandle_ui.on(\"pa-grade-uncheckbox\", function () {\n    $(this.closest(\".pa-pv\")).find(\".pa-gradevalue\").each(function () {\n        Checkbox_GradeClass.uncheckbox(this);\n        this.focus();\n        this.select();\n    });\n});\n","// gc-letter.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\n\n\nconst lm = {\n    98: \"A+\", 95: \"A\", 92: \"A-\", 88: \"B+\", 85: \"B\", 82: \"B-\",\n    78: \"C+\", 75: \"C\", 72: \"C-\", 68: \"D+\", 65: \"D\", 62: \"D-\", 50: \"F\"\n};\n\nGradeClass.add(\"letter\", {\n    text: v => (v == null ? \"\" : lm[v] || \"\" + v),\n    mount_edit: function (elt, id) {\n        return GradeClass.basic_mount_edit.call(this, elt, id, {max_text: \"letter grade\"});\n    },\n    justify: \"left\",\n    tics: () => {\n        const a = [];\n        for (let g in lm) {\n            if (lm[g].length === 1)\n                a.push({x: g, text: lm[g]});\n        }\n        for (let g in lm) {\n            if (lm[g].length === 2)\n                a.push({x: g, text: lm[g], label_space: 5});\n        }\n        for (let g in lm) {\n            if (lm[g].length === 2)\n                a.push({x: g, text: lm[g].substring(1), label_space: 2, notic: true});\n        }\n        return a;\n    }\n});\n","// gc-multicheckbox.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { Checkbox_GradeClass } from \"./gc-checkbox.js\";\nimport { handle_ui, toggleClass } from \"./ui.js\";\n\n\nfunction mouseover(evt) {\n    let max, colon;\n    if (evt.target === this && evt.type === \"mouseout\") {\n        max = -1;\n    } else if (evt.target.type === \"checkbox\" && (colon = evt.target.name.indexOf(\":\")) >= 0) {\n        max = +evt.target.name.substring(colon + 1);\n    } else {\n        return;\n    }\n    for (let ch = this.firstChild; ch; ch = ch.nextSibling) {\n        if (ch.type === \"checkbox\" && (colon = ch.name.indexOf(\":\")) >= 0) {\n            const idx = +ch.name.substring(colon + 1);\n            toggleClass(ch, \"pa-hover\", idx <= max);\n        }\n    }\n}\n\nfunction make_multicheckbox(mark) {\n    let extraclass = mark === \"\" ? \"\" : \" pa-checkbox-mark\";\n    return {\n        text: function (v) {\n            if (v == null || v === 0) {\n                return \"\";\n            } else if (v > 0 && Math.abs(v - Math.round(v)) < 0.05) {\n                return mark.repeat(Math.round(v));\n            }\n            return \"\" + v;\n        },\n        simple_text: GradeClass.basic_text,\n        tcell: function (v) {\n            if (v == null || v === 0 || v === false) {\n                return \"\";\n            } else if (v > 0 && Math.abs(v - Math.round(v)) < 0.05) {\n                return mark.repeat(Math.round(v));\n            }\n            return \"\" + v;\n        },\n        tcell_width: function () {\n            return this.max * 1.5;\n        },\n        mount_edit: function (elt, id) {\n            const chhidden = document.createElement(\"input\");\n            chhidden.type = \"hidden\";\n            chhidden.className = \"uich pa-gradevalue pa-fresh\";\n            chhidden.name = this.key;\n            const chsp = document.createElement(\"span\");\n            chsp.className = \"pa-gradewidth\";\n            chsp.append(chhidden);\n            chsp.addEventListener(\"mouseover\", mouseover);\n            chsp.addEventListener(\"mouseout\", mouseover);\n            for (let i = 0; i < this.max; ++i) {\n                const ch = document.createElement(\"input\");\n                ch.type = \"checkbox\";\n                ch.className = \"ui js-multicheckbox-grade ml-0\" + extraclass;\n                ch.name = this.key + \":\" + i;\n                ch.value = 1;\n                ch.disabled = this.disabled;\n                extraclass && ch.setAttribute(\"data-pa-mark\", mark);\n                if (i === this.max - 1) {\n                    ch.id = id;\n                }\n                chsp.append(ch);\n            }\n            return Checkbox_GradeClass.finish_mount_edit(this, chsp);\n        },\n        update_edit: function (elt, v, opts) {\n            const want_checkbox = v == null || v === \"\" || v === 0\n                    || (v >= 0 && (!this || v <= this.max) && Math.abs(v - Math.round(v)) < 0.05),\n                ve = elt.firstChild.firstChild;\n            if (!want_checkbox && ve.type === \"hidden\") {\n                Checkbox_GradeClass.uncheckbox(ve);\n            } else if (want_checkbox && ve.type !== \"hidden\" && opts.reset) {\n                Checkbox_GradeClass.recheckbox(ve);\n            }\n            if (ve.value !== v) {\n                ve.value = v;\n            }\n            const name = ve.name + \":\", value = Math.round(v || 0);\n            $(elt).find(\"input[type=checkbox]\").each(function () {\n                if (this.name.startsWith(name)) {\n                    const i = +this.name.substring(name.length);\n                    this.checked = i < value;\n                    this.indeterminate = !!opts.mixed;\n                }\n            });\n        },\n        justify: \"left\"\n    };\n}\n\nGradeClass.add(\"checkboxes\", make_multicheckbox(\"\"));\nGradeClass.add(\"stars\", make_multicheckbox(\"\"));\nGradeClass.add(\"poops\", make_multicheckbox(\"\"));\n\nhandle_ui.on(\"js-multicheckbox-grade\", function () {\n    const colon = this.name.indexOf(\":\"),\n        name = this.name.substring(0, colon),\n        num = this.name.substring(colon + 1),\n        elt = this.closest(\"form\").elements[name],\n        v = this.checked ? (+num + 1) + \"\" : num;\n    if (elt.value !== v) {\n        elt.value = v;\n        $(elt).trigger(\"change\");\n    }\n});\n","// gc-select.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { input_set_default_value } from \"./ui.js\";\n\n\nGradeClass.add(\"select\", {\n    initialize: function () {\n        this.object_options = null;\n        for (const opt of this.options) {\n            if (typeof opt === \"object\") {\n                this.object_options = this.object_options || [];\n                this.object_options.push(opt);\n            }\n        }\n    },\n    text: function (v) {\n        if (v == null) {\n            return \"\";\n        }\n        if (this.object_options) {\n            for (const opt of this.options) {\n                if (opt.value == v)\n                    return \"\" + (opt.title || opt.value);\n            }\n        }\n        return \"\" + v;\n    },\n    simple_text: GradeClass.basic_text,\n    mount_edit: function (elt, id) {\n        const sel = document.createElement(\"select\");\n        sel.className = \"uich pa-gradevalue pa-fresh\";\n        sel.name = this.key;\n        sel.id = id;\n        sel.disabled = this.disabled;\n        const nonee = document.createElement(\"option\");\n        nonee.value = \"\";\n        nonee.append(\"None\");\n        sel.append(nonee);\n        for (const opt of this.options) {\n            const oe = document.createElement(\"option\");\n            if (typeof opt === \"object\") {\n                oe.value = opt.value;\n                oe.append(opt.title || opt.value);\n            } else {\n                oe.value = opt;\n                oe.append(opt);\n            }\n            sel.append(oe);\n        }\n        const sp = document.createElement(\"span\");\n        sp.className = \"select\";\n        sp.append(sel);\n        return sp;\n    },\n    update_edit: function (elt, v, opts) {\n        const gt = this.simple_text(v),\n            ve = elt.firstChild.firstChild;\n        input_set_default_value(ve, gt);\n        ve.value = gt;\n        if (opts.reset && opts.mixed) {\n            if (ve.options[0].value !== \"\") {\n                const oe = document.createElement(\"option\");\n                oe.value = \"\";\n                oe.append(\"Mixed\");\n                ve.insertBefore(oe, ve.firstChild);\n            }\n            ve.selectedIndex = 0;\n        } else if (gt !== \"\" && ve.options[0].value === \"\") {\n            ve.remove(0);\n        }\n    },\n    configure_column: function (col) {\n        col = GradeClass.basic_configure_column.call(this, col);\n        col.className += \" gt-el\";\n        return col;\n    },\n    tcell_width: function (col) {\n        let w = 0;\n        for (const opt of this.options) {\n            let ot = typeof opt === \"object\" ? opt.title || opt.value : opt;\n            w = Math.max(w, ot.toString().length);\n        }\n        return Math.max(GradeClass.basic_tcell_width.call(this, col),\n                        Math.floor(Math.min(w, 10) * 1.25) / 2);\n    },\n    justify: \"left\",\n    sort: \"forward\"\n});\n","// gc-markdown.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { render_onto } from \"./render.js\";\nimport { hasClass, addClass, handle_ui } from \"./ui.js\";\n\n\nGradeClass.add(\"markdown\", {\n    text: function (v) {\n        return v == null ? \"\" : \"\" + v;\n    },\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-textv\");\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: function (elt, id) {\n        addClass(elt, \"pa-textv\");\n        const descspan = document.createElement(\"span\");\n        descspan.append(\"Markdown styling and LaTeX math supported  \");\n        const desclink = document.createElement(\"a\");\n        desclink.href = \"\";\n        desclink.className = \"ui js-toggle-gc-markdown-preview\";\n        desclink.tabIndex = -1;\n        desclink.append(\"Preview\");\n        const descp = document.createElement(\"p\");\n        descp.className = \"pa-preview-notice\";\n        descp.append(descspan, desclink);\n        const ta = document.createElement(\"textarea\");\n        ta.className = \"uich uii pa-gradevalue need-autogrow pa-fresh\";\n        ta.name = this.key;\n        ta.id = id;\n        ta.disabled = this.disabled;\n        const df = new DocumentFragment;\n        df.append(descp, ta);\n        return df;\n    },\n    update_show: function (ve, v, opts) {\n        if (v == null || v === \"\") {\n            ve.replaceChildren();\n        } else if (this.answer) {\n            opts.gradesheet.show_text_as_diff(ve, v, `/g/${this.key}`);\n        } else if (hasClass(ve.parentElement, \"pa-markdown\")) {\n            render_onto(ve, 1, v);\n        } else {\n            render_onto(ve, 0, v);\n        }\n        return ve.firstChild === null;\n    },\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n\nhandle_ui.on(\"js-toggle-gc-markdown-preview\", function () {\n    const pd = this.closest(\".pa-pv\"),\n        ta = pd.querySelector(\"textarea\");\n    if (ta.hidden) {\n        ta.parentElement.removeChild(ta.previousSibling);\n        ta.hidden = false;\n        ta.focus();\n        this.textContent = \"Preview\";\n        this.previousSibling.hidden = false;\n    } else {\n        const div = document.createElement(\"div\"),\n            hr1 = document.createElement(\"hr\"),\n            hr2 = document.createElement(\"hr\"),\n            inner = document.createElement(\"div\");\n        div.className = \"pa-preview\";\n        hr1.className = hr2.className = \"pa-preview-border\";\n        inner.className = \"pa-dr\";\n        div.append(hr1, inner, hr2);\n        ta.parentElement.insertBefore(div, ta);\n        ta.hidden = true;\n        render_onto(inner, 1, ta.value);\n        this.textContent = \"Edit\";\n        this.previousSibling.hidden = true;\n    }\n});\n","// gc-timermark.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { handle_ui, addClass, removeClass, toggleClass } from \"./ui.js\";\nimport { sprintf, strftime, sec2text } from \"./utils.js\";\n\n\nconst timefmt = \"%Y-%m-%d %H:%M\";\n\nfunction timeout_value(ge, gi) {\n    let toge, tov;\n    if (ge.timeout_entry\n        && gi\n        && (toge = gi.entries[ge.timeout_entry])\n        && (tov = toge.value_in(gi)) != null) {\n        return tov;\n    } else {\n        return ge.timeout;\n    }\n}\n\nfunction remove_tmto(ge, tm, makesticky) {\n    if (tm && tm.pa__tmto) {\n        clearTimeout(tm.pa__tmto);\n        delete tm.pa__tmto;\n    }\n    if (tm && tm.pa__tmsticky && !makesticky) {\n        tm.pa__tmsticky.parentElement.remove();\n        delete tm.pa__tmsticky;\n    } else if (tm && !tm.pa__tmsticky && makesticky) {\n        const gsection = tm.closest(\".pa-gsection\");\n        if (gsection) {\n            const e = document.createElement(\"div\"),\n                tms = document.createElement(\"div\");\n            e.className = \"pa-gnote pa-timermark-sticky\";\n            e.setAttribute(\"data-pa-grade\", ge.key);\n            tms.className = \"pa-timermark-alert\";\n            e.appendChild(tms);\n            gsection.parentElement.insertBefore(e, gsection);\n            tm.pa__tmsticky = tms;\n        }\n    }\n}\n\nGradeClass.add(\"timermark\", {\n    text: function (v) {\n        if (v == null || v === 0) {\n            return \"\";\n        } else {\n            return strftime(timefmt, v);\n        }\n    },\n    simple_text: GradeClass.basic_text,\n    tcell: function (v) {\n        if (v == null || v === 0) {\n            return \"\";\n        } else {\n            return strftime(timefmt, v);\n        }\n    },\n    tcell_width: 10,\n    make_compare: function (col) {\n        const gidx = col.gidx;\n        return function (a, b) {\n            const ag = a.grades && a.grades[gidx],\n                bg = b.grades && b.grades[gidx];\n            if (ag === \"\" || ag == null || ag == 0 || bg === \"\" || bg == null || bg == 0) {\n                if (ag !== \"\" && ag != null && ag != 0) {\n                    return -1;\n                } else if (bg !== \"\" && bg != null && bg != 0) {\n                    return 1;\n                }\n            } else if (ag < bg) {\n                return -1;\n            } else if (ag > bg) {\n                return 1;\n            }\n            return a._sort_user.localeCompare(b._sort_user);\n        };\n    },\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-gradevalue\");\n    },\n    update_show: function (elt, v, opts) {\n        const gi = opts.gradesheet;\n        if (v == null || v === 0) {\n            elt.textContent = \"\";\n        } else {\n            let ch = [strftime(timefmt, v)];\n            if (gi && (gi.student_timestamp || 0) > v) {\n                const sts = strftime(timefmt, gi.student_timestamp),\n                    delta = gi.student_timestamp - v,\n                    timeout = timeout_value(this, gi);\n                if (timeout && delta > timeout + 120) {\n                    ch[0] = ch[0].concat(\"  \", sts, \" \");\n                    const strong = document.createElement(\"strong\");\n                    strong.className = \"overdue\";\n                    strong.textContent = \"(\" + sec2text(delta) + \" later)\";\n                    ch.push(strong);\n                } else {\n                    ch[0] = ch[0].concat(\"  \", sts, \" (\", sec2text(delta), \" later)\");\n                }\n            }\n            elt.replaceChildren(...ch);\n        }\n        return false;\n    },\n    mount_edit: function (elt) {\n        removeClass(elt, \"pa-gradevalue\");\n        const but = document.createElement(\"button\");\n        but.type = \"button\";\n        but.className = \"ui js-timermark hidden mr-2\";\n        but.name = this.key + \":b\";\n        but.value = 1;\n        but.disabled = this.disabled;\n        but.append(this.label || \"Press to start\");\n        const fr = new DocumentFragment;\n        fr.append(but);\n        if (siteinfo.user.is_pclike) {\n            const rbut = document.createElement(\"button\");\n            rbut.type = \"button\";\n            rbut.className = \"ui js-timermark hidden mr-2\";\n            rbut.name = this.key + \":r\";\n            rbut.value = 0;\n            rbut.disabled = this.disabled;\n            rbut.append(\"Reset\");\n            fr.append(rbut);\n        }\n        const sp = document.createElement(\"span\");\n        sp.className = \"pa-timermark-result hidden\";\n        const gv = document.createElement(\"input\");\n        gv.type = \"hidden\";\n        gv.className = \"uich pa-gradevalue pa-fresh\";\n        gv.name = this.key;\n        fr.append(sp, gv);\n        return fr;\n    },\n    unmount: function (elt) {\n        const tm = elt.querySelector(\".pa-timermark-result\");\n        remove_tmto(this, tm, false);\n        elt.remove();\n    },\n    update_edit: function (elt, v, opts) {\n        const gi = opts.gradesheet;\n        let timeout = timeout_value(this, gi);\n        elt.querySelectorAll(\".js-timermark\").forEach(function (e) {\n            e.classList.toggle(\"hidden\", !v !== (e.value === \"1\"));\n        });\n        const tm = elt.querySelector(\".pa-timermark-result\");\n        tm.classList.toggle(\"hidden\", !v && !timeout);\n        remove_tmto(this, tm, true);\n        let t = strftime(timefmt, v);\n        if (v\n            && timeout\n            && v + timeout + 600 > +document.body.getAttribute(\"data-now\")) {\n            const arg = {\n                deadline: v + timeout + +document.body.getAttribute(\"data-time-skew\"),\n                start_at_text: t,\n                timeout: timeout,\n                tmelt: tm,\n                stelt: tm.pa__tmsticky\n            };\n            timermark_interval(arg);\n        } else if (v) {\n            if (gi && (gi.student_timestamp || 0) > v) {\n                t = t.concat(\" (updated \", sec2text(gi.student_timestamp - v), \" later at \", strftime(timefmt, gi.student_timestamp), \")\");\n            }\n            tm.textContent = t;\n        } else if (timeout) {\n            tm.textContent = \"Time once started: \" + sec2text(timeout);\n        }\n    },\n    justify: \"left\",\n    sort: \"forward\"\n});\n\nhandle_ui.on(\"js-timermark\", function () {\n    const colon = this.name.indexOf(\":\"),\n        name = this.name.substring(0, colon),\n        elt = this.closest(\"form\").elements[name];\n    elt.value = this.value;\n    $(elt).trigger(\"change\");\n});\n\nfunction timermark_interval(arg) {\n    const now = new Date().getTime(),\n        dt = Math.round(arg.deadline - now / 1000);\n\n    const tmch = [arg.start_at_text];\n    if (dt > 630) {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(Math.ceil(dt / 60) * 60), \" left)\");\n    } else if (dt > 300) {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(dt), \" left)\");\n    } else if (dt >= -599) {\n        const e = document.createElement(\"strong\");\n        e.className = \"overdue\";\n        e.textContent = \"(\".concat(sec2text(Math.abs(dt)), dt < 0 ? \" over)\" : \" left)\");\n        tmch[0] += \" \";\n        tmch.push(e);\n    } else {\n        tmch[0] = tmch[0].concat(\" (\", sec2text(-Math.ceil(dt / 60) * 60), \" over)\");\n    }\n    arg.tmelt.replaceChildren(...tmch);\n\n    if (arg.stelt) {\n        let t;\n        if (dt > 630) {\n            t = sec2text(Math.ceil(dt / 60) * 60) + \" left\";\n        } else if (dt >= 0) {\n            t = sprintf(\"%d:%02d left\", Math.floor(dt / 60), dt % 60);\n        } else if (dt > -600) {\n            t = sprintf(\"%d:%02d over\", Math.floor(-dt / 60), -dt % 60);\n        } else {\n            t = sec2text(Math.floor(-dt / 60) * 60) + \" over\";\n        }\n        arg.stelt.replaceChildren(t);\n        toggleClass(arg.stelt, \"urgent\", dt <= 600 && dt > -900);\n    }\n\n    let nextdt;\n    if (dt > 660 || dt <= -600) {\n        nextdt = Math.floor((dt - 1) / 60) * 60;\n    } else if (dt > 630) {\n        nextdt = 630;\n    } else {\n        nextdt = Math.floor(dt - 0.1);\n    }\n\n    let alarmdelay = (arg.deadline - nextdt) * 1000 - 490 - now;\n    if (alarmdelay <= 0) {\n        alarmdelay += 1000;\n    }\n    arg.tmelt.pa__tmto = setTimeout(timermark_interval, alarmdelay, arg);\n}\n","// gc-text.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { GradeClass } from \"./gc.js\";\nimport { render_onto } from \"./render.js\";\nimport { addClass } from \"./ui.js\";\n\n\nfunction mount_edit(elt, id) {\n    addClass(elt, \"pa-textv\");\n    const ta = document.createElement(\"textarea\");\n    ta.className = \"uich uii pa-gradevalue need-autogrow pa-fresh\";\n    if (this.type === \"shorttext\") {\n        ta.setAttribute(\"rows\", 1);\n    }\n    ta.name = this.key;\n    ta.id = id;\n    ta.disabled = this.disabled;\n    return ta;\n}\n\nfunction update_show(ve, v, opts) {\n    if (v == null || v === \"\") {\n        ve.replaceChildren();\n    } else if (this.answer) {\n        opts.gradesheet.show_text_as_diff(ve, v, `/g/${this.key}`);\n    } else {\n        render_onto(ve, 0, v);\n    }\n}\n\nGradeClass.add(\"text\", {\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-textv\");\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: mount_edit,\n    update_show: update_show,\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n\nGradeClass.add(\"shorttext\", {\n    mount_show: function (elt, id) {\n        elt.id = id;\n        addClass(elt, \"pa-gradevalue\");\n    },\n    mount_edit: mount_edit,\n    update_show: update_show,\n    justify: \"left\",\n    sort: \"forward\",\n    type_tabular: false\n});\n","// popup.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { addClass, hasClass, removeClass, form_differs, $e } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport { feedback } from \"./render.js\";\n\n\nexport function $popup(options) {\n    options = options || {};\n    const near = options.near || options.anchor || window,\n        forme = $e(\"form\", {enctype: \"multipart/form-data\", \"accept-charset\": \"UTF-8\", class: options.form_class || null}),\n        modale = $e(\"div\", {class: \"modal\", role: \"dialog\", hidden: true},\n            $e(\"div\", {class: \"modal-dialog\".concat(near === window ? \" modal-dialog-centered\" : \"\", options.className ? \" \" + options.className : \"\"), role: \"document\"},\n                $e(\"div\", \"modal-content\", forme)));\n    if (options.action) {\n        if (options.action instanceof HTMLFormElement) {\n            forme.setAttribute(\"action\", options.action.action);\n            forme.setAttribute(\"method\", options.action.method);\n        } else {\n            forme.setAttribute(\"action\", options.action);\n            forme.setAttribute(\"method\", options.method || \"post\");\n        }\n        if (forme.getAttribute(\"method\") === \"post\"\n            && !/post=/.test(forme.getAttribute(\"action\"))\n            && !/^(?:[a-z][-a-z0-9+.]*:|\\/\\/)/i.test(forme.getAttribute(\"action\"))) {\n            forme.prepend($e(\"input\", {type: \"hidden\", name: \"post\", value: siteinfo.postvalue}));\n        }\n    }\n    for (const k of [\"minWidth\", \"maxWidth\", \"width\"]) {\n        if (options[k] != null)\n            $(modale.firstChild).css(k, options[k]);\n    }\n    $(modale).on(\"click\", dialog_click);\n    document.body.appendChild(modale);\n    document.body.addEventListener(\"keydown\", dialog_keydown);\n    let prior_focus, actionse;\n\n    function show_errors(data, filter_fields) {\n        $(forme).find(\".msg-error, .feedback, .feedback-list\").remove();\n        const gmlist = [];\n        for (const mi of data.message_list || []) {\n            const e = mi.field && forme.elements[mi.field];\n            if (e ? !feedback.append_item_near(e, mi) : !filter_fields || !mi.field) {\n                gmlist.push(mi);\n            }\n        }\n        if (gmlist.length) {\n            $(forme).find(\"h2\").after(feedback.render_alert(gmlist));\n        }\n    }\n    function close() {\n        removeClass(document.body, \"modal-open\");\n        document.body.removeEventListener(\"keydown\", dialog_keydown);\n        if (document.activeElement\n            && modale.contains(document.activeElement)) {\n            document.activeElement.blur();\n        }\n        $pa.tooltip.close();\n        $(modale).find(\"textarea, input\").unautogrow();\n        $(forme).trigger(\"closedialog\");\n        modale.remove();\n        if (prior_focus) {\n            prior_focus.focus({preventScroll: true});\n        }\n    }\n    function dialog_click(evt) {\n        if (evt.button === 0\n            && ((evt.target === modale && !form_differs(forme))\n                || (evt.target.nodeName === \"BUTTON\" && evt.target.name === \"cancel\"))) {\n            close();\n        }\n    }\n    function dialog_keydown(evt) {\n        if (event_key(evt) === \"Escape\"\n            && event_key.modcode(evt) === 0\n            && !hasClass(modale, \"hidden\")\n            && !form_differs(forme)) {\n            close();\n            evt.preventDefault();\n        }\n    }\n    const self = {\n        show: function () {\n            const e = document.activeElement;\n            $(modale).awaken();\n            popup_near(modale, near);\n            if (e && document.activeElement !== e) {\n                prior_focus = e;\n            }\n            $pa.tooltip.close();\n            // XXX also close down suggestions\n            return self;\n        },\n        append: function (...es) {\n            for (const e of es) {\n                if (e != null) {\n                    forme.append(e);\n                }\n            }\n            return self;\n        },\n        append_actions: function (...actions) {\n            if (!actionse) {\n                forme.appendChild((actionse = $e(\"div\", \"popup-actions\")));\n            }\n            for (const e of actions) {\n                if (e === \"Cancel\") {\n                    actionse.append($e(\"button\", {type: \"button\", name: \"cancel\"}, \"Cancel\"));\n                } else if (e != null) {\n                    actionse.append(e);\n                }\n            }\n            return self;\n        },\n        on: function (...args) {\n            $(forme).on(...args);\n            return self;\n        },\n        find: function (selector) {\n            return $(modale).find(selector);\n        },\n        querySelector: function (selector) {\n            return forme.querySelector(selector);\n        },\n        querySelectorAll: function (selector) {\n            return forme.querySelectorAll(selector);\n        },\n        form: function () {\n            return forme;\n        },\n        show_errors: show_errors,\n        close: close\n    };\n    return self;\n}\n\n// differences and focusing\nfunction focus_at(felt) {\n    felt.jquery && (felt = felt[0]);\n    felt.focus();\n    if (!felt.hotcrp_ever_focused) {\n        if (felt.select && hasClass(felt, \"want-select\")) {\n            felt.select();\n        } else if (felt.setSelectionRange) {\n            try {\n                felt.setSelectionRange(felt.value.length, felt.value.length);\n            } catch { // ignore errors\n            }\n        }\n        felt.hotcrp_ever_focused = true;\n    }\n}\n\nfunction popup_near(elt, anchor) {\n    tooltip.close();\n    if (elt.jquery) {\n        elt = elt[0];\n    }\n    while (!hasClass(elt, \"modal-dialog\")) {\n        elt = elt.childNodes[0];\n    }\n    const bgelt = elt.parentNode;\n    bgelt.hidden = false;\n    addClass(document.body, \"modal-open\");\n    if (!hasClass(elt, \"modal-dialog-centered\")) {\n        var anchorPos = $(anchor).geometry(),\n            wg = $(window).geometry(),\n            po = $(bgelt).offset(),\n            y = (anchorPos.top + anchorPos.bottom - elt.offsetHeight) / 2;\n        y = Math.max(wg.top + 5, Math.min(wg.bottom - 5 - elt.offsetHeight, y)) - po.top;\n        elt.style.top = y + \"px\";\n        var x = (anchorPos.right + anchorPos.left - elt.offsetWidth) / 2;\n        x = Math.max(wg.left + 5, Math.min(wg.right - 5 - elt.offsetWidth, x)) - po.left;\n        elt.style.left = x + \"px\";\n    }\n    queueMicrotask(function () {\n        for (const e of elt.querySelectorAll(\".want-focus\")) {\n            if (e.offsetWidth > 0) {\n                focus_at(e);\n                return;\n            }\n        }\n        for (const e of elt.querySelector(\"form\").elements) {\n            if (e.type !== \"hidden\"\n                && !hasClass(e, \"btn-danger\")\n                && !hasClass(e, \"no-focus\")\n                && e.offsetWidth > 0) {\n                focus_at(e);\n                return;\n            }\n        }\n    });\n}\n","// ptable-grades.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { addClass, removeClass, toggleClass, $e, input_differs, handle_ui } from \"./ui.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { escape_entities } from \"./encoders.js\";\nimport { $popup } from \"./popup.js\";\nimport { render_xmsg } from \"./render.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\n\n\nfunction make_uid2tr(tr) {\n    const uid2tr = {};\n    while (tr) {\n        const uid = tr.getAttribute(\"data-pa-uid\");\n        uid && (uid2tr[tr.getAttribute(\"data-pa-uid\")] = tr);\n        tr = tr.nextSibling;\n    }\n    return uid2tr;\n}\n\nfunction grade_update(ptconf, uid2tr, rv, refreshflags) {\n    const tr = uid2tr[rv.uid], su = ptconf.uidmap[rv.uid],\n        oldgrades = [].concat(su.grades || []);\n    su.assign(rv);\n    let ngrades = 0;\n    for (let gv of su.grades || []) {\n        if (gv != null && gv !== \"\")\n            ++ngrades;\n    }\n    su.ngrades = ngrades;\n    for (let c of ptconf.col) {\n        if (((c.refreshable || 0) & refreshflags) !== 0)\n            c.td.call(c, tr.childNodes[c.index], su, {oldgrades: oldgrades});\n    }\n}\n\nfunction gdialog_gradelist_change() {\n    toggleClass(this.closest(\".pa-pv\"), \"pa-grade-changed\",\n                this.hasAttribute(\"data-pa-unmixed\") || input_differs(this));\n}\n\nfunction gdialog_section_click(event) {\n    if (event.type === \"click\" && !event.shiftKey) {\n        const checked = this.checked;\n        let l = this.closest(\"label\");\n        while ((l = l.nextSibling)) {\n            const ch = l.firstChild.firstChild;\n            if (ch.classList.contains(\"pa-gdialog-section\"))\n                break;\n            ch.checked = checked;\n        }\n    }\n}\n\nfunction $checkbox(attr, ...label) {\n    return $e(\"label\", \"checki\",\n        $e(\"span\", \"checkc\", $e(\"input\", attr)),\n        ...label);\n}\n\nfunction $save_action(name) {\n    return $e(\"div\", \"popup-actions\", $e(\"button\", {type: \"button\", \"class\": \"btn btn-primary\", name: name}, \"Save\"));\n}\n\n\nexport function ptable_gdialog(ptconf, checked_spos, table, hlgrade) {\n    let $gdialog, form, gdialog_su,\n        gradesheet = ptconf.gradesheet,\n        uid2tr = make_uid2tr(table.tBodies[0].firstChild);\n\n    function gdialog_store_start(rv) {\n        $gdialog.find(\".has-error\").removeClass(\"has-error\");\n        if (rv.ok) {\n            $gdialog.find(\".pa-messages\").html(\"\");\n        } else {\n            $gdialog.find(\".pa-messages\").html(render_xmsg(2, escape_entities(rv.error)));\n            if (rv.errf) {\n                $gdialog.find(\".pa-gradevalue\").each(function () {\n                    if (rv.errf[this.name])\n                        addClass(this, \"has-error\");\n                });\n            }\n        }\n    }\n\n    function gdialog_store(next) {\n        let any = false, byuid = {};\n        $gdialog.find(\".pa-gradevalue\").each(function () {\n            if ((this.hasAttribute(\"data-pa-unmixed\") || input_differs(this))\n                && !this.indeterminate) {\n                let k = this.name, ge = gradesheet.entries[k], v;\n                if (this.type === \"checkbox\") {\n                    v = this.checked ? this.value : \"\";\n                } else {\n                    v = $(this).val();\n                }\n                for (let su of gdialog_su) {\n                    byuid[su.uid] = byuid[su.uid] || {grades: {}, oldgrades: {}};\n                    byuid[su.uid].grades[k] = v;\n                    byuid[su.uid].oldgrades[k] = ge.value_in(su);\n                }\n                any = true;\n            }\n        });\n        next = next || function () { $gdialog.close(); };\n        if (!any) {\n            next();\n        } else if (gdialog_su.length === 1) {\n            api_conditioner(hoturl(\"=api/grade\", ptconf.url_gradeparts(gdialog_su[0])),\n                byuid[gdialog_su[0].uid])\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                if (rv.ok) {\n                    grade_update(ptconf, uid2tr, rv, 1);\n                    next();\n                }\n            });\n        } else {\n            for (let su of gdialog_su) {\n                if (su.grade_commit) {\n                    byuid[su.uid].commit = su.grade_commit;\n                    byuid[su.uid].commit_is_grade = 1;\n                } else if (su.commit) {\n                    byuid[su.uid].commit = su.commit;\n                }\n            }\n            api_conditioner(hoturl(\"=api/multigrade\", {pset: ptconf.key}),\n                {us: JSON.stringify(byuid)})\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                if (rv.ok) {\n                    for (let rvu of rv.us) {\n                        grade_update(ptconf, uid2tr, rvu, 1);\n                    }\n                    next();\n                }\n            });\n        }\n    }\n\n    function gdialog_clearauto() {\n        const byuid = {}, noauto = {};\n        for (const te of ptconf.gradesheet.value_entries()) {\n            noauto[te.key] = null;\n        }\n        for (let su of gdialog_su) {\n            const x = byuid[su.uid] = {};\n            if (su.grade_commit) {\n                x.commit = su.grade_commit;\n                x.commit_is_grade = 1;\n            } else if (su.commit) {\n                x.commit = su.commit;\n            }\n            x.autogrades = noauto;\n        }\n        api_conditioner(hoturl(\"=api/multigrade\", {pset: ptconf.key}),\n            {us: JSON.stringify(byuid)})\n        .then(function (rv) {\n            gdialog_store_start(rv);\n            if (rv.ok) {\n                for (let rvu of rv.us) {\n                    grade_update(ptconf, uid2tr, rvu, 1);\n                }\n                $gdialog.close();\n            }\n        });\n    }\n\n    function gdialog_traverse() {\n        const next_spos = this.getAttribute(\"data-pa-spos\");\n        gdialog_store(function () { gdialog_fill([next_spos]); });\n    }\n\n    function gdialog_fill_user(su1) {\n        let tr = table.tBodies[0].firstChild, tr1;\n        while (tr && tr.getAttribute(\"data-pa-spos\") != su1._spos) {\n            tr = tr.nextSibling;\n        }\n        for (tr1 = tr; tr1 && (tr1 === tr || !tr1.hasAttribute(\"data-pa-spos\")); ) {\n            tr1 = tr1.previousSibling;\n        }\n        $gdialog.find(\"button[name=prev]\").attr(\"data-pa-spos\", tr1 ? tr1.getAttribute(\"data-pa-spos\") : \"\").prop(\"disabled\", !tr1).removeClass(\"hidden\");\n        for (tr1 = tr; tr1 && (tr1 === tr || !tr1.hasAttribute(\"data-pa-spos\")); ) {\n            tr1 = tr1.nextSibling;\n        }\n        $gdialog.find(\"button[name=next]\").attr(\"data-pa-spos\", tr1 ? tr1.getAttribute(\"data-pa-spos\") : \"\").prop(\"disabled\", !tr1).removeClass(\"hidden\");\n    }\n    function gdialog_fill(spos) {\n        gdialog_su = [];\n        for (let i = 0; i !== spos.length; ++i) {\n            gdialog_su.push(ptconf.smap[spos[i]]);\n        }\n        ptconf.render_gdialog_users($gdialog.find(\"h3\")[0], gdialog_su);\n        if (gdialog_su.length === 1) {\n            gdialog_fill_user(gdialog_su[0]);\n        }\n\n        $gdialog.find(\".pa-grade\").each(function () {\n            let k = this.getAttribute(\"data-pa-grade\"),\n                ge = gradesheet.entries[k],\n                gidx = ge.value_order_in(gradesheet),\n                sv = gdialog_su[0].grades[gidx],\n                opts = {reset: true, mixed: false};\n            if (gdialog_su.length === 1) {\n                opts.gradesheet = gdialog_su[0];\n                opts.autograde = ge.autovalue_in(gdialog_su[0]);\n            } else {\n                for (let i = 1; i !== gdialog_su.length; ++i) {\n                    let suv = gdialog_su[i].grades[gidx];\n                    if (suv !== sv\n                        && !(suv == null && sv === \"\")\n                        && !(suv === \"\" && sv == null)) {\n                        sv = null;\n                        opts.mixed = true;\n                        break;\n                    }\n                }\n            }\n            ge.update_at(this, sv, opts);\n        });\n    }\n\n    function gdialog_key(event) {\n        let $b;\n        if (event.ctrlKey\n            && (event.key === \"n\" || event.key === \"p\")\n            && ($b = $gdialog.find(\"button[name=\" + (event.key === \"n\" ? \"next\" : \"prev\") + \"]\"))\n            && !$b[0].disabled) {\n            gdialog_traverse.call($b[0]);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Return\" || event.key === \"Enter\") {\n            gdialog_store(null);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Esc\" || event.key === \"Escape\") {\n            event.stopImmediatePropagation();\n            event.preventDefault();\n            $gdialog.close();\n        } else if (event.key === \"Backspace\"\n                   && this.hasAttribute(\"placeholder\")\n                   && this.closest(\".pa-gradelist\")) {\n            gdialog_gradelist_input.call(this);\n        }\n    }\n\n    function gdialog_gradelist_input() {\n        removeClass(this, \"has-error\");\n        if (this.hasAttribute(\"placeholder\")) {\n            this.setAttribute(\"data-pa-unmixed\", 1);\n            this.removeAttribute(\"placeholder\");\n            gdialog_gradelist_change.call(this);\n        }\n    }\n\n    function gdialog_mode_values() {\n        const gl = $gdialog.find(\".pa-gradelist\")[0];\n        if (!gl.firstChild) {\n            const gi = GradeSheet.closest(gl);\n            for (const ge of gi.value_entries()) {\n                if (!ge.readonly) {\n                    gl.appendChild(ge.render(gi, 1));\n                }\n            }\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gl.classList.remove(\"hidden\");\n        removeClass(form.elements.bsubmit, \"hidden\");\n        removeClass(form.elements.clearauto, \"hidden\");\n    }\n    function gdialog_settings_submit() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0],\n            us = {};\n        for (let su of gdialog_su) {\n            us[su.uid] = {uid: su.uid};\n        }\n        if (this.name === \"save-gvis\") {\n            let gvisarg;\n            $(gs).find(\".pa-gvis\").each(function () {\n                if (this.checked && !this.indeterminate)\n                    gvisarg = JSON.parse(this.value);\n            });\n            for (let su of gdialog_su) {\n                us[su.uid].scores_visible = gvisarg;\n            }\n        } else if (this.name === \"save-grader\"\n                   && form.elements.gradertype.value === \"clear\") {\n            for (let su of gdialog_su) {\n                us[su.uid].gradercid = 0;\n            }\n        } else if (this.name === \"save-grader\"\n                   && form.elements.gradertype.value === \"previous\") {\n            for (let su of gdialog_su) {\n                us[su.uid].gradercid = \"previous\";\n            }\n        } else if (this.name === \"save-grader\") {\n            let gr = [], gri = [], grn = 0;\n            $(gs).find(\".pa-grader\").each(function () {\n                if (this.checked && !this.indeterminate) {\n                    gr.push(+this.name.substring(6));\n                    gri.push(1);\n                    ++grn;\n                }\n            });\n            if (grn) {\n                for (let su of gdialog_su) {\n                    let trigger = Math.floor(Math.random() * grn), gi = 0;\n                    while (trigger >= gri[gi]) {\n                        trigger -= Math.max(gri[gi], 0);\n                        ++gi;\n                    }\n                    us[su.uid].gradercid = gr[gi];\n                    grn -= Math.min(gri[gi], 1);\n                    --gri[gi];\n                    if (grn <= 0) {\n                        grn = 0;\n                        for (gi in gri) {\n                            ++gri[gi];\n                            grn += Math.max(gri[gi], 0);\n                        }\n                    }\n                }\n            }\n        } else if (this.name === \"save-repo\") {\n            const clearrepo = form.elements.clearrepo.checked,\n                adoptoldrepo = form.elements.adoptoldrepo.checked;\n            for (let su of gdialog_su) {\n                clearrepo && (us[su.uid].clearrepo = true);\n                adoptoldrepo && (us[su.uid].adoptoldrepo = true);\n            }\n        } else if (this.name === \"save-dropped\") {\n            const l = form.querySelectorAll(\".pa-dropped:checked\");\n            if (l.length !== 1) {\n                return;\n            }\n            for (let su of gdialog_su) {\n                us[su.uid].dropped = l[0].value === \"true\";\n            }\n        }\n        this.disabled = true;\n        const usc = [];\n        for (let su of gdialog_su) {\n            usc.push(us[su.uid]);\n        }\n        const progress = document.createElement(\"progress\");\n        progress.max = usc.length;\n        progress.className = \"float-right\";\n        this.after(progress);\n        let usci = 0;\n        function more() {\n            const byuid = usc.slice(usci, usci + 16);\n            usci += byuid.length;\n            api_conditioner(hoturl(\"=api/gradesettings\", {pset: ptconf.key}),\n                {us: JSON.stringify(byuid)},\n                {timeout: 20000})\n            .then(function (rv) {\n                gdialog_store_start(rv);\n                progress.value = usci;\n                if (rv.ok && rv.us) {\n                    for (let rvu of rv.us) {\n                        grade_update(ptconf, uid2tr, rvu, 3);\n                    }\n                }\n                if (rv.ok && usci < usc.length) {\n                    more();\n                } else {\n                    $gdialog.close();\n                }\n            })\n        }\n        more();\n    }\n    function gdialog_settings_gvis_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0];\n        $(gs).find(\".pa-gvis\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        this.checked = true;\n    }\n    function gdialog_settings_dropped_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0];\n        $(gs).find(\".pa-dropped\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        $(gs).find(\"button[name=save-dropped]\").prop(\"disabled\", false);\n        this.checked = true;\n    }\n    function gdialog_settings_grader_click() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0], self = this;\n        $(gs).find(\".pa-grader:indeterminate\").each(function () {\n            if (self !== this && this.indeterminate) {\n                this.checked = false;\n            }\n            this.indeterminate = false;\n        });\n        if (this.checked) {\n            gs.closest(\"form\").elements.gradertype.value = \"set\";\n        } else {\n            setTimeout(function () {\n                if ($(gs).find(\".pa-grader:checked\").length === 0)\n                    gs.closest(\"form\").elements.gradertype.value = \"clear\";\n            }, 0);\n        }\n    }\n    function gdialog_fill_settings(gs) {\n        const itype = gdialog_su.length === 1 ? \"radio\" : \"checkbox\";\n        gs.append($e(\"fieldset\", null,\n            $e(\"legend\", null, \"Grade visibility\"),\n            $e(\"div\", \"multicol-3\",\n                $checkbox({name: \"gvis\", value: \"true\", type: itype, \"class\": \"uic pa-gvis\"}, \"Visible\"),\n                $checkbox({name: \"gvis\", value: \"false\", type: itype, \"class\": \"uic pa-gvis\"}, \"Hidden\"),\n                $checkbox({name: \"gvis\", value: \"null\", type: itype, \"class\": \"uic pa-gvis\"}, \"Default (\" + (ptconf.scores_visible ? \"visible\" : \"hidden\") + \")\")),\n            $save_action(\"save-gvis\")));\n\n        const gradertable = $e(\"div\", \"checki mt-1 multicol-3\");\n        for (let i = 0; i !== siteinfo.pc.__order__.length; ++i) {\n            const cid = siteinfo.pc.__order__[i], pc = siteinfo.pc[cid];\n            gradertable.append($checkbox({name: \"grader\" + cid, value: \"1\", type: \"checkbox\", \"class\": \"uic js-range-click pa-grader\", \"data-range-type\": \"grader\"}, pc.name, $e(\"span\", \"ct small dim\")));\n        }\n        gs.append($e(\"fieldset\", \"mt-3\",\n            $e(\"legend\", null, \"Grader\"),\n            $checkbox({name: \"gradertype\", value: \"clear\", type: \"radio\", \"class\": \"uic\"}, \"Clear\"),\n            $checkbox({name: \"gradertype\", value: \"set\", type: \"radio\", \"class\": \"uic\"}, \"Set grader\"),\n            gradertable,\n            $save_action(\"save-grader\")));\n\n        if (!ptconf.gitless) {\n            gs.append($e(\"fieldset\", \"mt-3\",\n                $e(\"legend\", null, \"Repository\"),\n                $checkbox({name: \"clearrepo\", value: 1, type: \"checkbox\", \"class\": \"uic\"}, \"Clear repository\"),\n                ptconf.has_older_repo ? $checkbox({name: \"adoptoldrepo\", value: 1, type: \"checkbox\", \"class\": \"uic\"}, \"Adopt previous repository\") : null,\n                $save_action(\"save-repo\")));\n        }\n\n        if (siteinfo.user.is_admin) {\n            gs.append($e(\"fieldset\", \"mt-3\",\n                $e(\"legend\", null, \"Enrollment\"),\n                $e(\"div\", \"multicol-2\",\n                    $checkbox({name: \"dropped\", value: \"false\", type: itype, \"class\": \"uic pa-dropped\"}, \"Enrolled\"),\n                    $checkbox({name: \"dropped\", value: \"true\", type: itype, \"class\": \"uic pa-dropped\"}, \"Dropped\")),\n                $save_action(\"save-dropped\")));\n        }\n\n        $(gs).on(\"click\", \"button\", gdialog_settings_submit);\n        $(gs).on(\"click\", \".pa-grader\", gdialog_settings_grader_click);\n        $(gs).on(\"click\", \".pa-gvis\", gdialog_settings_gvis_click);\n        $(gs).on(\"click\", \".pa-dropped\", gdialog_settings_dropped_click);\n    }\n    function gdialog_mode_settings() {\n        const gs = $gdialog.find(\".pa-gdialog-settings\")[0], f = gs.closest(\"form\");\n        gs.firstChild || gdialog_fill_settings(gs);\n\n        const gvis = {}, ggr = {}, ggra = {}, gdropped = {};\n        for (let su of gdialog_su) {\n            if (!su.scores_visible_pinned) {\n                gvis[\"null\"] = (gvis[\"null\"] || 0) + 1;\n            } else if (su.scores_visible) {\n                gvis[\"true\"] = (gvis[\"true\"] || 0) + 1;\n            } else {\n                gvis[\"false\"] = (gvis[\"false\"] || 0) + 1;\n            }\n            const grcid = su.gradercid || 0;\n            ggr[grcid] = (ggr[grcid] || 0) + 1;\n            const dropped = su.dropped ? \"true\" : \"false\";\n            gdropped[dropped] = (gdropped[dropped] || 0) + 1;\n        }\n        for (let su of ptconf.smap) {\n            if (su) {\n                const grcid = su.gradercid || 0;\n                ggra[grcid] = (ggra[grcid] || 0) + 1;\n            }\n        }\n        $(gs).find(\"input\").prop(\"checked\", false).prop(\"indeterminate\", false);\n        for (let x in gvis) {\n            $(gs).find(\".pa-gvis[value=\" + x + \"]\").prop(\"checked\", !!gvis[x]).prop(\"indeterminate\", gvis[x] && gvis[x] !== gdialog_su.length);\n        }\n        $(gs).find(\"input[name=gradertype][value=\" + ((ggr[0] || 0) === gdialog_su.length ? \"clear\" : \"set\") + \"]\").prop(\"checked\", true);\n        for (let x in ggr) {\n            if (x != 0) {\n                const e = f.elements[\"grader\" + x];\n                e.checked = true;\n                e.indeterminate = ggr[x] !== gdialog_su.length;\n            }\n        }\n        $(gs).find(\".pa-grader\").each(function () {\n            const grcid = +this.name.substring(6),\n                ngr = ggr[grcid] || 0, ngra = ggra[grcid] || 0,\n                elt = this.closest(\".checki\").lastChild;\n            if (ngra && ngr === ngra) {\n                elt.textContent = \" (\".concat(ngra, \")\");\n            } else if (ngra) {\n                elt.textContent = \" (\".concat(ngr, \"/\", ngra, \")\");\n            } else {\n                elt.textContent = \"\";\n            }\n        });\n        for (let x in gdropped) {\n            $(gs).find(\".pa-dropped[value=\" + x + \"]\").prop(\"checked\", !!gdropped[x]).prop(\"indeterminate\", gdropped[x] && gdropped[x] !== gdialog_su.length);\n        }\n        if (gdropped[\"true\"] && gdropped[\"false\"]) {\n            $(gs).find(\"button[name=save-dropped]\").prop(\"disabled\", true);\n        }\n\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gs.classList.remove(\"hidden\");\n        addClass(form.elements.bsubmit, \"hidden\");\n        addClass(form.elements.clearauto, \"hidden\");\n    }\n    function gdialog_mode() {\n        $gdialog.find(\".nav-pills button\").removeClass(\"btn-primary\");\n        if (this.name === \"mode-settings\") {\n            gdialog_mode_settings();\n        } else {\n            gdialog_mode_values();\n        }\n        this.classList.add(\"btn-primary\");\n    }\n\n    function show() {\n        $gdialog = $popup({className: \"modal-dialog-wide\"})\n            .append($e(\"h2\", \"pa-home-pset\", ptconf.title + \" Grades\"),\n                $e(\"h3\", \"gdialog-userids hidden\"),\n                $e(\"div\", \"pa-messages\"),\n                $e(\"div\", \"nav-pills\",\n                    $e(\"button\", {type: \"button\", class: \"btn btn-primary no-focus is-mode\", name: \"mode-values\"}, \"Values\"),\n                    $e(\"button\", {type: \"button\", class: \"btn no-focus is-mode\", name: \"mode-settings\"}, \"Settings\")),\n                $e(\"div\", \"pa-gdialog-tab pa-gradelist is-modal\"),\n                $e(\"div\", \"pa-gdialog-tab pa-gdialog-settings hidden\"))\n            .append_actions($e(\"button\", {type: \"button\", name: \"bsubmit\", class: \"btn-primary\"}, \"Save\"),\n                \"Cancel\",\n                $e(\"span\", \"btnbox btnl\",\n                    $e(\"button\", {type: \"button\", name: \"prev\", class: \"btnl\"}, \"<\"),\n                    $e(\"button\", {type: \"button\", name: \"next\", class: \"btnl\"}, \">\")),\n                $e(\"button\", {type: \"button\", name: \"clearauto\", class: \"btnl\"}, \"Clear autogrades\"));\n        form = $gdialog.form();\n        addClass(form, \"pa-psetinfo\");\n        form.pa__gradesheet = ptconf.gradesheet;\n        gdialog_mode_values();\n        $gdialog.on(\"click\", \".pa-gdialog-section\", gdialog_section_click);\n        $gdialog.on(\"change blur\", \".pa-gradevalue\", gdialog_gradelist_change);\n        $gdialog.on(\"input change\", \".pa-gradevalue\", gdialog_gradelist_input);\n        $gdialog.on(\"keydown\", gdialog_key);\n        $gdialog.on(\"keydown\", \"input, textarea, select\", gdialog_key);\n        //$gdialog.find(\".pa-gradelist\").on(\"input\", \"input, textarea, select\", gdialog_gradelist_input);\n        $gdialog.find(\"button[name=bsubmit]\").on(\"click\", function () { gdialog_store(null); });\n        $gdialog.find(\"button[name=clearauto]\").on(\"click\", gdialog_clearauto);\n        $gdialog.find(\"button[name=prev], button[name=next]\").on(\"click\", gdialog_traverse);\n        $gdialog.find(\"button.is-mode\").on(\"click\", gdialog_mode);\n        $gdialog.find(\"button[name=prev], button[name=next]\").prop(\"disabled\", true).addClass(\"hidden\");\n        gdialog_fill(checked_spos);\n        if (hlgrade && form.elements[hlgrade]) {\n            addClass(form.elements[hlgrade], \"want-focus\");\n            addClass(form.elements[hlgrade], \"want-select\");\n        }\n        $gdialog.show();\n    }\n\n    show();\n}\n\nhandle_ui.on(\"js-gdialog\", function () {\n    const f = this.closest(\"form\"), ptconf = f.pa__ptconf,\n        sus = ptconf.users_in(f, ptconf.CHECKED_USERS);\n    if (sus.length === 0) {\n        alert(\"Select one or more students first\");\n    } else {\n        const spos = [];\n        for (const su of sus) {\n            spos.push(su._spos);\n        }\n        ptable_gdialog(ptconf, spos, f.querySelector(\"table.gtable\"));\n    }\n});\n","// ptable-diff.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, handle_ui, $e } from \"./ui.js\";\nimport { hoturl_get_go } from \"./hoturl.js\";\nimport { $popup } from \"./popup.js\";\n\n\nfunction gdialog_section_click(event) {\n    if (event.type === \"click\" && !event.shiftKey) {\n        const checked = this.checked;\n        let l = this.closest(\"label\");\n        while ((l = l.nextSibling)) {\n            const ch = l.firstChild.firstChild;\n            if (ch.classList.contains(\"pa-gdialog-section\"))\n                break;\n            ch.checked = checked;\n        }\n    }\n}\n\n\nfunction ptable_diffdialog(ptconf, sus) {\n    let $gdialog, gdform,\n        gradesheet = ptconf.gradesheet;\n\n    function sus_uids() {\n        const uids = [];\n        for (const su of sus) {\n            uids.push(su.uid);\n        }\n        return uids.join(\" \");\n    }\n\n    function do_diff() {\n        const v = gdform.elements.diff.value,\n            opt = {pset: ptconf.key, anonymous: ptconf.anonymous ? 1 : \"\", users: sus_uids()};\n        if (v === \"other\" && gdform.elements.otherdiff.value) {\n            opt.files = gdform.elements.otherdiff.value.trim();\n        } else if (v.startsWith(\"file:\") && v.length > 5) {\n            opt.file = v.substring(5);\n        } else if (v.startsWith(\"grade:\") && v.length > 6) {\n            const ge = gradesheet.entries[v.substring(6)];\n            if (ge.landmark_range_file) {\n                opt.file = ge.landmark_range_file;\n                opt.lines = ge.landmark_range_first + \"-\" + ge.landmark_range_last;\n            } else {\n                opt.grade = ge.key;\n            }\n        }\n        hoturl_get_go(\"diffmany\", opt);\n    }\n\n    function do_gradesheet() {\n        const $gsi = $gdialog.find(\".pa-gdialog-gradesheet input\"),\n            ge = [];\n        for (let i = 0; i !== $gsi.length; ++i) {\n            if ($gsi[i].checked)\n                ge.push(gradesheet.entries[$gsi[i].name]);\n        }\n        if (ge.length === 0) {\n            alert(\"No grades selected.\");\n        } else {\n            const opt = {pset: ptconf.key, anonymous: ptconf.anonymous ? 1 : \"\", users: sus_uids()};\n            if (ge.length === 1 && ge[0].landmark_range_file) {\n                opt.file = ge[0].landmark_range_file;\n                opt.lines = ge[0].landmark_range_first + \"-\" + ge[0].landmark_range_last;\n            }\n            opt.grade = ge[0].key;\n            for (let i = 1; i !== ge.length; ++i) {\n                opt.grade += \" \" + ge[i].key;\n            }\n            hoturl_get_go(\"diffmany\", opt);\n        }\n    }\n\n    function do_report() {\n        const report = gdform.elements.report.value || \"default\";\n        if (report === \"copyemails\") {\n            const us = [];\n            for (const su of sus) {\n                let name = \"\";\n                if (su.first != null && su.last != null) {\n                    name = su.first.concat(\" \", su.last);\n                } else if (su.first != null) {\n                    name = su.first;\n                } else if (su.last != null) {\n                    name = su.last;\n                }\n                if (name !== \"\" && /^[-A-Z a-z]*$/.test(name)) {\n                    us.push(name.concat(\" <\", su.email, \">\"));\n                } else if (name !== \"\") {\n                    name = name.replace(/\"/g, \"\\\\\\\"\");\n                    us.push(\"\\\"\".concat(name, \"\\\" <\", su.email, \">\"));\n                } else {\n                    us.push(su.email);\n                }\n            }\n            navigator.clipboard.writeText(us.join(\", \"));\n            $gdialog.close();\n        } else {\n            const opt = {\n                pset: ptconf.key,\n                anonymous: ptconf.anonymous ? 1 : \"\",\n                users: sus_uids(),\n                report: gdform.elements.report.value || \"default\"\n            };\n            hoturl_get_go(\"report\", opt);\n        }\n    }\n\n    function do_submit() {\n        if (hasClass(gdform.elements[\"mode-diff\"], \"btn-primary\")) {\n            do_diff();\n        } else if (hasClass(gdform.elements[\"mode-gradesheet\"], \"btn-primary\")) {\n            do_gradesheet();\n        } else {\n            do_report();\n        }\n    }\n\n    function do_key(event) {\n        if (event.key === \"Return\" || event.key === \"Enter\") {\n            do_submit(null);\n            event.stopImmediatePropagation();\n            event.preventDefault();\n        } else if (event.key === \"Esc\" || event.key === \"Escape\") {\n            event.stopImmediatePropagation();\n            event.preventDefault();\n            $gdialog.close();\n        }\n    }\n\n    function mode_diff() {\n        const dv = $gdialog.find(\".pa-gdialog-diff\")[0];\n        if (!dv.firstChild) {\n            const es = [];\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"all\", checked: true})), $e(\"strong\", null, \"Full diffs\")));\n            let sep = \" mt-2\";\n            for (const fd of ptconf.diff_files) {\n                es.push($e(\"label\", \"checki\" + sep, $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"file:\" + fd})), fd));\n                sep = \"\";\n            }\n            sep = \" mt-2\";\n            for (const gkey of gradesheet.order) {\n                const ge = gradesheet.entries[gkey];\n                if (ge.collate) {\n                    es.push($e(\"label\", \"checki\" + sep, $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"grade:\" + ge.key})), ge.title_node));\n                    sep = \"\";\n                }\n            }\n            if (!ptconf.gitless) {\n                const input = $e(\"input\", {type: \"text\", name: \"otherdiff\", size: \"30\", class: \"ml-2\"});\n                es.push($e(\"label\", \"checki mt-2\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"diff\", value: \"other\"})), \"Diffs in \", input));\n                input.addEventListener(\"input\", function () {\n                    this.closest(\"label\").querySelector(\"input[type=radio]\").click();\n                });\n            }\n            dv.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        dv.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Show diffs\";\n    }\n    function mode_gradesheet() {\n        const gs = $gdialog.find(\".pa-gdialog-gradesheet\")[0];\n        if (!gs.firstChild) {\n            const es = [];\n            let in_section = false;\n            for (const gkey of gradesheet.order) {\n                const ge = gradesheet.entries[gkey],\n                    gcl = in_section && ge.type !== \"section\" ? \"checki ml-4\" : \"checki\",\n                    ccl = ge.type === \"section\" ? \" pa-gdialog-section\" : \"\";\n                es.push($e(\"label\", gcl, $e(\"span\", \"checkc\", $e(\"input\", {type: \"checkbox\", name: ge.key, class: \"uic js-range-click\" + ccl, \"data-range-type\": \"mge\"})), ge.title_node));\n                in_section = in_section || ge.type === \"section\";\n            }\n            gs.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        gs.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Edit gradesheet\";\n    }\n    function mode_report() {\n        const dv = $gdialog.find(\".pa-gdialog-report\")[0];\n        if (!dv.firstChild) {\n            const es = [];\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"default\", checked: true})), \"Grades\"));\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"nameemail\"})), \"Name and email\"));\n            if (!ptconf.gitless) {\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"git\"})), \"Git information\"));\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"githistory\"})), \"Git history\"));\n            }\n            for (const fd of ptconf.reports) {\n                es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: fd.key})), fd.title));\n            }\n            es.push($e(\"label\", \"checki\", $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"report\", value: \"copyemails\"})), \"Copy emails to clipboard\"));\n            dv.replaceChildren(...es);\n        }\n        $gdialog.find(\".pa-gdialog-tab\").addClass(\"hidden\");\n        dv.classList.remove(\"hidden\");\n        gdform.elements.bsubmit.textContent = \"Download\";\n    }\n    function do_mode() {\n        $gdialog.find(\".nav-pills button\").removeClass(\"btn-primary\");\n        if (this.name === \"mode-report\") {\n            mode_report();\n        } else if (this.name === \"mode-gradesheet\") {\n            mode_gradesheet();\n        } else {\n            mode_diff();\n        }\n        this.classList.add(\"btn-primary\");\n    }\n\n    function show() {\n        $gdialog = $popup({className: \"modal-dialog-wide\"})\n            .append($e(\"h2\", \"pa-home-pset\", ptconf.title + \" Diffs\"),\n                $e(\"h3\", \"gdialog-userids hidden\"),\n                $e(\"div\", \"pa-messages\"),\n                $e(\"div\", \"nav-pills\",\n                    $e(\"button\", {type: \"button\", class: \"btn btn-primary no-focus is-mode\", name: \"mode-diff\"}, \"Diff\"),\n                    $e(\"button\", {type: \"button\", class: \"btn no-focus is-mode\", name: \"mode-gradesheet\"}, \"Gradesheet\"),\n                    $e(\"button\", {type: \"button\", class: \"btn no-focus is-mode\", name: \"mode-report\"}, \"Reports\")),\n                $e(\"div\", \"pa-gdialog-tab pa-gdialog-diff is-modal\"),\n                $e(\"div\", \"pa-gdialog-tab pa-gdialog-gradesheet multicol-3 hidden\"),\n                $e(\"div\", \"pa-gdialog-tab pa-gdialog-report hidden\"))\n            .append_actions($e(\"button\", {type: \"button\", name: \"bsubmit\", class: \"btn-primary\"}, \"Save\"), \"Cancel\");\n        gdform = $gdialog.form();\n        addClass(gdform, \"pa-psetinfo\");\n        gdform.pa__gradesheet = ptconf.gradesheet;\n        mode_diff();\n        $gdialog.on(\"click\", \".pa-gdialog-section\", gdialog_section_click);\n        $gdialog.on(\"keydown\", do_key);\n        $gdialog.on(\"keydown\", \"input, textarea, select\", do_key);\n        $(gdform.elements.bsubmit).on(\"click\", do_submit);\n        $gdialog.find(\"button.is-mode\").on(\"click\", do_mode);\n        $gdialog.show();\n    }\n\n    show();\n}\n\nhandle_ui.on(\"js-ptable-diff\", function () {\n    const f = this.closest(\"form\"), ptconf = f.pa__ptconf;\n    ptable_diffdialog(ptconf, ptconf.users_in(f, ptconf.SOME_USERS));\n});\n","// cluster-diff.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, handle_ui } from \"./ui.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\n\nfunction pa_cluster_diff() {\n    const cgi = GradeSheet.closest(this),\n        cpi = this.closest(\".pa-psetinfo\"),\n        gkey = this.getAttribute(\"data-pa-grade\");\n    if (!cgi || !cpi || !gkey) {\n        return;\n    }\n    const ge = cgi.xentry(gkey);\n    if (!ge) {\n        return;\n    }\n\n    // collect info\n    const sxs = [];\n    let max_index = 0, any_unindexed = false, last = null;\n    for (let e = cpi.firstElementChild; e; e = e.nextElementSibling) {\n        if (!hasClass(e, \"pa-psetinfo\")) {\n            sxs.length || (last = e);\n            continue;\n        }\n        const sgi = GradeSheet.closest(e), index = +e.getAttribute(\"data-pa-index\");\n        sxs.push({\n            element: e,\n            value: ge.value_in(sgi),\n            index: index,\n            sorted: false\n        });\n        max_index = Math.max(max_index, index);\n        any_unindexed = any_unindexed || index === 0;\n    }\n    if (any_unindexed) {\n        for (const sx of sxs) {\n            if (sx.index === 0) {\n                ++max_index;\n                sx.index = max_index;\n                sx.element.setAttribute(\"data-pa-index\", max_index);\n            }\n        }\n    }\n\n    // cluster\n    let ckey = this.getAttribute(\"data-pa-clustering\"), carg = \"\";\n    const colon = ckey.indexOf(\":\");\n    if (colon >= 0) {\n        carg = ckey.substring(colon + 1);\n        ckey = ckey.substring(0, colon);\n    }\n    if (ckey === \"none\") {\n        cluster_by_none(sxs);\n    } else if (ckey === \"multiple-choice\") {\n        cluster_by_multiple_choice(sxs, carg);\n    } else {\n        cluster_by_length(sxs);\n    }\n\n    // apply clustering\n    last = last.nextElementSibling;\n    for (const sx of sxs) {\n        if (sx.element !== last) {\n            cpi.insertBefore(sx.element, last);\n        } else {\n            last = last.nextElementSibling;\n        }\n    }\n}\n\nfunction cluster_by_none(sxs) {\n    const coll = new Intl.Collator(\"en-US\", {numeric: true});\n    sxs.sort((a, b) => {\n        const aid = a.element.id, bid = b.element.id;\n        return aid && bid ? coll.compare(aid, bid) : a.index - b.index;\n    });\n}\n\nfunction cluster_by_length(sxs) {\n    sxs.sort((a, b) => {\n        const av = (a.value || \"\").length, bv = (b.value || \"\").length;\n        if (av !== bv) {\n            return av < bv ? 1 : -1;\n        }\n        return a.index < b.index ? -1 : 1;\n    });\n}\n\nfunction analyze_multiple_choice(v, mcallow) {\n    if (!v) {\n        return \"~~~\";\n    }\n    v = v.replace(/\\([^)]+\\)|:.*$|becau?se.*$/gm, \"\").toUpperCase();\n    let m, vx = [];\n    if ((m = v.match(/^((?:\\d+|[A-Z])(?:[\\s,]+(?:AND\\s+)?(?:\\d+|[A-Z]))*)(?!\\w)/m))) {\n        vx = m[1].replace(/[,\\s]+(?:AND\\s+)?/g, \" \").split(\" \");\n    } else if ((m = v.matchAll(/^(\\d+|[A-Z])(?!\\w)/mg)).length) {\n        for (const mx of m) {\n            vx.push(mx[1]);\n        }\n    }\n    let vxx = [];\n    for (const zz of vx) {\n        if (zz !== \"\" && (!mcallow || mcallow[zz]))\n            vxx.push(zz);\n    }\n    if (vxx.length === 0) {\n        return \"?\";\n    }\n    return vxx.sort().join(\" \");\n}\n\nfunction cluster_by_multiple_choice(sxs, mcarg) {\n    let mcallow = null;\n    if (mcarg && /^[A-Z]$/.test(mcarg)) {\n        mcallow = {};\n        for (let ch = \"A\"; ch <= mcarg; ch = String.fromCharCode(ch.charCodeAt(0) + 1)) {\n            mcallow[ch] = true;\n        }\n    } else if (mcarg && /^\\d+$/.test(mcarg)) {\n        mcallow = {};\n        for (let n = 1; n <= +mcarg; ++n) {\n            mcallow[n] = true;\n        }\n    } else if (mcarg && /^[-\\d,]+$/.test(mcarg)) {\n        mcallow = {};\n        for (const x of mcarg.split(/,/)) {\n            const dash = x.indexOf(\"-\");\n            if (dash > 0) {\n                const last = +x.substring(dash + 1);\n                for (let i = +x.substring(0, dash); i <= last; ++i) {\n                    mcallow[i] = true;\n                }\n            } else if (x) {\n                mcallow[+x] = true;\n            }\n        }\n    }\n\n    for (const sx of sxs) {\n        sx.multiple_choice = analyze_multiple_choice(sx.value, mcallow);\n    }\n\n    sxs.sort((a, b) => {\n        const amc = a.multiple_choice, bmc = b.multiple_choice;\n        if (amc !== bmc) {\n            return amc < bmc ? -1 : 1;\n        }\n        return a.index < b.index ? -1 : 1;\n    });\n}\n\nhandle_ui.on(\"pa-cluster-diff\", pa_cluster_diff);\n","// ptable-run.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { handle_ui, $e } from \"./ui.js\";\nimport { hoturl_post_go } from \"./hoturl.js\";\nimport { $popup } from \"./popup.js\";\n\n\nhandle_ui.on(\"js-ptable-run\", function () {\n    let f = this.closest(\"form\"),\n        ptconf = f.pa__ptconf, $gdialog, form, slist;\n\n    function submit() {\n        if (form.elements.runner.value) {\n            const run = form.elements.runner.value +\n                    (form.elements.ifneeded.checked ? \".ifneeded\" : \"\"),\n                skeys = [],\n                param = {pset: ptconf.key, run: run, runmany: 1},\n                data = {};\n            for (const su of slist) {\n                skeys.push(ptconf.ukey(su));\n            }\n            const users = skeys.join(\" \");\n            if (users.length <= 160) {\n                param.users = users;\n            } else {\n                data.users = users;\n            }\n            if (form.elements.selectcommits.checked) {\n                param.commitq = form.elements.commitq.value;\n            }\n            hoturl_post_go(\"=run\", param, data);\n        } else {\n            $gdialog.close();\n        }\n    }\n\n    function gdialog() {\n        slist = ptconf.users_in(f, ptconf.SOME_USERS);\n\n        const ru = $e(\"div\", \"mt-1 multicol-2\");\n        for (let rn in ptconf.runners) {\n            ru.append($e(\"label\", \"checki\",\n                $e(\"span\", \"checkc\", $e(\"input\", {type: \"radio\", name: \"runner\", value: rn})),\n                ptconf.runners[rn]));\n        }\n\n        $gdialog = $popup()\n            .append($e(\"h2\", \"pa-home-pset\", ptconf.title + \" Commands\"),\n                $e(\"h3\", \"gdialog-userids\"),\n                $e(\"div\", \"pa-messages\"),\n                ru,\n                $e(\"label\", \"checki mt-2\",\n                    $e(\"span\", \"checkc\", $e(\"input\", {type: \"checkbox\", name: \"ifneeded\"})),\n                    \"Use prerecorded runs when available\"),\n                $e(\"label\", \"checki mt-2 has-fold foldc\",\n                    $e(\"span\", \"checkc\", $e(\"input\", {type: \"checkbox\", name: \"selectcommits\", class: \"uic js-foldup\", \"data-fold-target\": \"#U\"})),\n                    \"Select commits\",\n                    $e(\"span\", \"fx\", \": \", $e(\"input\", {type: \"text\", name: \"commitq\", placeholder: \"grading\", class: \"ml-1\"}))))\n            .append_actions($e(\"button\", {type: \"button\", name: \"run\", class: \"btn-primary\"}, \"Run\"), \"Cancel\");\n        ptconf.render_gdialog_users($gdialog.querySelector(\"h3\"), slist);\n        form = $gdialog.form();\n        $(form.elements.run).on(\"click\", submit);\n        $gdialog.show();\n    }\n\n    gdialog();\n});\n","// pinnable.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass, $e, handle_ui } from \"./ui.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { render_onto } from \"./render.js\";\n\nconst pinmap = new WeakMap;\nlet dragging, drag_rect, drag_x1, drag_y1, resizing;\n\nexport function resolve_pinnable() {\n    removeClass(this, \"pinnable\");\n    let e = this;\n    if (e.tagName === \"CODE\" && e.parentElement.tagName === \"PRE\") {\n        e = e.parentElement;\n    }\n    if (!e.closest(\".pa-gsection\")) {\n        return;\n    }\n    const d = $e(\"div\", \"pa-pinnable\");\n    for (const attr of this.attributes) {\n        if (attr.name === \"title\" || attr.name.startsWith(\"data-pa-\"))\n            d.setAttribute(attr.name, attr.value);\n    }\n    e.parentElement.replaceChild(d, e);\n    d.append(e, $e(\"button\", {type: \"button\", class: \"ui pa-pinnable-pin\"}, \"\"));\n};\n\nfunction dragstart(evt) {\n    dragging = this;\n    drag_rect = dragging.getBoundingClientRect();\n    drag_x1 = evt.clientX;\n    drag_y1 = evt.clientY;\n    evt.dataTransfer.dropEffect = \"move\";\n    evt.dataTransfer.effectAllowed = \"move\";\n    evt.dataTransfer.setData(\"application/x-pa-dragging-pinnable\", \"N/A\");\n    evt.dataTransfer.setDragImage(this, drag_x1 - drag_rect.x, drag_y1 - drag_rect.y);\n    document.body.addEventListener(\"dragover\", dragover);\n    document.body.addEventListener(\"drop\", drop);\n}\n\nfunction dragover(evt) {\n    evt.preventDefault();\n}\n\nfunction drop(evt) {\n    dragging.style.left = (evt.clientX - drag_x1 + drag_rect.x) + \"px\";\n    dragging.style.top = (evt.clientY - drag_y1 + drag_rect.y) + \"px\";\n}\n\nfunction dragend() {\n    document.body.removeEventListener(\"dragover\", dragover);\n    document.body.removeEventListener(\"drop\", drop);\n}\n\nfunction resizestart(evt) {\n    dragging = this.parentElement;\n    resizing = this.getAttribute(\"data-pa-resize\");\n    drag_rect = dragging.getBoundingClientRect();\n    drag_x1 = evt.clientX;\n    drag_y1 = evt.clientY;\n    evt.dataTransfer.dropEffect = \"move\";\n    evt.dataTransfer.effectAllowed = \"move\";\n    evt.dataTransfer.setData(\"application/x-pa-dragging-pinnable\", \"N/A\");\n    evt.dataTransfer.setDragImage(this, drag_x1 - drag_rect.x, drag_y1 - drag_rect.y);\n    document.body.addEventListener(\"dragover\", resizeover);\n    evt.stopImmediatePropagation();\n}\n\nfunction resizeover(evt) {\n    evt.preventDefault();\n    if (resizing === \"l\") {\n        const left = Math.min(drag_rect.x + evt.clientX - drag_x1, drag_rect.right - 20);\n        dragging.style.left = left + \"px\";\n        dragging.style.width = (drag_rect.right - left) + \"px\";\n    } else if (resizing === \"r\") {\n        const right = Math.max(drag_rect.right + evt.clientX - drag_x1, drag_rect.x + 20);\n        dragging.style.width = (right - drag_rect.x) + \"px\";\n    } else if (resizing === \"t\") {\n        const top = Math.min(drag_rect.y + evt.clientY - drag_y1, drag_rect.bottom - 40);\n        dragging.style.top = top + \"px\";\n        dragging.style.height = (drag_rect.bottom - top) + \"px\";\n    } else if (resizing === \"b\") {\n        const bottom = Math.max(drag_rect.bottom + evt.clientY - drag_y1, drag_rect.y + 40);\n        dragging.style.height = (bottom - drag_rect.y) + \"px\";\n    }\n}\n\nfunction resizeend() {\n    document.body.removeEventListener(\"dragover\", resizeover);\n}\n\nfunction unpin(e) {\n    // unpin: reveal normal element, remove this element\n    removeClass(e, \"pinned\");\n    const orig = pinmap.get(e);\n    if (orig) {\n        orig.style.opacity = \"\";\n    }\n    e.closest(\".pa-pinnable-fixed\").remove();\n    pinmap.delete(e);\n}\n\nhandle_ui.on(\"pa-pinnable-pin\", function () {\n    const e = this.parentElement;\n    if (hasClass(e, \"pinned\")) {\n        unpin(e);\n        return;\n    }\n\n    // pin: copy this element\n    const ecopy = e.cloneNode(true);\n    addClass(ecopy, \"pinned\");\n    for (const img of ecopy.querySelectorAll(\"img\")) {\n        img.draggable = false;\n    }\n    let par = e.parentElement, pag = par, pine = $e(\"div\", \"pa-pinned\", ecopy);\n    while (!hasClass(par, \"pa-gsection\")) {\n        for (let k of par.classList) {\n            if (k === \"pa-pdesc\" || k === \"pa-dr\" || k.startsWith(\"format\")) {\n                addClass(pine, k);\n            } else if (k === \"pa-grade\") {\n                pag = par;\n            }\n        }\n        par = par.parentElement;\n    }\n    const br = e.getBoundingClientRect();\n    //pine.style.position = \"sticky\";\n    //pine.style.top = (br.y - par.getBoundingClientRect().y) + \"px\";\n    pine.style.position = \"fixed\";\n    pine.style.top = br.y + \"px\";\n    pine.style.left = br.x + \"px\";\n    pine.style.width = br.width + \"px\";\n    pine.style.height = br.height + \"px\";\n    pine.draggable = true;\n    pine.addEventListener(\"dragstart\", dragstart);\n    pine.addEventListener(\"dragend\", dragend);\n    pine.addEventListener(\"dblclick\", () => unpin(ecopy));\n    addClass(pine, \"pa-pinnable-fixed\");\n    par.appendChild(pine);\n    e.style.opacity = 0.2;\n    pinmap.set(ecopy, e);\n\n    // append title\n    let t = \"\";\n    if (par.hasAttribute(\"data-pa-grade\")) {\n        const gs = GradeSheet.closest(e),\n            sge = gs ? gs.xentry(par.getAttribute(\"data-pa-grade\")) : null,\n            gge = gs && pag !== par ? gs.xentry(pag.getAttribute(\"data-pa-grade\")) : null;\n        if (sge && sge.title) {\n            t = sge.title.replace(/\\s*\\([\\d.]+ points?\\)\\s*$/, \"\");\n        }\n        if (gge && gge.title && !e.getAttribute(\"title\")) {\n            t += (t ? \"  \" : \"\") + gge.title.replace(/\\s*\\([\\d.]+ points?\\)\\s*$/, \"\");\n        }\n    }\n    if (e.getAttribute(\"title\")) {\n        t += (t ? \"  \" : \"\") + e.getAttribute(\"title\");\n    }\n    if (t !== \"\") {\n        const te = $e(\"div\", \"pa-pinnable-title\");\n        render_onto(te, \"f\", t);\n        pine.append(te);\n        const tebr = te.getBoundingClientRect();\n        pine.style.height = (br.height + tebr.height) + \"px\";\n    }\n\n    for (const k of [\"l\", \"r\", \"t\", \"b\"]) {\n        const drage = $e(\"div\", \"pa-pinnable-resize-\" + k);\n        drage.setAttribute(\"data-pa-resize\", k);\n        drage.draggable = true;\n        pine.append(drage);\n        drage.addEventListener(\"dragstart\", resizestart);\n        drage.addEventListener(\"dragend\", resizeend);\n    }\n});\n","// search.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { regexp_quote } from \"./encoders.js\";\n\nconst OP_UNARY = 0x1;\nconst OP_ALLOW_SUBTYPE = 0x2;\nconst OP_SUBTYPE = 0x4;\nconst OP_UNNAMED = 0x8;\nconst OP_NOT = 0x10;\nconst OP_AND = 0x20;\nconst OP_OR = 0x40;\nconst OP_XOR = 0x80;\n\nclass SearchOperator {\n    type;\n    precedence;\n    flags;\n    subtype;\n\n    constructor(type, precedence, flags, subtype) {\n        this.type = type;\n        this.precedence = precedence;\n        this.flags = flags;\n        this.subtype = subtype;\n    }\n\n    static get UNARY() { return OP_UNARY; }\n    static get ALLOW_SUBTYPE() { return OP_ALLOW_SUBTYPE; }\n    static get SUBTYPE() { return OP_SUBTYPE; }\n    static get UNNAMED() { return OP_UNNAMED; }\n    static get NOT() { return OP_NOT; }\n    static get AND() { return OP_AND; }\n    static get OR() { return OP_OR; }\n    static get XOR() { return OP_XOR; }\n\n    get unary() {\n        return (this.flags & OP_UNARY) !== 0;\n    }\n    get allow_subtype() {\n        return (this.flags & OP_SUBTYPE) !== 0;\n    }\n\n    make_subtype(subtype) {\n        return new SearchOperator(this.type, this.precedence, (this.flags & ~OP_ALLOW_SUBTYPE) | OP_SUBTYPE, subtype);\n    }\n}\n\nconst REGEXP_TERMINATOR = /[\\s()[\\]{}]/y;\n\nclass SearchOperatorSet {\n    #a;\n    #xregex;\n    static #simpleops;\n\n    constructor(a) {\n        this.#a = a != null ? a : {};\n        this.#xregex = null;\n    }\n\n    define(name, op) {\n        // XXX no backslashes allowed\n        // XXX name should be punctuation or contain no punctuation\n        this.#a[name] = op;\n        this.#xregex = null;\n    }\n\n    lookup(name) {\n        const op = this.#a[name];\n        if (op) {\n            return op;\n        }\n        const colon = name.indexOf(\":\");\n        if (colon < 0) {\n            return null;\n        }\n        const xop = this.#a[name.substring(0, colon)];\n        if (!xop || !xop.allow_subtype) {\n            return null;\n        }\n        const nop = xop.make_subtype(name.substring(colon + 1));\n        this.#a[name] = nop;\n        return nop;\n    }\n\n    get regex() {\n        if (this.#xregex !== null) {\n            return this.#xregex;\n        }\n        let ch = \"\";\n        const br = [], alnum = [];\n        for (const [name, op] of Object.entries(this.#a)) {\n            if ((op.flags & (OP_SUBTYPE | OP_UNNAMED)) !== 0) {\n                continue;\n            }\n            if (/^[-!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~]+$/.test(name)) {\n                if (name.length === 1) {\n                    ch += regexp_quote(name, true);\n                } else {\n                    br.push(regexp_quote(name));\n                }\n            } else {\n                let x = regexp_quote(name);\n                if (op.allow_subtype) {\n                    x += \"(?::\\\\w+)?\";\n                }\n                alnum.push(x);\n            }\n        }\n        if (ch !== \"\") {\n            br.push(\"[\" + ch + \"]\");\n        }\n        if (alnum.length !== 0) {\n            br.push(\"(?:\" + alnum.join(\"|\") + \")(?=[\\\\s\\\\(\\\\)\\\\[\\\\]\\\\{\\\\}]|$)\");\n        }\n        this.#xregex = new RegExp(br.join(\"|\"), \"y\");\n        return this.#xregex;\n    }\n\n    static safe_terminator(str, pos = 0) {\n        REGEXP_TERMINATOR.lastIndex = pos;\n        return REGEXP_TERMINATOR.test(str);\n    }\n\n    static get simple_operators() {\n        if (this.#simpleops != null) {\n            return this.#simpleops;\n        }\n        const notop = new SearchOperator(\"not\", 8, OP_UNARY | OP_NOT),\n            spaceop = new SearchOperator(\"space\", 7, OP_UNNAMED | OP_AND),\n            andop = new SearchOperator(\"and\", 6, OP_AND),\n            xorop = new SearchOperator(\"xor\", 5, OP_XOR),\n            orop = new SearchOperator(\"or\", 4, OP_OR);\n        this.#simpleops = new SearchOperatorSet({\n            \"(\": new SearchOperator(\"(\", 0, OP_UNARY | OP_AND),\n            \")\": new SearchOperator(\")\", 0, OP_UNARY),\n            NOT: notop,\n            \"-\": notop,\n            \"!\": notop,\n            SPACE: spaceop,\n            AND: andop,\n            \"&&\": andop,\n            XOR: xorop,\n            \"^^\": xorop,\n            OR: orop,\n            \"||\": orop\n        });\n        return this.#simpleops;\n    }\n\n    static simple_operator(name) {\n        return this.simple_operators.#a[name];\n    }\n}\n\nexport class SearchExpr {\n    kword;\n    text;\n    info;\n    kwpos1;\n    pos1;\n    pos2;\n    op;\n    child;\n    parent;\n    empty;\n\n    static make_simple(text, pos1, parent = null) {\n        const e = new SearchExpr;\n        e.text = text;\n        e.kwpos1 = e.pos1 = pos1;\n        e.pos2 = pos1 + text.length;\n        e.parent = parent;\n        e.empty = text === \"\";\n        return e;\n    }\n\n    static make_keyword(kword, text, kwpos1, pos1, pos2, parent = null) {\n        const e = new SearchExpr;\n        e.kword = kword === \"\" ? null : kword;\n        e.text = text;\n        e.kwpos1 = kwpos1;\n        e.pos1 = pos1;\n        e.pos2 = pos2;\n        e.parent = parent;\n        e.empty = e.kword === null && text === \"\";\n        return e;\n    }\n\n    static make_op_start(op, pos1, pos2, reference) {\n        const e = new SearchExpr;\n        e.op = op;\n        if (op.unary) {\n            e.kwpos1 = e.pos1 = pos1;\n            e.pos2 = pos2;\n            e.child = [];\n            e.parent = reference;\n            e.empty = true;\n        } else {\n            e.kwpos1 = e.pos1 = reference.pos1;\n            e.pos2 = pos2;\n            e.child = [reference];\n            e.parent = reference.parent;\n            e.empty = reference.empty;\n        }\n        return e;\n    }\n\n    static combine(opname, ...child) {\n        const e = new SearchExpr;\n        e.op = SearchOperatorSet.simple_operator(opname);\n        e.child = child;\n        e.empty = true;\n        for (const ch of child) {\n            if (!ch.empty) {\n                e.empty = false;\n                break;\n            }\n        }\n        return e;\n    }\n\n    get is_complete() {\n        return !this.op || this.child.length > (this.op.unary ? 0 : 1);\n    }\n\n    get is_incomplete_paren() {\n        return this.op && this.op.type === \"(\" && this.child.length === 0;\n    }\n\n    unquoted_text() {\n        return SearchParser.unquote(this.text);\n    }\n\n    complete(pos) {\n        if (!this.is_complete) {\n            this.pos2 = pos;\n            this.child.push(SearchExpr.make_simple(\"\", pos));\n        }\n        const p = this.parent;\n        if (!p) {\n            return this;\n        }\n        p.child.push(this);\n        p.pos2 = this.pos2;\n        p.empty = p.empty && this.empty;\n        return p;\n    }\n\n    complete_paren(pos1, pos2) {\n        let a = this,\n            first = a.op && a.op.type === \"(\" && a.child.length === 0;\n        while (!a.op || a.op.type !== \"(\" || first) {\n            a = a.complete(pos1);\n            first = false;\n        }\n        a.pos2 = pos2;\n        if (a.child.length === 0) {\n            a.child.push(SearchExpr.make_simple(\"\", pos2));\n        }\n        return a;\n    }\n\n    flattened_children() {\n        if (!this.op || this.op.unary) {\n            return this.child || [];\n        }\n        const a = [];\n        for (const ch of this.child) {\n            if (ch.op\n                && ch.op.type === this.op.type\n                && ch.op.subtype === this.op.subtype) {\n                Array.push.prototype.apply(a, ...ch.flattened_children());\n            } else if (!ch.empty) {\n                a.push(ch);\n            }\n        }\n        return a;\n    }\n\n    unparse(str, indent = \"\") {\n        let ctx;\n        if (!this.op) {\n            ctx = this.kword ? `${this.kword}:${this.text}` : this.text;\n            if (ctx.length > 40) {\n                ctx = ctx.substring(0, 32) + \"...\";\n            }\n            return `${indent}@${this.kwpos1} ${ctx}`;\n        }\n        if (!str) {\n            ctx = \"\";\n        } else if (this.pos2 - this.kwpos1 > 40) {\n            ctx = str.substring(this.kwpos1, this.kwpos1 + 16) + \"...\" + str.substring(this.pos2 - 16, this.pos2);\n        } else {\n            ctx = str.substring(this.kwpos1, this.pos2);\n        }\n        if (ctx !== \"\") {\n            ctx = ` <<${ctx}>>`;\n        }\n        const ts = [`${indent}[[${this.op.type}]] @${this.kwpos1}${ctx}\\n`];\n        const nindent = indent + \"  \";\n        for (const ch of this.child) {\n            ts.push(ch.unparse(str, nindent));\n        }\n        return ts.join(\"\");\n    }\n\n    prepare_simple(f, ...args) {\n        if (!this.op) {\n            f(this, ...args);\n        } else {\n            for (const ch of this.child) {\n                ch.prepare_simple(f, ...args);\n            }\n        }\n    }\n\n    evaluate_simple(f) {\n        let ok;\n        if (!this.op) {\n            ok = f(this);\n        } else if ((this.op.flags & OP_AND) !== 0) {\n            ok = true;\n            for (const ch of this.child) {\n                ok = ok && (ch.empty || ch.evaluate_simple(f));\n            }\n        } else if ((this.op.flags & OP_OR) !== 0) {\n            ok = false;\n            for (const ch of this.child) {\n                ok = ok || (!ch.empty && ch.evaluate_simple(f));\n            }\n        } else if ((this.op.flags & OP_XOR) !== 0) {\n            ok = false;\n            for (const ch of this.child) {\n                if (!ch.empty && ch.evaluate_simple(f))\n                    ok = !ok;\n            }\n        } else if ((this.op.flags & OP_NOT) !== 0) {\n            const ch = this.child[0];\n            ok = !ch || ch.empty || !ch.evaluate_simple(f);\n        } else {\n            throw new Error(\"unknown operator\");\n        }\n        return ok;\n    }\n}\n\nconst REGEXP_STICKYSPACE = /\\s+/y;\nconst REGEXP_KEYWORD = /[_a-zA-Z0-9][-_.a-zA-Z0-9]*(?=:)/y;\n\nexport class SearchParser {\n    #str;\n    pos;\n    #len;\n    last_pos = 0;\n\n    constructor(str, pos1 = 0, pos2 = null) {\n        this.#str = str;\n        this.pos = pos1;\n        this.#len = pos2 != null ? pos2 : str.length;\n\n        // unlikely: passed a substring that ends mid-word; need to be careful\n        if (this.#len < str.length\n            && !SearchOperatorSet.safe_terminator(str, this.#len)\n            && (this.#len === 0 || !SearchOperatorSet.safe_terminator(str, this.#len - 1))) {\n            this.#str = str.substring(0, this.#len);\n        }\n\n        this.#set_span_and_pos(0);\n    }\n\n    empty() {\n        return this.pos >= this.#len;\n    }\n\n    rest() {\n        return this.#str.substring(this.pos, this.#len);\n    }\n\n    set_pos(pos) {\n        this.pos = this.last_pos = pos;\n        return this;\n    }\n\n    #set_span_and_pos(len) {\n        this.last_pos = this.pos = Math.min(this.pos + len, this.#len);\n        REGEXP_STICKYSPACE.lastIndex = this.pos;\n        if (REGEXP_STICKYSPACE.test(this.#str)) {\n            this.pos = Math.min(REGEXP_STICKYSPACE.lastIndex, this.#len);\n        }\n    }\n\n    shift_keyword() {\n        REGEXP_KEYWORD.lastIndex = this.pos;\n        if (!REGEXP_KEYWORD.test(this.#str)\n            || REGEXP_KEYWORD.lastIndex >= this.#len) {\n            return \"\";\n        }\n        const kw = this.#str.substring(this.pos, REGEXP_KEYWORD.lastIndex);\n        this.#set_span_and_pos(kw.length + 1);\n        return kw;\n    }\n\n    shift_past(str) {\n        // assert(substr_compare($this->str, $str, $this->pos, strlen($str)) === 0);\n        this.#set_span_and_pos(str.length);\n    }\n\n    skip_whitespace() {\n        this.#set_span_and_pos(0);\n        return this.pos < this.#len;\n    }\n\n    shift_balanced_parens(endchars = null, allow_empty = false) {\n        const pos0 = this.pos,\n            pos1 = SearchParser.span_balanced_parens(this.#str, pos0, endchars, allow_empty);\n        this.#set_span_and_pos(pos1 - pos0);\n        return this.#str.substring(pos0, this.last_pos);\n    }\n\n    match(re) {\n        re.lastIndex = this.pos;\n        return re.exec(this.#str);\n    }\n\n    test(re) {\n        re.lastIndex = this.pos;\n        return re.test(this.#str) ? re.lastIndex : -1;\n    }\n\n    starts_with(substr) {\n        const pos1 = this.pos + substr.length;\n        return pos1 <= this.#len\n            && this.#str.substring(this.pos, pos1) === substr;\n    }\n\n    #shift_operator(opset) {\n        const pos0 = this.pos, pos1 = this.test(opset.regex);\n        if (pos1 < 0 || pos1 > this.#len) {\n            return null;\n        }\n        this.#set_span_and_pos(pos1 - pos0);\n        return opset.lookup(this.#str.substring(pos0, pos1));\n    }\n\n    static span_balanced_parens(str, pos = 0, endchars = null, allow_empty = false) {\n        endchars = endchars != null ? endchars : \" \\n\\r\\t\\x0B\\x0C\";\n        let pstack = \"\",\n            plast = \"\",\n            quote = 0,\n            startpos = allow_empty ? -1 : pos,\n            len = str.length;\n        while (pos < len) {\n            let ch = str.charAt(pos);\n            // stop when done\n            if (plast === \"\"\n                && !quote\n                && endchars !== \"\"\n                && endchars.indexOf(ch) >= 0) {\n                break;\n            }\n            // translate  -> \"\n            if (ch === \"\" || ch === \"\") {\n                ch = \"\\\"\";\n            }\n            if (quote) {\n                if (ch === \"\\\\\" && pos + 1 < len) {\n                    ++pos;\n                } else if (ch === \"\\\"\") {\n                    quote = 0;\n                }\n            } else if (ch === \"(\") {\n                pstack += plast;\n                plast = \")\";\n            } else if (ch === \"[\") {\n                pstack += plast;\n                plast = \"]\";\n            } else if (ch === \"{\") {\n                pstack += plast;\n                plast = \"}\";\n            } else if (ch === \")\" || ch === \"]\" || ch === \"}\") {\n                if (pos === startpos) {\n                    ++startpos;\n                } else {\n                    let pcleared;\n                    do {\n                        pcleared = plast;\n                        const pslen = pstack.length - 1;\n                        if (pslen >= 0) {\n                            plast = pstack.substring(pslen);\n                            pstack = pstack.substring(0, pslen);\n                        } else {\n                            plast = pstack = \"\";\n                        }\n                    } while (ch !== pcleared && pcleared !== \"\");\n                    if (pcleared === \"\") {\n                        break;\n                    }\n                }\n            } else if (ch === \"\\\"\") {\n                quote = 1;\n            }\n            ++pos;\n        }\n        return pos;\n    }\n\n    static split_balanced_parens(str) {\n        const w = [];\n        if (str !== \"\") {\n            const sp = new SearchParser(str);\n            while (sp.skip_whitespace()) {\n                w.push(sp.shift_balanced_parens());\n            }\n        }\n        return w;\n    }\n\n    parse_expression(opset = null, spaceop = \"SPACE\", max_ops = 2048) {\n        opset = opset != null ? opset : SearchOperatorSet.simple_operators;\n        let cure = null, parens = 0, nops = 0;\n        while (!this.empty()) {\n            let pos1 = this.pos,\n                op = this.#shift_operator(opset),\n                pos2 = this.last_pos;\n            if (!op && (!cure || !cure.is_complete)) {\n                const kwpos1 = this.pos,\n                    kw = this.shift_keyword();\n                pos1 = this.pos;\n                const text = this.shift_balanced_parens(null, true);\n                pos2 = this.last_pos;\n                cure = SearchExpr.make_keyword(kw, text, kwpos1, pos1, pos2, cure);\n                continue;\n            }\n\n            if (op && op.type === \")\") {\n                if (parens === 0) {\n                    continue;\n                }\n                cure = cure.complete_paren(pos1, pos2);\n                --parens;\n                continue;\n            }\n\n            if (!op || (op && op.unary && cure && cure.is_complete)) {\n                op = opset.lookup(parens > 0 ? \"SPACE\" : spaceop);\n                this.set_pos(pos1);\n                pos2 = pos1;\n            }\n\n            if (!op.unary) {\n                if (!cure || cure.is_incomplete_paren) {\n                    cure = SearchExpr.make_simple(\"\", pos1, cure);\n                }\n                while (cure.parent && cure.parent.op.precedence >= op.precedence) {\n                    cure = cure.complete(pos1);\n                }\n            }\n\n            if (nops >= max_ops) {\n                return null;\n            }\n\n            cure = SearchExpr.make_op_start(op, pos1, pos2, cure);\n            if (op.type === \"(\") {\n                ++parens;\n            }\n            ++nops;\n        }\n        if (cure) {\n            let nexte;\n            while ((nexte = cure.complete(this.last_pos)) !== cure) {\n                cure = nexte;\n            }\n        }\n        return cure;\n    }\n\n    static unquote(t) { // XXX does not align with hotcrp\n        if (!t.startsWith(\"\\\"\")) {\n            return t;\n        }\n        t = t.substring(1, t.length - (t.endsWith(\"\\\"\") && t.length > 1 ? 1 : 0));\n        return t.replace(/\\\\([\\\\\"])/g, '$1');\n    }\n}\n","// ptable.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { hasClass, addClass, removeClass, toggleClass,\n         handle_ui, $e } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport { wstorage, sprintf, strftime } from \"./utils.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { regexp_quote } from \"./encoders.js\";\nimport { GradeSheet } from \"./gradeentry.js\";\nimport { $popup } from \"./popup.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport { ptable_gdialog } from \"./ptable-grades.js\";\nimport { SearchParser } from \"./search.js\";\nimport { feedback } from \"./render.js\";\n\n\nfunction render_name(s, last_first) {\n    if (s.first != null && s.last != null) {\n        if (last_first) {\n            return s.last.concat(\", \", s.first);\n        } else {\n            return s.first.concat(\" \", s.last);\n        }\n    } else if (s.first != null) {\n        return s.first;\n    } else if (s.last != null) {\n        return s.last;\n    }\n    return \"\";\n}\n\nfunction grader_name(p) {\n    if (!p.__nickname) {\n        if (p.nick)\n            p.__nickname = p.nick;\n        else if (p.nicklen || p.lastpos)\n            p.__nickname = p.name.substr(0, p.nicklen || p.lastpos - 1);\n        else\n            p.__nickname = p.name;\n    }\n    return p.__nickname;\n}\n\nfunction render_year(yr) {\n    if (!yr) {\n        return \"\";\n    } else if (typeof yr === \"number\") {\n        if (yr >= 1 && yr <= 20 && Math.floor(yr) === yr) {\n            return String.fromCharCode(9311 + yr);\n        } else {\n            return yr.toString();\n        }\n    } else if (yr.length === 1 && yr >= \"A\" && yr <= \"Z\") {\n        return String.fromCharCode(9333 + yr.charCodeAt(0));\n    }\n    return yr;\n}\n\nfunction user_compare(a, b) {\n    return a._sort_user.localeCompare(b._sort_user);\n}\n\nfunction grader_compare(a, b) {\n    const ap = a.gradercid ? siteinfo.pc[a.gradercid] : null,\n        bp = b.gradercid ? siteinfo.pc[b.gradercid] : null,\n        ag = (ap && grader_name(ap)) || \"~~~\",\n        bg = (bp && grader_name(bp)) || \"~~~\";\n    if (ag != bg) {\n        return ag < bg ? -1 : 1;\n    }\n    return 0;\n}\n\n\nfunction strong(t) {\n    const stre = document.createElement(\"strong\");\n    stre.className = \"err\";\n    stre.append(t);\n    return stre;\n}\n\nfunction user_hover(evt) {\n    if (evt.target.tagName === \"A\" && evt.target.classList.contains(\"pa-user\")) {\n        if (evt.type === \"mouseenter\") {\n            tooltip.enter(evt.target, \"pa-ptable-user\");\n        } else {\n            tooltip.leave(evt.target);\n        }\n    }\n}\n\n\nconst ALL_USERS = 0;\nconst CHECKED_USERS = 1;\nconst SOME_USERS = 2;\n\nclass PtableConf {\n    id;\n    key;\n    title;\n    gitless;\n    gitless_grades;\n    has_older_repo;\n    disabled;\n    visible;\n    scores_visible;\n    frozen;\n    anonymous;\n    has_nonanonymous;\n    overridable_anonymous;\n    flagged_commits;\n    sort;\n    no_sort;\n    checkbox;\n    grades;\n    need_total;\n    total_key;\n    runners;\n    diff_files;\n    reports;\n    requested_columns;\n    col;\n    pincol;\n    colmap;\n    data;\n    mode;\n    smap;\n    uidmap;\n    input_timeout;\n    has_hidden;\n\n    constructor(pconf, data) {\n        this.id = pconf.id;\n        this.key = pconf.key;\n        this.title = pconf.title;\n        this.gitless = !!pconf.gitless;\n        this.gitless_grades = !!pconf.gitless_grades;\n        this.has_older_repo = !!pconf.has_older_repo;\n        this.disabled = !!pconf.disabled;\n        this.visible = !!pconf.visible;\n        this.scores_visible = !!pconf.scores_visible;\n        this.frozen = !!pconf.frozen;\n        this.anonymous = this.original_anonymous = !!pconf.anonymous;\n        this.has_nonanonymous = !this.anonymous || pconf.has_nonanonymous;\n        this.overridable_anonymous = this.anonymous && pconf.overridable_anonymous;\n        this.flagged_commits = pconf.flagged_commits;\n        this.sort = {\n            f: this.flagged_commits ? \"at\" : \"name\", last: false, rev: 1,\n            u: \"name\"\n        };\n        this.no_sort = pconf.no_sort;\n        this.checkbox = !!pconf.checkbox;\n        this.grades = pconf.grades;\n        this.need_total = !!pconf.need_total;\n        this.total_key = pconf.total_key;\n        this.runners = pconf.runners || [];\n        this.diff_files = pconf.diff_files || [];\n        this.reports = pconf.reports || [];\n        this.requested_columns = pconf.col || null;\n\n        this.col = [];\n        this.pincol = [];\n        this.colmap = {};\n\n        this.data = data;\n\n        this.mode = 0;\n        this.smap = [null];\n        this.uidmap = [];\n        this.has_hidden = false;\n\n        this.input_timeout = null;\n    }\n\n    set_gradesheet(gi) {\n        this.gradesheet = gi;\n        this.in_total_indexes = [];\n        this.answer_indexes = [];\n        for (let i = 0; i !== gi.value_order.length; ++i) {\n            const ge = gi.entries[gi.value_order[i]];\n            if (ge.answer) {\n                this.answer_indexes.push(i);\n            } else if (ge.in_total && ge.key !== this.total_key) {\n                this.in_total_indexes.push(i);\n            }\n        }\n    }\n\n    add_column(c) {\n        c.index = this.col.length;\n        this.col.push(c);\n        this.colmap[c.name] = this.colmap[c.name] || c;\n        if (c.pin) {\n            c.pin_index = this.pincol.length;\n            this.pincol.push(c);\n        }\n    }\n\n    get columns() {\n        return this.col;\n    }\n\n    get pinned_columns() {\n        return this.pincol;\n    }\n\n    columns_in(table) {\n        return table.classList.contains(\"gtable-left-pin\") ? this.pincol : this.col;\n    }\n\n    column_index_in(key, table) {\n        const c = this.colmap[key];\n        if (!c) {\n            return -1;\n        }\n        const k = table.classList.contains(\"gtable-left-pin\") ? \"pin_index\" : \"index\";\n        return c[k] != null ? c[k] : -1;\n    }\n\n    ukey(s) {\n        return (this.anonymous && s.anon_user) || s.user || \"\";\n    }\n\n    url_gradeparts(s) {\n        const args = {\n            u: this.ukey(s),\n            pset: this.key\n        };\n        let p;\n        if (s.pset && (p = siteinfo.psets[s.pset])) {\n            args.pset = p.urlkey;\n        }\n        if (s.commit && (!s.is_grade || this.flagged_commits)) {\n            args.commit = s.commit;\n        } else if (s.grade_commit) {\n            args.commit = s.grade_commit;\n            args.commit_is_grade = 1;\n        }\n        return args;\n    }\n\n    href(s) {\n        return hoturl(\"pset\", this.url_gradeparts(s));\n    }\n\n    make_student_ae(s) {\n        const ae = document.createElement(\"a\");\n        ae.href = hoturl(\"index\", {u: this.ukey(s)});\n        ae.className = \"track\";\n        return ae;\n    }\n\n    make_pset_ae(s) {\n        const ae = document.createElement(\"a\");\n        ae.href = this.href(s);\n        ae.className = \"pa-user track\" + (s.dropped ? \" gt-dropped\" : \"\");\n        return ae;\n    }\n\n    render_username_td(tde, s) {\n        const ae = this.make_pset_ae(s);\n        if (this.anonymous && s.anon_user) {\n            ae.append(s.anon_user);\n        } else if (this.sort.email && s.email) {\n            ae.append(s.email);\n        } else if (s.user) {\n            ae.append(s.user);\n        }\n        tde.replaceChildren(ae);\n    }\n\n    render_user_td(tde, s) {\n        const ae = this.make_pset_ae(s), sort = this.sort;\n        if (this.anonymous && s.anon_user) {\n            ae.append(s.anon_user);\n        } else if (sort.u === \"email\" && s.email) {\n            ae.append(s.email);\n        } else if (sort.u === \"name\") {\n            ae.append(render_name(s, sort.last) || s.email);\n        } else {\n            ae.append(s.user);\n        }\n        tde.replaceChildren(ae);\n    }\n\n    render_display_name(tde, s, is2) {\n        const t = is2 && this.anonymous\n            ? s.anon_user || \"?\"\n            : render_name(s, this.sort.last) || s.email;\n        if (is2) {\n            const ae = this.make_pset_ae(s);\n            ae.textContent = t;\n            tde.replaceChildren(ae);\n        } else {\n            tde.replaceChildren(t);\n        }\n    }\n\n    render_tooltip_name(s) {\n        if (!s) {\n            return \"???\";\n        } else if (this.anonymous && s.anon_user) {\n            return s.anon_user;\n        } else if (this.sort.u === \"email\" && s.email) {\n            return s.email;\n        } else if (this.sort.u === \"name\") {\n            return render_name(s, false) || s.email;\n        }\n        return s.user;\n    }\n\n    render_checkbox_name(s) {\n        let u = this.anonymous ? s.anon_user || s.user : s.user;\n        return \"s:\" + encodeURIComponent(u).replace(/\\./g, \"%2E\");\n    }\n\n    render_table_row(su, mode) {\n        this.mode = mode;\n        const tre = document.createElement(\"tr\");\n        tre.className = \"gt\";\n        tre.setAttribute(\"data-pa-spos\", su._spos);\n        if (su.uid) {\n            tre.setAttribute(\"data-pa-uid\", su.uid);\n        }\n        if (mode & 2) {\n            tre.classList.add(\"kfade\");\n        }\n        if (mode & 1) {\n            tre.classList.add(\"gtrow-partner\");\n            tre.setAttribute(\"data-pa-partner\", 1);\n        }\n        const cols = mode & 2 ? this.pincol : this.col;\n        for (const c of cols) {\n            const tde = document.createElement(\"td\");\n            c.td.call(c, tde, su);\n            tre.appendChild(tde);\n        }\n        return tre;\n    }\n\n    tbody_rowmap(tbody) {\n        if (tbody.pa__rowmap) {\n            return tbody.pa__rowmap;\n        }\n        const rowmap = tbody.pa__rowmap = {rows: [], users: new WeakMap};\n        rowmap.rows.length = this.smap.length;\n        rowmap.rows.fill(null);\n        for (let tr = tbody.firstChild; tr; tr = tr.nextSibling) {\n            const spos = tr.getAttribute(\"data-pa-spos\");\n            if (spos) {\n                rowmap.rows[+spos] = tr;\n                rowmap.users.set(tr, this.smap[spos]);\n            }\n        }\n        return rowmap;\n    }\n\n\n    render_gdialog_users(h3, slist) {\n        if (slist.length === this.data.length || slist.length === 0) {\n            addClass(h3, \"hidden\");\n        } else {\n            removeClass(h3, \"hidden\");\n            let i = 0, n = [], max = slist.length === 20 ? 20 : 19;\n            while (i < max && i < slist.length) {\n                n.push(this.render_tooltip_name(slist[i]));\n                ++i;\n            }\n            if (i < slist.length) {\n                n.push(\"(\".concat(slist.length - i, \" more)\"));\n            }\n            h3.replaceChildren(n.join(\", \"));\n        }\n    }\n\n    push(s) {\n        s._spos = this.smap.length;\n        s.hidden = false;\n        this.smap.push(s);\n        if (s.uid > 0) {\n            if (s.uid >= this.uidmap.length) {\n                this.uidmap.length = s.uid + 1;\n            }\n            this.uidmap[s.uid] = s;\n        }\n    }\n\n    user_row_checkbox(tr) {\n        const overlay = hasClass(tr.parentElement.parentElement, \"gtable-left-pin\"),\n            cbidx = this.colmap.checkbox[overlay ? \"pin_index\" : \"index\"];\n        return cbidx != null ? tr.children[cbidx].firstChild : null;\n    }\n\n\n    get ALL_USERS() {\n        return ALL_USERS;\n    }\n\n    get CHECKED_USERS() {\n        return CHECKED_USERS;\n    }\n\n    get SOME_USERS() {\n        return SOME_USERS;\n    }\n\n    users_in(form, users) {\n        const tb = form.querySelector(\"table.gtable > tbody\"),\n            rowmap = this.tbody_rowmap(tb),\n            cbidx = this.colmap.checkbox.index,\n            sus = [], chsus = [];\n        for (let tr = tb.firstChild; tr; tr = tr.nextSibling) {\n            const ss = rowmap.users.get(tr);\n            if (!ss || ss.hidden) {\n                continue;\n            }\n            sus.push(ss);\n            if (users && tr.children[cbidx].firstChild.checked)\n                chsus.push(ss);\n        }\n        if (users === SOME_USERS) {\n            return chsus.length > 0 ? chsus : sus;\n        } else if (users === CHECKED_USERS) {\n            return chsus;\n        }\n        return sus;\n    }\n}\n\n\nfunction ptable_head_click_change_sort(tgt) {\n    if (tgt.tagName === \"TH\"\n        ? !tgt.hasAttribute(\"data-pa-sort\")\n        : tgt.tagName !== \"BUTTON\" || !tgt.classList.contains(\"js-switch-anon\")) {\n        return null;\n    }\n\n    const ptconf = tgt.closest(\"form\").pa__ptconf,\n        sort = Object.assign({}, ptconf.sort);\n    if (tgt.tagName === \"BUTTON\") {\n        if (!ptconf.overridable_anonymous) {\n            return null;\n        }\n        if (sort.deblind) {\n            delete sort.deblind;\n        } else {\n            sort.deblind = (new Date).getTime() / 1000;\n        }\n        return sort;\n    }\n\n    const sf = tgt.getAttribute(\"data-pa-sort\");\n    if (sf !== sort.f) {\n        sort.f = sf;\n        const col = ptconf.colmap[sf];\n        sort.rev = col && col.sort_forward ? 1 : -1;\n        if (sf === \"name\") {\n            sort.u = \"name\";\n        } else if (sf === \"name2\") {\n            sort.u = ptconf.anonymous ? \"user\" : \"name\";\n        } else if (sf === \"email\") {\n            sort.u = \"email\";\n        } else if (sf === \"username\") {\n            if ((ptconf.anonymous && !ptconf.has_nonanonymous) || !sort.email) {\n                sort.u = \"user\";\n            } else {\n                sort.u = \"email\";\n            }\n        }\n    } else {\n        sort.rev = -sort.rev;\n        if (sort.rev === 1) {\n            if (sf === \"name\") {\n                sort.last = !sort.last;\n            } else if (ptconf.anonymous && !ptconf.has_nonanonymous) {\n                // skip\n            } else if (sf === \"name2\") {\n                sort.last = !sort.last;\n            } else if (sf === \"username\") {\n                if (sort.email) {\n                    sort.u = \"user\";\n                    delete sort.email;\n                } else {\n                    sort.u = \"email\";\n                    sort.email = true;\n                }\n            } else if (sf === \"user\") {\n                if (sort.u === \"name\") {\n                    sort.last = !sort.last;\n                    if (!sort.last) {\n                        sort.u = \"email\";\n                    }\n                } else if (sort.u === \"email\") {\n                    sort.u = \"user\";\n                } else {\n                    sort.u = \"name\";\n                }\n            }\n        }\n    }\n    return sort;\n}\n\nfunction ptable_head_click(evt) {\n    let tgt = evt.target;\n    while (tgt !== this\n           && tgt.tagName !== \"TH\"\n           && tgt.tagName !== \"BUTTON\"\n           && tgt.tagName !== \"A\") {\n        tgt = tgt.parentElement;\n    }\n    const sort = ptable_head_click_change_sort(tgt);\n    if (sort) {\n        tgt.closest(\"form\").dispatchEvent(new CustomEvent(\"sortchange\", {\n            bubbles: true, cancelable: true,\n            detail: {sort: sort}\n        }));\n    }\n}\n\nfunction ptable_body_click(evt) {\n    let tgt = evt.target;\n    while (tgt !== this && tgt.tagName !== \"TD\") {\n        tgt = tgt.parentElement;\n    }\n    if (tgt.tagName !== \"TD\") {\n        return;\n    }\n    let i = 0;\n    for (let td = tgt.parentElement.firstChild; td !== tgt; td = td.nextSibling) {\n        ++i;\n    }\n    const ptconf = tgt.closest(\"form\").pa__ptconf,\n        ge = ptconf.col[i].ge,\n        tr = tgt.closest(\"tr\");\n    if (ge\n        && !ge.readonly\n        && tr.hasAttribute(\"data-pa-spos\")\n        && !evt.shiftKey\n        && !evt.ctrlKey) {\n        ptable_gdialog(ptconf, [+tr.getAttribute(\"data-pa-spos\")], tgt.closest(\"table\"), ge.key);\n    }\n}\n\nfunction ptable_make_hotlist() {\n    const ptconf = this.closest(\"form\").pa__ptconf,\n        rowmap = ptconf.tbody_rowmap(this),\n        j = [];\n    for (let tr = this.firstChild; tr; tr = tr.nextElementSibling) {\n        const su = rowmap.users.get(tr);\n        if (!su || su.hidden) {\n            continue;\n        }\n        let t = \"~\" + encodeURIComponent(ptconf.ukey(su)), p;\n        if (ptconf.flagged_commits && su.pset && (p = siteinfo.psets[su.pset])) {\n            t = t.concat(\"/pset/\", p.urlkey);\n            if (su.commit) {\n                t = t.concat(\"/\", su.commit);\n            }\n        }\n        j.push(t);\n    }\n    event.detail.hotlist = {pset: ptconf.flagged_commits ? null : ptconf.key, items: j};\n}\n\n\nfunction ptable_body_scroller(ctrh) {\n    return function () {\n        ctrh.scrollLeft = this.scrollLeft;\n        if (hasClass(ctrh.lastChild, \"gtable-left-pin\")) {\n            ctrh.lastChild.style.left = this.scrollLeft + \"px\";\n        }\n    };\n}\n\nfunction ptable_track_header(table) {\n    let ctr2;\n    if (!window.IntersectionObserver\n        || table.rows.length <= 10\n        || !(ctr2 = table.closest(\".gtable-container-2\"))) {\n        return null;\n    }\n    // find containers\n    const ctr1 = ctr2.parentElement, ctr0 = ctr1.parentElement;\n    // create pinned header table\n    const tctable = document.createElement(\"table\");\n    tctable.className = table.className;\n    tctable.classList.add(\"gtable-top-pin\");\n    tctable.classList.remove(\"gtable\");\n    tctable.style.width = table.style.width;\n    tctable.appendChild(table.tHead.cloneNode(true));\n    // hide tables own header\n    const thead_bounds = table.tHead.getBoundingClientRect(),\n        ctr0_bounds = ctr0.getBoundingClientRect(),\n        ctr2_bounds = ctr2.getBoundingClientRect();\n    table.style.marginTop = (-thead_bounds.height - 0.5) + \"px\";\n    table.tHead.style.visibility = \"hidden\";\n    // create header container\n    if (!hasClass(ctr0.firstChild, \"gtable-container-headers\")) {\n        const ctrh = document.createElement(\"div\");\n        ctrh.className = \"gtable-container-headers\";\n        ctrh.style.marginLeft = (ctr2_bounds.left - ctr0_bounds.left) + \"px\";\n        ctrh.scrollLeft = ctr2.scrollLeft;\n        ctr0.prepend(ctrh);\n        ctr2.addEventListener(\"scroll\", ptable_body_scroller(ctrh), {passive: true});\n    }\n    // append to header container\n    const ctrh = ctr0.firstChild;\n    if (hasClass(tctable, \"gtable-left-pin\")) {\n        tctable.style.left = ctrh.scrollLeft + \"px\";\n    }\n    ctrh.append(tctable);\n    tctable.tHead.addEventListener(\"click\", ptable_head_click);\n    return tctable;\n}\n\nfunction ptable_decorate_name_th(the, ptconf) {\n    if (ptconf.overridable_anonymous) {\n        const b = document.createElement(\"button\");\n        b.type = \"button\";\n        b.className = \"q n js-switch-anon\";\n        b.append(\"[anon]\");\n        the.append(\" \", b);\n    } else if (ptconf.original_anonymous) {\n        const sp = document.createElement(\"span\");\n        sp.className = \"n\";\n        sp.append(\"[anon]\");\n        the.append(\" \", sp);\n    }\n}\n\nfunction ptable_thead(cols, ptconf, tfixed) {\n    const tr = document.createElement(\"tr\");\n    let rem, current_width = 0;\n    tr.className = \"gtable-headrow gt k0\";\n    for (const c of cols) {\n        const the = document.createElement(\"th\");\n        the.scope = \"col\";\n        if (c.compare || c.make_compare) {\n            the.className = \"plsortable\";\n            the.setAttribute(\"data-pa-sort\", c.name);\n        }\n        c.th.call(c, the);\n        if (tfixed) {\n            let w = c.tw;\n            if (typeof w !== \"number\") {\n                w = w.call(c);\n            }\n            if (rem == null) {\n                rem = parseFloat(window.getComputedStyle(document.documentElement).fontSize);\n            }\n            w *= rem;\n            if (c.left == null) {\n                c.left = current_width;\n            }\n            c.width = w;\n            the.style.width = w + \"px\";\n            current_width += w;\n        }\n        tr.appendChild(the);\n    }\n    const thead = document.createElement(\"thead\");\n    thead.append(tr);\n    return thead;\n}\n\nlet queue_update_microtask_scheduled = 0, queue_update_microtask_tds = [];\n\nfunction update_microtask() {\n    queue_update_microtask_scheduled = 0;\n    for (const td of queue_update_microtask_tds) {\n        removeClass(td, \"update\");\n    }\n    queue_update_microtask_tds = [];\n}\n\nfunction queue_update_microtask(td) {\n    if (++queue_update_microtask_scheduled === 1) {\n        setTimeout(update_microtask, 0);\n    }\n    queue_update_microtask_tds.push(td);\n}\n\n\nconst gcoldef = {\n    rownumber: {\n        th: function (the) {\n            the.classList.add(\"gt-rownumber\");\n        },\n        td: function (tde) {\n            tde.className = \"gt-rownumber\";\n        },\n        tw: function () {\n            return Math.ceil(Math.log10(Math.max(this.ptconf.data.length, 1))) * 0.75;\n        }\n    },\n\n    checkbox: {\n        th: function (the) {\n            the.classList.add(\"gt-checkbox\");\n            const e = document.createElement(\"input\");\n            e.type = \"checkbox\";\n            e.className = \"uic js-range-click is-range-group ignore-diff\";\n            e.ariaLabel = \"Select all\";\n            e.setAttribute(\"data-range-type\", \"s61\");\n            the.appendChild(e);\n        },\n        td: function (tde, s) {\n            if (this.ptconf.mode & 1) {\n                return;\n            }\n            tde.className = \"gt-checkbox\";\n            let cbe = document.createElement(\"input\");\n            cbe.type = \"checkbox\";\n            cbe.value = 1;\n            if (this.ptconf.mode & 2) {\n                cbe.className = \"uic js-range-click\";\n                cbe.setAttribute(\"data-range-type\", \"s61o\");\n            } else {\n                cbe.name = this.ptconf.render_checkbox_name(s);\n                cbe.className = this.className || \"uic js-range-click papsel\";\n                cbe.setAttribute(\"data-range-type\", \"s61\");\n            }\n            tde.appendChild(cbe);\n        },\n        tw: 2,\n        pin: true\n    },\n\n    flagcheckbox: {\n        th: function (the) {\n            the.className = \"gt-checkbox\";\n        },\n        td: function (tde, s) {\n            if (this.ptconf.mode) {\n                return;\n            }\n            tde.className = \"gt-checkbox\";\n            let cbe = document.createElement(\"input\");\n            cbe.type = \"checkbox\";\n            cbe.name = \"s:\" + s._spos;\n            cbe.value = 1;\n            cbe.className = this.className || \"uic js-range-click papsel\";\n            cbe.setAttribute(\"data-range-type\", \"s61\");\n            tde.appendChild(cbe);\n        },\n        tw: 2,\n        pin: true\n    },\n\n    pset: {\n        th: function (the) {\n            the.classList.add(\"gt-pset\", \"l\");\n            the.append(\"Pset\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-pset\";\n            let ae = document.createElement(\"a\");\n            ae.href = this.ptconf.href(s);\n            ae.classname = \"track\";\n            const p = siteinfo.psets[s.pset];\n            ae.append((p ? p.urlkey : `<#${s.pset}>`) + (s.commit ? \"/\" + s.commit.substr(0, 7) : \"\"));\n            tde.append(ae);\n        },\n        tw: 8,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.pset != b.pset) {\n                const ap = siteinfo.psets[a.pset], bp = siteinfo.psets[b.pset];\n                if (ap && bp) {\n                    return ap.pos < bp.pos ? -1 : 1;\n                }\n            }\n            return a.pos < b.pos ? -1 : 1;\n        }\n    },\n\n    user: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-user\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous || this.ptconf.sort.u === \"user\") {\n                sp.replaceChildren(\"Username\");\n            } else if (this.ptconf.sort.u === \"email\") {\n                sp.replaceChildren(\"Email\");\n            } else {\n                sp.replaceChildren(\"Name\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-user\";\n            this.ptconf.render_user_td(tde, s);\n        },\n        tw: 14,\n        pin: true,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    username: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-username\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous || !this.ptconf.sort.email) {\n                sp.replaceChildren(\"Username\");\n            } else {\n                sp.replaceChildren(\"Email\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-username\";\n            this.ptconf.render_username_td(tde, s);\n        },\n        tw: 12,\n        pin: true,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    name: {\n        th: function (the) {\n            the.classList.add(\"gt-name\", \"l\");\n            the.replaceChildren(\"Name\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-name\";\n            this.ptconf.render_display_name(tde, s, false);\n        },\n        tw: 14,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    name2: {\n        th: function (the) {\n            let sp = the.firstChild;\n            if (!sp) {\n                the.classList.add(\"gt-name2\", \"l\");\n                the.appendChild((sp = document.createElement(\"span\")));\n                sp.className = \"heading\";\n                ptable_decorate_name_th(the, this.ptconf);\n            }\n            if (this.ptconf.anonymous) {\n                sp.replaceChildren(\"Username\");\n            } else {\n                sp.replaceChildren(\"Name\");\n            }\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-name2\";\n            this.ptconf.render_display_name(tde, s, true);\n        },\n        tw: 14,\n        sort_forward: true,\n        compare: true,\n        refreshable: 2\n    },\n\n    at: {\n        th: function (the) {\n            the.classList.add(\"gt-at\", \"l\");\n            the.replaceChildren(\"Flagged\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-at\";\n            if (s.at)\n                tde.append(strftime(\"%#e %b %#k:%M\", s.at));\n        },\n        tw: 8,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.at != b.at)\n                return a.at < b.at ? -1 : 1;\n            else\n                return a.pos < b.pos ? -1 : 1;\n        }\n    },\n\n    extension: {\n        th: function (the) {\n            the.classList.add(\"gt-extension\");\n            the.replaceChildren(\"X?\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-extension\";\n            s.x && tde.append(\"X\");\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.x != b.x)\n                return a.x ? -1 : 1;\n            else\n                return user_compare(a, b);\n        }\n    },\n\n    year: {\n        th: function (the) {\n            the.classList.add(\"gt-year\");\n            the.replaceChildren(\"Yr\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-year c\";\n            tde.replaceChildren(render_year(s.year));\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.year != b.year) {\n                if (!a.year || !b.year)\n                    return a.year ? -1 : 1;\n                else if (typeof a.year !== typeof b.year)\n                    return typeof a.year === \"number\" ? -1 : 1;\n                else\n                    return a.year < b.year ? -1 : 1;\n            } else\n                return user_compare(a, b);\n        }\n    },\n\n    grader: {\n        th: function (the) {\n            the.classList.add(\"gt-grader\", \"l\");\n            the.replaceChildren(\"Grader\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-grader\";\n            if (s.gradercid && siteinfo.pc[s.gradercid]) {\n                tde.replaceChildren(grader_name(siteinfo.pc[s.gradercid]));\n            } else if (s.gradercid) {\n                tde.replaceChildren(\"???\");\n            }\n        },\n        tw: 6,\n        sort_forward: true,\n        compare: function (a, b) {\n            return grader_compare(a, b) || user_compare(a, b);\n        },\n        refreshable: 2\n    },\n\n    latehours: {\n        th: function (the) {\n            the.classList.add(\"gt-latehours\", \"r\");\n            the.title = \"Late\";\n            the.replaceChildren(\"\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-latehours r\";\n            tde.replaceChildren(s.late_hours || \"\");\n        },\n        tw: 2.5,\n        compare: function (a, b) {\n            if (a.late_hours != b.late_hours) {\n                return (a.late_hours || 0) - (b.late_hours || 0);\n            } else {\n                return user_compare(a, b);\n            }\n        },\n        refreshable: 1\n    },\n\n    notes: {\n        th: function (the) {\n            the.classList.add(\"gt-notes\");\n            the.replaceChildren(\"\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-notes c\";\n            let t = s.scores_visible ? '' : '';\n            if (s.grade_commit\n                && s.grade_commit === s.commit\n                && this.ptconf.flagged_commits) {\n                t += 'G';\n            }\n            if (s.grade_status < 0) {\n                t += '';\n            }\n            if (s.has_notes) {\n                t += '';\n            }\n            if (s.has_nongrader_notes\n                && !this.ptconf.flagged_commits) {\n                t += \"+\";\n            }\n            tde.replaceChildren(t);\n        },\n        tw: 2,\n        refreshable: 1\n    },\n\n    total: {\n        th: function (the) {\n            the.classList.add(\"gt-total\", \"r\");\n            the.replaceChildren(\"Tot\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-total r\";\n            tde.replaceChildren(s.total != null ? s.total + \"\" : \"\");\n        },\n        compare: function (a, b) {\n            if (a.total == null || b.total == null) {\n                if (a.total != null) {\n                    return 1;\n                } else if (b.total != null) {\n                    return -1;\n                }\n            } else if (a.total != b.total) {\n                return a.total < b.total ? -1 : 1;\n            }\n            return -user_compare(a, b);\n        },\n        tw: 3.5,\n        refreshable: 1\n    },\n\n    grade: {\n        th: function (the) {\n            the.classList.add(...this.className.split(/\\s+/));\n            the.title = this.ge.title_text;\n            the.replaceChildren(this.ge.abbr());\n        },\n        td: function (tde, s, opt) {\n            const gr = s.grades[this.gidx];\n            tde.className = this.className;\n            if (s.autogrades\n                && s.autogrades[this.gidx] != null\n                && s.autogrades[this.gidx] !== gr) {\n                tde.className += \" gt-highlight\";\n            }\n            if (opt && opt.oldgrades && opt.oldgrades[this.gidx] !== gr) {\n                tde.className += \" update\";\n                queue_update_microtask(tde);\n            }\n            tde.replaceChildren(this.ge.tcell(gr));\n        },\n        tw: function () {\n            const w = this.ge.abbr().length * 0.5 + 1.5;\n            return Math.max(w, this.ge.tcell_width());\n        },\n        refreshable: 1\n    },\n\n    ngrades: {\n        th: function (the) {\n            the.classList.add(\"gt-ngrades\", \"r\");\n            the.replaceChildren(\"#G\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-ngrades r\";\n            tde.replaceChildren(s.ngrades ? s.ngrades + \"\" : \"\");\n        },\n        tw: 2,\n        sort_forward: true,\n        compare: function (a, b) {\n            if (a.ngrades !== b.ngrades)\n                return a.ngrades < b.ngrades ? -1 : 1;\n            else\n                return -user_compare(a, b);\n        },\n        refreshable: 1\n    },\n\n    repo: {\n        th: function () {\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-repo\";\n            if (!s.repo) {\n                return;\n            }\n            const ae = document.createElement(\"a\");\n            if (this.ptconf.anonymous) {\n                ae.className = \"ui pa-anonymized-link\";\n                ae.href = \"\";\n                ae.setAttribute(\"data-pa-link\", s.repo);\n            } else {\n                ae.className = \"track\";\n                ae.href = s.repo;\n            }\n            ae.append(\"repo\");\n            tde.replaceChildren(ae);\n            if (s.repo_broken) {\n                tde.append(\" \", strong(\"broken\"));\n            }\n            if (s.repo_unconfirmed) {\n                tde.append(\" \", strong(\"unconfirmed\"));\n            }\n            if (s.repo_too_open) {\n                tde.append(\" \", strong(\"open\"));\n            }\n            if (s.repo_handout_old) {\n                tde.append(\" \", strong(\"handout\"));\n            }\n            if (s.repo_partner_error) {\n                tde.append(\" \", strong(\"partner\"));\n            }\n            if (s.repo_sharing) {\n                tde.append(\" \", strong(\"sharing\"));\n            }\n        },\n        tw: 10\n    },\n\n    conversation: {\n        th: function (the) {\n            the.classList.add(\"gt-conversation\", \"l\");\n            the.replaceChildren(\"Flag\");\n        },\n        td: function (tde, s) {\n            tde.className = \"gt-conversation l\";\n            if (s.conversation) {\n                tde.append(s.conversation);\n            } else if (s.conversation_pfx) {\n                tde.append(s.conversation_pfx + \"\");\n            }\n        },\n        compare: function (a, b) {\n            const sa = a.conversation || a.conversation_pfx || \"\",\n                  sb = b.conversation || b.conversation_pfx || \"\";\n            if (sa === \"\" || sb === \"\") {\n                return sa === sb ? 0 : (sa === \"\" ? 1 : -1);\n            } else {\n                return sa.localeCompare(sb);\n            }\n        },\n        sort_forward: true,\n        tw: 20\n    }\n};\n\n\nfunction ptables_cellpos(ptconf, tables, key) {\n    const a = [];\n    for (let i = 0; i !== tables.length; ++i) {\n        const table = tables[i],\n            idx = ptconf.column_index_in(key, table);\n        if (idx >= 0) {\n            a.push({table: table, index: idx});\n        }\n    }\n    return a;\n}\n\nfunction ptables_rerender_key(ptconf, tables, ...keys) {\n    for (const key of keys) {\n        const c = ptconf.colmap[key];\n        for (const ti of ptables_cellpos(ptconf, tables, key)) {\n            const table = ti.table, index = ti.index;\n            if (table.tBodies.length > 0) {\n                for (let tr = table.tBodies[0].firstChild; tr; tr = tr.nextSibling) {\n                    const spos = tr.getAttribute(\"data-pa-spos\");\n                    if (spos) {\n                        const su = ptconf.smap[spos], tde = tr.children[index];\n                        c.td.call(c, tde, su);\n                    }\n                }\n            }\n            c.th.call(c, table.tHead.firstChild.children[index]);\n        }\n    }\n}\n\n\nfunction ptable_rangechange(evt) {\n    if (evt.detail.rangeType === \"s61\")\n        $(this).find(\".js-gdialog\").prop(\"disabled\", !evt.detail.newState);\n}\n\n\nfunction ptable_boring_row(table) {\n    const tr = document.createElement(\"tr\");\n    tr.className = \"gt-boring\";\n    const td = document.createElement(\"td\");\n    td.colSpan = table.rows[0].childNodes.length;\n    td.appendChild(document.createElement(\"hr\"));\n    tr.appendChild(td);\n    return tr;\n}\n\nfunction ptable_permute(ptconf, table, data) {\n    const tb = table.tBodies[0],\n        mode = table.classList.contains(\"gtable-left-pin\") ? 2 : 0,\n        klasses = [\"k0\", \"k1\"],\n        rowmap = tb.firstChild && ptconf.tbody_rowmap(tb);\n    let was_boringness = false, trn = 1,\n        last = tb.firstChild;\n    for (const su of data) {\n        if (su.boringness !== was_boringness && was_boringness !== false) {\n            if (last && last.className === \"gt-boring\") {\n                last = last.nextSibling;\n            } else {\n                tb.insertBefore(ptable_boring_row(table), last);\n            }\n        }\n        was_boringness = su.boringness;\n\n        while (last && last.className === \"gt-boring\") {\n            const tr = last;\n            last = last.nextSibling;\n            tb.removeChild(tr);\n        }\n\n        let any_visible = false;\n        for (const ss of su.partners ? [su, ...su.partners] : [su]) {\n            let tr;\n            if (!rowmap || !(tr = rowmap.rows[ss._spos])) {\n                tr = ptconf.render_table_row(ss, su === ss ? mode : mode | 1);\n                if (rowmap) {\n                    rowmap.rows[ss._spos] = tr;\n                    rowmap.users.set(tr, ss);\n                }\n            }\n            if (tr !== last) {\n                tb.insertBefore(tr, last);\n            } else {\n                last = last.nextSibling;\n            }\n            tr.classList.remove(klasses[(trn ^ 1) & 1]);\n            tr.classList.add(klasses[trn & 1]);\n            tr.hidden = ss.hidden;\n            any_visible = any_visible || !tr.hidden;\n        }\n        any_visible && ++trn;\n    }\n}\n\n\nexport function pa_pset_table(form, pconf, data) {\n    const ptconf = new PtableConf(pconf, data || []);\n    form.pa__ptconf = ptconf;\n    const table = form.querySelector(\"table.gtable\");\n    if (table) {\n        pa_render_pset_table.call(table, ptconf);\n    }\n}\n\nfunction pa_render_pset_table(ptconf) {\n    const table = this, $j = $(table);\n    let $alltables = $(table),\n        hdrtable = null, lpintable = null, lpinhdrtable = null,\n        slist_input,\n        gradesheet = null,\n        active_nameflag = -1,\n        col, colmap, data = ptconf.data;\n\n    function sort_nameflag() {\n        if (ptconf.anonymous) {\n            return 8;\n        } else if (ptconf.sort.u === \"name\") {\n            return 1 | (ptconf.sort.last ? 2 : 0);\n        } else if (ptconf.sort.u === \"email\") {\n            return 4;\n        }\n        return 0;\n    }\n\n    function initialize() {\n        let sort = ptconf.sort,\n            x = wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\");\n        if (x) {\n            try {\n                x = JSON.parse(x);\n                if (x && typeof x === \"object\") {\n                    sort = ptconf.sort = x;\n                    delete sort.override_anonymous; // XXX backward compat 21-Dec-2022\n                }\n            } catch {\n            }\n        }\n        if (!sort.f || !/^\\w+$/.test(sort.f)) {\n            sort.f = \"name\";\n        }\n        if (sort.rev !== 1 && sort.rev !== -1) {\n            sort.rev = 1;\n        }\n        if (!ptconf.overridable_anonymous) {\n            delete sort.deblind;\n        }\n        if (sort.deblind) {\n            let now = (new Date).getTime() / 1000;\n            if (typeof sort.deblind === \"number\" && sort.deblind + 3600 > now) {\n                sort.deblind = now;\n            } else {\n                delete sort.deblind;\n            }\n            wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\", JSON.stringify(sort));\n        }\n        if (sort.deblind) {\n            ptconf.anonymous = false;\n        }\n\n        if (ptconf.grades) {\n            gradesheet = new GradeSheet(ptconf.grades);\n        } else {\n            gradesheet = new GradeSheet({order: []});\n        }\n        gradesheet.scores_visible = ptconf.scores_visible;\n        ptconf.set_gradesheet(gradesheet);\n\n        let ngrades_expected = -1,\n            has_late_hours = false, any_visible = ptconf.scores_visible;\n        for (let i = 0; i !== data.length; ++i) {\n            const s = data[i] = gradesheet.make_child().assign(data[i]);\n            if (s.dropped) {\n                s.boringness = 2;\n            } else if (s.emptydiff\n                       || (!s.grade_commit && !s.commit && !ptconf.gitless_grades)\n                       || s.grade_status < 0) {\n                s.boringness = 1;\n            } else {\n                s.boringness = 0;\n            }\n            let ngrades = 0;\n            if (s.grades) {\n                for (let x of ptconf.in_total_indexes) {\n                    if (s.grades[x] != null && s.grades[x] !== \"\")\n                        ++ngrades;\n                }\n            }\n            s.ngrades = ngrades;\n            if (ngrades_expected === -1) {\n                ngrades_expected = ngrades;\n            } else if (ngrades_expected >= 0\n                       && ngrades_expected !== ngrades\n                       && (!s.boringness || ngrades > 0)) {\n                ngrades_expected = -2;\n            }\n            has_late_hours = has_late_hours || !!s.late_hours;\n            any_visible = any_visible || s.scores_visible_pinned || s.grade_status < 0;\n        }\n        const need_ngrades = ngrades_expected === -2;\n\n        if (ptconf.requested_columns) {\n            col = ptconf.requested_columns;\n        } else {\n            col = [\"rownumber\"];\n            if (ptconf.checkbox) {\n                col.push(ptconf.flagged_commits ? \"flagcheckbox\" : \"checkbox\");\n            }\n            if (ptconf.flagged_commits) {\n                col.push(\"pset\");\n                col.push(\"at\");\n            }\n            col.push(\"user\", \"extension\", \"year\", \"grader\");\n            if (has_late_hours) {\n                col.push(\"latehours\");\n            }\n            if (ptconf.flagged_commits) {\n                col.push(\"conversation\");\n            }\n            if (ptconf.flagged_commits || !ptconf.gitless_grades || any_visible) {\n                col.push(\"notes\");\n            }\n            if (ptconf.need_total) {\n                col.push(\"total\");\n            }\n            let gi = ptconf.gradesheet;\n            for (let i = 0; i !== gi.value_order.length; ++i) {\n                const ge = gi.entries[gi.value_order[i]];\n                col.push(ge.configure_column({\n                    type: \"grade\",\n                    name: \"/g/\" + ge.key,\n                    gidx: i,\n                    gkey: ge.key,\n                    ptconf: ptconf\n                }));\n            }\n            if (need_ngrades) {\n                col.push(\"ngrades\");\n            }\n            if (!ptconf.gitless) {\n                col.push(\"repo\");\n            }\n        }\n\n        for (let c of col) {\n            if (typeof c === \"string\") {\n                c = {type: c, name: c};\n            }\n            Object.assign(c, gcoldef[c.type]);\n            c.ptconf = ptconf;\n            ptconf.add_column(c);\n        }\n        col = ptconf.col;\n        colmap = ptconf.colmap;\n\n        if (table.closest(\"form\")) {\n            slist_input = document.createElement(\"input\");\n            slist_input.type = \"hidden\";\n            slist_input.name = \"slist\";\n            table.after(slist_input);\n        }\n    }\n\n\n    function assign_slist() {\n        var j = [];\n        for (var i = 0; i !== data.length; ++i) {\n            j.push(ptconf.ukey(data[i]));\n        }\n        slist_input.value = j.join(\" \");\n    }\n\n    function rerender_rownumber() {\n        const idx = colmap.rownumber.index;\n        let trn = 0;\n        for (let tr = table.tBodies[0].firstChild; tr; tr = tr.nextSibling) {\n            if (hasClass(tr, \"gt\") && !tr.hidden) {\n                ++trn;\n                tr.children.item(idx).textContent = trn + \".\";\n            }\n        }\n    }\n\n    function render_user_compare(u) {\n        let t = \"\";\n        if ((active_nameflag & 8) && u.anon_user) {\n            t = u.anon_user + \" \";\n        } else if (active_nameflag & 1) {\n            t = render_name(u, (active_nameflag & 2) === 2) + \" \";\n        }\n        if ((active_nameflag & 4) && u.email) {\n            t += u.email;\n        } else {\n            t += u.user || \"\";\n        }\n        if (u.pset != null) {\n            t += sprintf(\" %5s\", u.pset);\n        }\n        if (u.at != null) {\n            t += sprintf(\" %.11g\", u.at);\n        }\n        return t.toLowerCase();\n    }\n\n    function set_user_sorters() {\n        const nf = sort_nameflag();\n        if (nf !== active_nameflag) {\n            active_nameflag = nf;\n            for (var i = 0; i !== data.length; ++i) {\n                data[i]._sort_user = render_user_compare(data[i]);\n            }\n        }\n    }\n\n    function sort_data() {\n        let f = ptconf.sort.f;\n        set_user_sorters();\n        let colr = colmap[f];\n        if (colr && colr.compare && colr.compare !== true) {\n            data.sort(colr.compare);\n        } else if (colr && colr.make_compare) {\n            data.sort(colr.make_compare(ptconf.sort, colr.subtype || null));\n        } else if (((f === \"name\" || f === \"name2\") && !ptconf.anonymous)\n                   || f === \"user\") {\n            data.sort(user_compare);\n        } else if (f === \"gradestatus\") {\n            data.sort(function (a, b) {\n                const av = a.scores_visible, bv = b.scores_visible;\n                if (av !== bv) {\n                    return av ? -1 : 1;\n                } else if (a.has_notes != b.has_notes) {\n                    return a.has_notes ? -1 : 1;\n                } else {\n                    return grader_compare(a, b) || user_compare(a, b);\n                }\n            });\n        } else if (ptconf.sort.email && !ptconf.anonymous) {\n            f = \"username\";\n            data.sort(function (a, b) {\n                var ae = (a.email || \"\").toLowerCase(), be = (b.email || \"\").toLowerCase();\n                if (ae !== be) {\n                    if (ae === \"\" || be === \"\")\n                        return ae === \"\" ? 1 : -1;\n                    else\n                        return ae < be ? -1 : 1;\n                } else {\n                    return user_compare(a, b);\n                }\n            });\n        } else { /* \"username\" */\n            if (f !== \"name2\") {\n                f = \"username\";\n            }\n            data.sort(user_compare);\n        }\n\n        if (ptconf.sort.rev < 0) {\n            data.reverse();\n        }\n        data.sort(function (a, b) {\n            return a.boringness !== b.boringness ? a.boringness - b.boringness : 0;\n        });\n    }\n\n    function checkbox_click() {\n        const range = this.getAttribute(\"data-range-type\");\n        if ((range === \"s61\" && lpintable) || range === \"s61o\") {\n            const wanto = range === \"s61\",\n                tr0 = this.closest(\"tr\"),\n                tr1 = (wanto ? lpintable : table).rows[tr0.rowIndex],\n                cb1 = ptconf.user_row_checkbox(tr1);\n            if (cb1.checked !== this.checked) {\n                cb1.click();\n            }\n        }\n    }\n\n    function make_overlay_observer() {\n        let i = 0;\n        while (i !== col.length && !col[i].pin) {\n            ++i;\n        }\n        var overlay_div = $('<div style=\"position:absolute;left:0;top:0;bottom:0;width:' + (col[i].left - 10) + 'px;pointer-events:none\"></div>').prependTo($j.parent())[0],\n            table_hit = false, left_hit = false;\n        function observer_fn(entries) {\n            for (let e of entries) {\n                if (e.target === overlay_div) {\n                    left_hit = e.isIntersecting;\n                } else {\n                    table_hit = e.isIntersecting;\n                }\n            }\n            if (table_hit && (!left_hit || lpintable)) {\n                if (!left_hit && !lpintable) {\n                    make_overlay();\n                }\n                toggleClass(lpintable.parentElement, \"hidden\", left_hit);\n                lpinhdrtable && toggleClass(lpinhdrtable, \"hidden\", left_hit);\n            }\n        }\n        var observer = new IntersectionObserver(observer_fn);\n        observer.observe(overlay_div);\n        observer.observe(table.parentElement);\n    }\n\n    function make_overlay() {\n        const cx = ptconf.pinned_columns;\n        let tw = 0;\n        for (const c of cx) {\n            tw += c.width;\n        }\n\n        lpintable = document.createElement(\"table\");\n        lpintable.className = \"gtable-left-pin user-gtable gtable-fixed new\";\n        lpintable.style.width = (tw + 24) + \"px\";\n        lpintable.appendChild(ptable_thead(cx, ptconf, true));\n        lpintable.appendChild(document.createElement(\"tbody\"));\n        lpintable.tHead.firstChild.classList.add(\"kfade\");\n\n        let tr = table.rows[0], otr = lpintable.rows[0];\n        for (let i = 0; i !== cx.length; ++i) {\n            otr.childNodes[i].className = tr.childNodes[cx[i].index].className;\n        }\n\n        const div = document.createElement(\"div\");\n        div.className = \"gtable-container-left-pin\";\n        div.appendChild(lpintable);\n        table.parentNode.prepend(div);\n        lpintable.tHead.addEventListener(\"click\", ptable_head_click);\n        $(lpintable).find(\"tbody\").on(\"click\", \"input[type=checkbox]\", checkbox_click);\n\n        ptable_permute(ptconf, lpintable, data);\n        lpinhdrtable = ptable_track_header(lpintable);\n        $j.find(\"input[data-range-type=s61]:checked\").each(checkbox_click);\n        lpintable.addEventListener(\"mouseenter\", user_hover, true);\n        lpintable.addEventListener(\"mouseleave\", user_hover, true);\n        queueMicrotask(function () {\n            removeClass(lpintable, \"new\");\n            lpinhdrtable && removeClass(lpinhdrtable, \"new\");\n        });\n\n        $alltables = $alltables.add(lpintable).add(lpinhdrtable);\n    }\n\n    function set_tables_width() {\n        const lastc = col[col.length - 1];\n        let width = lastc.left + lastc.width;\n        if (ptconf.anonymous) {\n            colmap.name && (width -= colmap.name.width);\n            colmap.year && (width -= colmap.year.width);\n        }\n        $alltables.each(function () {\n            if (!hasClass(this, \"gtable-left-pin\")) {\n                this.style.width = width + \"px\";\n            }\n        });\n    }\n\n    function render() {\n        const tfixed = $j.hasClass(\"want-gtable-fixed\"),\n            thead = ptable_thead(col, ptconf, true);\n\n        toggleClass(table, \"gt-anonymous\", !!ptconf.anonymous);\n        table.appendChild(thead);\n        toggleClass(table, \"gt-useemail\", !!ptconf.sort.email);\n        if (tfixed) {\n            set_tables_width();\n            removeClass(table, \"want-gtable-fixed\");\n            addClass(table, \"gtable-fixed\");\n        }\n\n        const tbody = document.createElement(\"tbody\");\n        tbody.className = \"has-hotlist\";\n        table.appendChild(tbody);\n        if (!ptconf.no_sort) {\n            sort_data();\n            rerender_sort_header();\n        }\n\n        for (const su of data) {\n            ptconf.push(su);\n            for (const psu of su.partners || []) {\n                ptconf.push(psu);\n            }\n        }\n\n        ptable_permute(ptconf, table, data);\n        colmap.rownumber && rerender_rownumber();\n        slist_input && assign_slist();\n        $j.find(\"tbody\").on(\"click\", \"input[type=checkbox]\", checkbox_click);\n\n        hdrtable = ptable_track_header(table);\n        $alltables = $alltables.add(hdrtable);\n        if (tfixed\n            && window.IntersectionObserver\n            && table.closest(\".gtable-container-2\")) {\n            make_overlay_observer();\n        }\n    }\n\n    function rerender_sort_header() {\n        $alltables.children(\"thead\").find(\".plsortable\").removeClass(\"plsortactive plsortreverse\");\n        $alltables.children(\"thead\")\n            .find(\"th[data-pa-sort='\" + ptconf.sort.f + \"']\")\n            .addClass(\"plsortactive\")\n            .toggleClass(\"plsortreverse\", ptconf.sort.rev < 0);\n    }\n\n    function sortchange(evt) {\n        const osort = ptconf.sort, nsort = evt.detail.sort;\n        ptconf.sort = nsort;\n        if (ptconf.overridable_anonymous\n            && nsort.deblind != osort.deblind) {\n            ptconf.anonymous = !nsort.deblind;\n            $alltables.toggleClass(\"gt-anonymous\", !!ptconf.anonymous);\n            set_tables_width();\n            $alltables.children(\"tbody\").find(\"input.gt-check\").each(function () {\n                const s = ptconf.smap[this.parentNode.parentNode.getAttribute(\"data-pa-spos\")];\n                this.setAttribute(\"name\", ptconf.render_checkbox_name(s));\n            });\n            const anon = table.closest(\"form\").elements.anonymous;\n            anon && (anon.value = ptconf.anonymous ? \"1\" : \"0\");\n        }\n        if (nsort.last !== osort.last\n            || nsort.deblind != osort.deblind) {\n            ptables_rerender_key(ptconf, $alltables, \"name\", \"name2\", \"username\", \"user\");\n        } else if (nsort.u !== osort.u) {\n            ptables_rerender_key(ptconf, $alltables, \"username\", \"user\");\n        }\n\n        sort_data();\n        ptable_permute(ptconf, table, data);\n        lpintable && ptable_permute(ptconf, lpintable, data);\n        colmap.rownumber && rerender_rownumber();\n        rerender_sort_header();\n        slist_input && assign_slist();\n        wstorage.site(true, \"pa-pset\" + ptconf.id + \"-table\", JSON.stringify(nsort));\n    }\n\n    function events() {\n        const f = table.closest(\"form\");\n        table.tBodies[0].addEventListener(\"pa-hotlist\", ptable_make_hotlist);\n        table.tBodies[0].addEventListener(\"click\", ptable_body_click);\n        table.addEventListener(\"mouseenter\", user_hover, true);\n        table.addEventListener(\"mouseleave\", user_hover, true);\n        table.tHead.addEventListener(\"click\", ptable_head_click);\n        f.addEventListener(\"rangechange\", ptable_rangechange);\n        f.addEventListener(\"sortchange\", sortchange);\n    }\n\n    initialize();\n    render();\n    events();\n}\n\n\ntooltip.add_builder(\"pa-ptable-user\", function () {\n    let spos = this.closest(\"tr\").getAttribute(\"data-pa-spos\"),\n        ptconf = this.closest(\"form\").pa__ptconf,\n        su = ptconf.smap[spos];\n    return {content: new Promise((resolve) => {\n        const maindiv = document.createElement(\"div\"),\n            anon = ptconf.anonymous && su.anon_user;\n        maindiv.className = \"d-flex align-items-center\";\n        if (su.imageid && !anon) {\n            const ae = ptconf.make_student_ae(su),\n                img = document.createElement(\"img\");\n            img.className = \"pa-tinyface\";\n            img.src = hoturl(\"face\", {u: su.user, imageid: su.imageid});\n            ae.append(img);\n            maindiv.append(ae);\n        }\n        const idiv = document.createElement(\"div\");\n        maindiv.append(idiv);\n        const userae = ptconf.make_student_ae(su);\n        userae.className += \" font-weight-bold\";\n        userae.append(anon ? su.anon_user : su.user);\n        idiv.append(userae);\n        if (su.x) {\n            idiv.append(\" (X)\");\n        } else if (!anon && su.year) {\n            idiv.append(\" \" + render_year(su.year));\n        }\n        idiv.append(document.createElement(\"br\"));\n        if (!anon) {\n            const name = render_name(su, false);\n            if (name !== \"\") {\n                const nameae = ptconf.make_student_ae(su);\n                nameae.className = \"q\";\n                nameae.append(name);\n                idiv.append(nameae, document.createElement(\"br\"));\n            }\n            if (su.email) {\n                idiv.append(su.email, document.createElement(\"br\"));\n            }\n        }\n        resolve(maindiv);\n    }), delay: 400, className: \"gray small ml-2\", dir: \"w\",\n        noDelayClass: \"pa-ptable-user\"};\n});\n\n\nfunction ptable_recolor(tb) {\n    const klasses = [\"k0\", \"k1\"];\n    let trn = 1, boring = null, rownum = false;\n    for (let tr = tb.firstChild; tr; tr = tr.nextElementSibling) {\n        if (tr.className === \"gt-boring\") {\n            tr.hidden = true;\n            boring = trn > 1 ? tr : null;\n            continue;\n        } else if (tr.hidden) {\n            continue;\n        }\n        if (rownum === false) {\n            rownum = null;\n            for (let e = tr.firstChild, i = 0; e; e = e.nextSibling, ++i) {\n                if (e.className === \"gt-rownumber\")\n                    rownum = i;\n            }\n        }\n        if (rownum !== null) {\n            tr.children.item(rownum).textContent = trn + \".\";\n        }\n        tr.classList.remove(klasses[(trn ^ 1) & 1]);\n        tr.classList.add(klasses[trn & 1]);\n        if (!tr.classList.contains(\"gtrow-partner\")) {\n            ++trn;\n        }\n        if (boring) {\n            boring.hidden = false;\n            boring = null;\n        }\n    }\n}\n\nlet search_ptconf, search_target;\n\nconst search_keywords = {\n    grade: (text, ml) => {\n        if (text === \"no\") {\n            return (se, su) => su.grade_status < 0 || (!su.grade_status && su.emptydiff);\n        } else if (text === \"yes\") {\n            return (se, su) => su.grade_status > 0;\n        } else if (text === \"user\") {\n            return (se, su) => su.grade_status === 1;\n        } else if (text === \"none\") {\n            return (se, su) => !su.grade_status;\n        }\n        ml.push({status: 2, message: `<0>Expected \\`grade:no\\`, \\`grade:yes\\`, \\`grade:user\\`, or \\`grade:none\\``});\n        return () => false;\n    },\n    grader: (text, ml) => {\n        if (text === \"any\") {\n            return (se, su) => !!su.gradercid;\n        } else if (text === \"none\") {\n            return (se, su) => !su.gradercid;\n        }\n        const re = new RegExp(regexp_quote(SearchParser.unquote(text)), \"i\"),\n            mcids = [];\n        for (const cid in siteinfo.pc) {\n            const pc = siteinfo.pc[cid];\n            if (re.test(grader_name(pc)))\n                mcids.push(+cid);\n        }\n        if (mcids.length === 1) {\n            return (se, su) => su.gradercid === mcids[0];\n        } else if (mcids.length > 1) {\n            return (se, su) => mcids.includes(su.gradercid);\n        }\n        ml.push({status: 2, message: `<0>\\`${text}\\` matches no graders`});\n        return () => false;\n    },\n    year: (text, ml) => {\n        if (!/^(?:(?:\\d+[-]\\d+|[a-zA-Z\\d]+)(?=,\\w|$),?)+$/.test(text)) {\n            ml.push({status: 2, message: `<0>Bad \\`year\\``});\n            return () => false;\n        }\n        text = text.toUpperCase();\n        const a = [];\n        for (const m of text.matchAll(/(\\w+)[-]?(\\w*)/g)) {\n            if (m[2]) {\n                a.push(+m[1], +m[2]);\n            } else if (/^\\d+$/.test(m[1])) {\n                a.push(+m[1], null);\n            } else {\n                a.push(m[1], null);\n            }\n        }\n        return (se, su) => {\n            if (!su.year) {\n                return false;\n            }\n            const num = typeof su.year === \"number\";\n            for (let i = 0; i !== a.length; i += 2) {\n                if (a[i + 1] === null\n                    ? su.year === a[i]\n                    : num && su.year >= a[i] && su.year <= a[i + 1])\n                    return true;\n            }\n            return false;\n        };\n    },\n    is: (text, ml) => {\n        if (text === \"x\" || text === \"X\") {\n            return (se, su) => !!su.x;\n        } else if (text === \"college\") {\n            return (se, su) => !su.x;\n        } else if (text === \"dropped\") {\n            return (se, su) => !!su.dropped;\n        }\n        ml.push({status: 2, message: `<0>Expected \\`is:x\\`, \\`is:college\\`, or \\`is:dropped\\``});\n        return () => false;\n    }\n};\n\nfunction make_search_name(text) {\n    const re = new RegExp(regexp_quote(text), \"i\");\n    return () => {\n        if (search_ptconf.anonymous) {\n            return re.test(search_target.anon_user);\n        }\n        return re.test(search_target.first)\n            || re.test(search_target.last)\n            || re.test(search_target.email)\n            || re.test(search_target.user);\n    };\n}\n\nconst grade_search_keywords = {\n    any: (gidx) => { return () => search_target.grades[gidx] != null; },\n    none: (gidx) => { return () => search_target.grades[gidx] == null; },\n    eq: (gidx, v) => { return () => search_target.grades[gidx] == v; },\n    ne: (gidx, v) => { return () => search_target.grades[gidx] != v; },\n    gt: (gidx, v) => { return () => search_target.grades[gidx] > v; },\n    ge: (gidx, v) => { return () => search_target.grades[gidx] >= v; },\n    lt: (gidx, v) => { return () => search_target.grades[gidx] < v; },\n    le: (gidx, v) => { return () => search_target.grades[gidx] <= v; }\n};\n\nfunction parse_search_compar(text) {\n    const m = text.match(/^(<=?|>=?|==?|!=?||||(?=[\\d.]))\\s*(\\d+\\.?\\d*|\\.\\d+)$/);\n    if (!m) {\n        return null;\n    }\n    const gv = +m[2];\n    if (m[1] === \"=\" | m[1] === \"==\" || m[1] === \"\") {\n        return {op: \"eq\", value: gv};\n    } else if (m[1] === \"!\" || m[1] === \"!=\" || m[1] === \"\") {\n        return {op: \"ne\", value: gv};\n    } else if (m[1] === \"<\") {\n        return {op: \"lt\", value: gv};\n    } else if (m[1] === \"<=\" || m[1] === \"\") {\n        return {op: \"le\", value: gv};\n    } else if (m[1] === \">\") {\n        return {op: \"gt\", value: gv};\n    }\n    return {op: \"ge\", value: gv};\n}\n\nfunction make_compare(op) {\n    if (op === \"eq\") {\n        return (a, b) => a == b;\n    } else if (op === \"ne\") {\n        return (a, b) => a != b;\n    } else if (op === \"lt\") {\n        return (a, b) => a < b;\n    } else if (op === \"le\") {\n        return (a, b) => a <= b;\n    } else if (op === \"gt\") {\n        return (a, b) => a > b;\n    } else if (op === \"ge\") {\n        return (a, b) => a >= b;\n    }\n    return () => false;\n}\n\nfunction make_search_keyword_compare(gi, ge, text, ml) {\n    const gidx = ge.value_order_in(gi);\n    if (text === \"any\") {\n        return grade_search_keywords.any(gidx);\n    } else if (text === \"none\") {\n        return grade_search_keywords.none(gidx);\n    }\n    const sfunc = ge.gc.parse_search\n        && ge.gc.parse_search.call(ge, text, gidx, ml);\n    if (sfunc) {\n        return () => sfunc(search_target);\n    }\n    const compar = parse_search_compar(text);\n    if (!compar) {\n        ml.push({status: 2, message: `<0>Search comparison \\`${text}\\` not understood`});\n        return null;\n    }\n    return grade_search_keywords[compar.op](gidx, compar.value);\n}\n\nfunction find_search_keyword(se, ptconf, ml) {\n    let kw = se.kword, text = se.text;\n    if (!kw) {\n        if (text === \"\" || text === \"*\" || text === \"ANY\" || text === \"ALL\") {\n            return () => true;\n        }\n        let m = text.match(/^([a-zA-Z][-_a-zA-Z0-9]*)((?:<=?|>=?|==?|!=?|||)[^<>=!]*)$/);\n        if (!m) {\n            return make_search_name(se.unquoted_text());\n        }\n        kw = m[1];\n        text = m[2];\n    }\n\n    const skw = search_keywords[kw];\n    if (skw) {\n        return skw(text, ml);\n    }\n\n    const gi = ptconf.gradesheet,\n        collator = new Intl.Collator(undefined, {usage: \"search\", sensitivity: \"accent\"});\n    let matchge = null, titlege = [];\n    for (let i = 0; i !== gi.value_order.length; ++i) {\n        const ge = gi.entries[gi.value_order[i]];\n        if (ge.key === kw) {\n            matchge = ge;\n            break;\n        } else if (collator.compare(ge.title_text, kw) === 0\n                   || collator.compare(ge.abbr(), kw) === 0) {\n            titlege.push(ge);\n        }\n    }\n    if (!matchge && titlege.length === 1) {\n        matchge = titlege[0];\n    }\n    if (matchge) {\n        return make_search_keyword_compare(gi, matchge, text, ml);\n    }\n    if ((kw === \"tot\" || kw === \"total\")\n        && ptconf.need_total) {\n        const compar = parse_search_compar(text);\n        if (compar) {\n            const f = make_compare(compar.op);\n            return (se, su) => f(su.total, compar.value);\n        }\n    }\n    ml.push({status: 2, message: `<0>Search \\`${kw}\\` not understood`});\n    return null;\n}\n\nfunction prepare_search(se, ml) {\n    se.user_data = find_search_keyword(se, search_ptconf, ml);\n}\n\nfunction evaluate_search(se) {\n    return se.user_data ? se.user_data(se, search_target) : false;\n}\n\nfunction ptable_search(search) {\n    const form = search.closest(\"form\"),\n        ptconf = form.pa__ptconf;\n    ptconf.input_timeout = null;\n    if (hasClass(search, \"js-ptable-search-api\")) {\n        return ptable_search_api(search, ptconf);\n    }\n    let pexpr = new SearchParser(search.value).parse_expression();\n    if (pexpr && !pexpr.op && !pexpr.kword && !pexpr.text) {\n        pexpr = null;\n    }\n    tooltip.close_under(search);\n    search_ptconf = ptconf;\n    if (pexpr) {\n        const ml = [];\n        pexpr.prepare_simple(prepare_search, ml);\n        if (ml.length > 0) {\n            tooltip.enter(search, {content: feedback.render_list(ml), className: \"gray\"});\n        }\n    }\n    const changed = [];\n    ptconf.has_hidden = false;\n    for (const ss of ptconf.smap) {\n        if (!ss) {\n            continue;\n        }\n        search_target = ss;\n        const hidden = pexpr ? !pexpr.evaluate_simple(evaluate_search) : false;\n        if (ss.hidden !== hidden) {\n            changed.push(ss);\n            ss.hidden = hidden;\n        }\n        if (hidden) {\n            ptconf.has_hidden = true;\n        }\n    }\n    search_ptconf = null;\n    ptable_search_results(ptconf, form, changed);\n}\n\nfunction ptable_search_api(search, ptconf) {\n    $.ajax(hoturl(\"api/search\", {q: search.value, anonymous: ptconf.anonymous ? 1 : 0}), {\n        method: \"GET\", cache: false, dataType: \"json\",\n        success: function (data) {\n            if (!data.ok) {\n                return;\n            }\n            const changed = [];\n            ptconf.has_hidden = false;\n            for (const ss of ptconf.smap) {\n                if (!ss) {\n                    continue;\n                }\n                const hidden = !data.uids.includes(ss.uid);\n                if (ss.hidden !== hidden) {\n                    changed.push(ss);\n                    ss.hidden = hidden;\n                }\n                if (hidden) {\n                    ptconf.has_hidden = true;\n                }\n            }\n            ptable_search_results(ptconf, search.form, changed);\n        }\n    });\n}\n\nfunction ptable_search_results(ptconf, form, changed) {\n    if (!changed.length) {\n        return;\n    }\n    for (const tbody of form.querySelectorAll(\"table.user-gtable > tbody\")) {\n        const rowmap = ptconf.tbody_rowmap(tbody);\n        for (const ss of changed) {\n            const tr = rowmap.rows[ss._spos];\n            tr && (tr.hidden = ss.hidden);\n        }\n        ptable_recolor(tbody);\n        const cb = tbody.parentElement.tHead.querySelector(\".js-range-click\");\n        cb && handle_ui.trigger.call(cb, \"js-range-click\", \"updaterange\");\n    }\n    $(form).find(\".pa-grgraph\").trigger(\"redrawgraph\");\n}\n\nhandle_ui.on(\"js-ptable-search\", function (evt) {\n    let ptconf = this.closest(\"form\").pa__ptconf, timeout = 300;\n    if (evt.type === \"keydown\" && event_key(evt) === \"Enter\") {\n        evt.preventDefault();\n        timeout = 0;\n    }\n    ptconf.input_timeout && clearTimeout(ptconf.input_timeout);\n    ptconf.input_timeout = setTimeout(ptable_search, timeout, this);\n});\n\n\nhandle_ui.on(\"js-pset-gconfig\", function () {\n    let ptconf = this.closest(\"form\").pa__ptconf;\n    let $gdialog, form;\n\n    function change_state() {\n        const state = form.elements.state.value;\n        toggleClass(form.elements.frozen.parentElement, \"invisible\",\n                    state === \"disabled\" || state === \"hidden\");\n        toggleClass(form.elements.anonymous.parentElement, \"invisible\",\n                    state === \"disabled\");\n    }\n\n    function submit() {\n        $.ajax(hoturl(\"=api/psetconfig\", {pset: ptconf.key}), {\n            method: \"POST\",\n            data: $(form).serializeWith({}),\n            success: function () {\n                location.hash = \"#\" + ptconf.key;\n                location.reload();\n            }\n        });\n    }\n\n    function gdialog() {\n        $gdialog = $popup()\n            .append($e(\"h2\", \"pa-home-pset\", ptconf.title + \" Settings\"),\n                $e(\"div\", \"pa-messages\"),\n                $e(\"div\", \"d-grid-1 grid-gap-2\",\n                    $e(\"span\", \"select\", $e(\"select\", {name: \"state\"},\n                        $e(\"option\", {value: \"disabled\"}, \"Disabled\"),\n                        $e(\"option\", {value: \"hidden\"}, \"Hidden\"),\n                        $e(\"option\", {value: \"visible\"}, \"Visible without grades\"),\n                        $e(\"option\", {value: \"scores_visible\"}, \"Visible with grades\"))),\n                    $e(\"span\", \"select\", $e(\"select\", {name: \"frozen\"},\n                        $e(\"option\", {value: \"no\"}, \"Student updates allowed\"),\n                        $e(\"option\", {value: \"yes\"}, \"Submissions frozen\"))),\n                    $e(\"span\", \"select\", $e(\"select\", {name: \"anonymous\"},\n                        $e(\"option\", {value: \"no\"}, \"Open grading\"),\n                        $e(\"option\", {value: \"yes\"}, \"Anonymous grading\")))))\n            .append_actions($e(\"button\", {type: \"button\", name: \"bsubmit\", class: \"btn-primary\"}, \"Save\"), \"Cancel\");\n        form = $gdialog.form();\n\n        let v;\n        if (ptconf.disabled) {\n            v = \"disabled\";\n        } else if (!ptconf.visible) {\n            v = \"hidden\";\n        } else {\n            v = ptconf.scores_visible ? \"scores_visible\" : \"visible\";\n        }\n        form.elements.state.value = v;\n        form.elements.state.setAttribute(\"data-default-value\", v);\n        form.elements.state.addEventListener(\"change\", change_state);\n        change_state();\n\n        v = ptconf.frozen ? \"yes\" : \"no\";\n        form.elements.frozen.value = v;\n        form.elements.frozen.setAttribute(\"data-default-value\", v);\n\n        v = ptconf.anonymous ? \"yes\" : \"no\";\n        form.elements.anonymous.value = v;\n        form.elements.anonymous.setAttribute(\"data-default-value\", v);\n\n        $gdialog.find(\"button[name=bsubmit]\").on(\"click\", submit);\n        $gdialog.show();\n    }\n    gdialog();\n});\n","export default /[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/","export default /[\\0-\\x1F\\x7F-\\x9F]/","export default /[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/","export default /[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061D-\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1B7D\\u1B7E\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52-\\u2E5D\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDEAD\\uDF55-\\uDF59\\uDF86-\\uDF89]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5A\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDEB9\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDD44-\\uDD46\\uDDE2\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2\\uDF00-\\uDF09]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8\\uDF43-\\uDF4F\\uDFFF]|\\uD809[\\uDC70-\\uDC74]|\\uD80B[\\uDFF1\\uDFF2]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A\\uDFE2]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/","import reFactory from './lib/re.mjs'\n\n//\n// Helpers\n//\n\n// Merge objects\n//\nfunction assign (obj /* from1, from2, from3, ... */) {\n  const sources = Array.prototype.slice.call(arguments, 1)\n\n  sources.forEach(function (source) {\n    if (!source) { return }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key]\n    })\n  })\n\n  return obj\n}\n\nfunction _class (obj) { return Object.prototype.toString.call(obj) }\nfunction isString (obj) { return _class(obj) === '[object String]' }\nfunction isObject (obj) { return _class(obj) === '[object Object]' }\nfunction isRegExp (obj) { return _class(obj) === '[object RegExp]' }\nfunction isFunction (obj) { return _class(obj) === '[object Function]' }\n\nfunction escapeRE (str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&') }\n\n//\n\nconst defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n}\n\nfunction isOptionsObj (obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    /* eslint-disable-next-line no-prototype-builtins */\n    return acc || defaultOptions.hasOwnProperty(k)\n  }, false)\n}\n\nconst defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http = new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        )\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length\n      }\n      return 0\n    }\n  },\n  'https:': 'http:',\n  'ftp:': 'http:',\n  '//': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http = new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        )\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0 }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0 }\n        return tail.match(self.re.no_http)[0].length\n      }\n      return 0\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos)\n\n      if (!self.re.mailto) {\n        self.re.mailto = new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        )\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length\n      }\n      return 0\n    }\n  }\n}\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\n/* eslint-disable-next-line max-len */\nconst tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]'\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nconst tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|'.split('|')\n\nfunction resetScanCache (self) {\n  self.__index__ = -1\n  self.__text_cache__ = ''\n}\n\nfunction createValidator (re) {\n  return function (text, pos) {\n    const tail = text.slice(pos)\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length\n    }\n    return 0\n  }\n}\n\nfunction createNormalizer () {\n  return function (match, self) {\n    self.normalize(match)\n  }\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile (self) {\n  // Load & clone RE patterns.\n  const re = self.re = reFactory(self.__opts__)\n\n  // Define dynamic patterns\n  const tlds = self.__tlds__.slice()\n\n  self.onCompile()\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re)\n  }\n  tlds.push(re.src_xn)\n\n  re.src_tlds = tlds.join('|')\n\n  function untpl (tpl) { return tpl.replace('%TLDS%', re.src_tlds) }\n\n  re.email_fuzzy = RegExp(untpl(re.tpl_email_fuzzy), 'i')\n  re.link_fuzzy = RegExp(untpl(re.tpl_link_fuzzy), 'i')\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i')\n  re.host_fuzzy_test = RegExp(untpl(re.tpl_host_fuzzy_test), 'i')\n\n  //\n  // Compile each schema\n  //\n\n  const aliases = []\n\n  self.__compiled__ = {} // Reset compiled data\n\n  function schemaError (name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val)\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    const val = self.__schemas__[name]\n\n    // skip disabled methods\n    if (val === null) { return }\n\n    const compiled = { validate: null, link: null }\n\n    self.__compiled__[name] = compiled\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate)\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate\n      } else {\n        schemaError(name, val)\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer()\n      } else {\n        schemaError(name, val)\n      }\n\n      return\n    }\n\n    if (isString(val)) {\n      aliases.push(name)\n      return\n    }\n\n    schemaError(name, val)\n  })\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize\n  })\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() }\n\n  //\n  // Build schema condition\n  //\n  const slist = Object.keys(self.__compiled__)\n    .filter(function (name) {\n      // Filter disabled & fake schemas\n      return name.length > 0 && self.__compiled__[name]\n    })\n    .map(escapeRE)\n    .join('|')\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i')\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig')\n  self.re.schema_at_start = RegExp('^' + self.re.schema_search.source, 'i')\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  )\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self)\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match (self, shift) {\n  const start = self.__index__\n  const end = self.__last_index__\n  const text = self.__text_cache__.slice(start, end)\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema = self.__schema__.toLowerCase()\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index = start + shift\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw = text\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text = text\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url = text\n}\n\nfunction createMatch (self, shift) {\n  const match = new Match(self, shift)\n\n  self.__compiled__[match.schema].normalize(match, self)\n\n  return match\n}\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt (schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options)\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas\n      schemas = {}\n    }\n  }\n\n  this.__opts__ = assign({}, defaultOptions, options)\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__ = -1\n  this.__last_index__ = -1 // Next scan position\n  this.__schema__ = ''\n  this.__text_cache__ = ''\n\n  this.__schemas__ = assign({}, defaultSchemas, schemas)\n  this.__compiled__ = {}\n\n  this.__tlds__ = tlds_default\n  this.__tlds_replaced__ = false\n\n  this.re = {}\n\n  compile(this)\n}\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add (schema, definition) {\n  this.__schemas__[schema] = definition\n  compile(this)\n  return this\n}\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set (options) {\n  this.__opts__ = assign(this.__opts__, options)\n  return this\n}\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test (text) {\n  // Reset scan cache\n  this.__text_cache__ = text\n  this.__index__ = -1\n\n  if (!text.length) { return false }\n\n  let m, ml, me, len, shift, next, re, tld_pos, at_pos\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search\n    re.lastIndex = 0\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex)\n      if (len) {\n        this.__schema__ = m[2]\n        this.__index__ = m.index + m[1].length\n        this.__last_index__ = m.index + m[0].length + len\n        break\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test)\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n          shift = ml.index + ml[1].length\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__ = ''\n            this.__index__ = shift\n            this.__last_index__ = ml.index + ml[0].length\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@')\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n        shift = me.index + me[1].length\n        next = me.index + me[0].length\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__ = 'mailto:'\n          this.__index__ = shift\n          this.__last_index__ = next\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0\n}\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest (text) {\n  return this.re.pretest.test(text)\n}\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt (text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this)\n}\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match (text) {\n  const result = []\n  let shift = 0\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift))\n    shift = this.__last_index__\n  }\n\n  // Cut head if cache was used\n  let tail = shift ? text.slice(shift) : text\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift))\n\n    tail = tail.slice(this.__last_index__)\n    shift += this.__last_index__\n  }\n\n  if (result.length) {\n    return result\n  }\n\n  return null\n}\n\n/**\n * LinkifyIt#matchAtStart(text) -> Match|null\n *\n * Returns fully-formed (not fuzzy) link if it starts at the beginning\n * of the string, and null otherwise.\n **/\nLinkifyIt.prototype.matchAtStart = function matchAtStart (text) {\n  // Reset scan cache\n  this.__text_cache__ = text\n  this.__index__ = -1\n\n  if (!text.length) return null\n\n  const m = this.re.schema_at_start.exec(text)\n  if (!m) return null\n\n  const len = this.testSchemaAt(text, m[2], m[0].length)\n  if (!len) return null\n\n  this.__schema__ = m[2]\n  this.__index__ = m.index + m[1].length\n  this.__last_index__ = m.index + m[0].length + len\n\n  return createMatch(this, 0)\n}\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds (list, keepOld) {\n  list = Array.isArray(list) ? list : [list]\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice()\n    this.__tlds_replaced__ = true\n    compile(this)\n    return this\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n    .sort()\n    .filter(function (el, idx, arr) {\n      return el !== arr[idx - 1]\n    })\n    .reverse()\n\n  compile(this)\n  return this\n}\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize (match) {\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url\n  }\n}\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile () {\n}\n\nexport default LinkifyIt\n","import { Any, Cc, Z, P } from 'uc.micro'\n\nexport default function (opts) {\n  const re = {}\n  opts = opts || {}\n\n  re.src_Any = Any.source\n  re.src_Cc = Cc.source\n  re.src_Z = Z.source\n  re.src_P = P.source\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [re.src_Z, re.src_P, re.src_Cc].join('|')\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [re.src_Z, re.src_Cc].join('|')\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  const text_separators = '[><\\uff5c]'\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')'\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)'\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?'\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?'\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')' +\n    '(?!' + (opts['---'] ? '-(?!--)|' : '-|') + '_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))'\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-;]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n\n          // allow `I'm_king` if no pair found\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-])|' +\n\n          // google has many dots in \"google search\" links (#66, #81).\n          // github has ... in commit range links,\n          // Restrict to\n          // - english\n          // - percent-encoded\n          // - parts of file path\n          // - params separator\n          // until more examples found.\n          '\\\\.{2,}[a-zA-Z0-9%/&]|' +\n\n          '\\\\.(?!' + re.src_ZCc + '|[.]|$)|' +\n          (opts['---']\n            ? '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            : '\\\\-+|'\n          ) +\n          // allow `,,,` in paths\n          ',(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `;` if not followed by space-like char\n          ';(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `!!!` in paths, but not at the end\n          '\\\\!+(?!' + re.src_ZCc + '|[!]|$)|' +\n\n          '\\\\?(?!' + re.src_ZCc + '|[?]|$)' +\n        ')+' +\n      '|\\\\/' +\n    ')?'\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*'\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}'\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')'\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')'\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/* _root */ + ')' +\n    ')'\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')'\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))'\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator\n\n  //\n  // Main rules\n  //\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))'\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')'\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')'\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')'\n\n  return re\n}\n","// main.js -- Peteramati JavaScript library\n// Peteramati is Copyright (c) 2006-2024 Eddie Kohler\n// See LICENSE for open-source distribution terms\n\nimport { sprintf, strftime, text_eq, string_utf8_index } from \"./utils.js\";\nimport {\n    hasClass, addClass, removeClass, toggleClass, classList,\n    handle_ui, $e, input_is_checkboxlike\n    } from \"./ui.js\";\nimport { event_key } from \"./ui-key.js\";\nimport \"./ui-autogrow.js\";\nimport \"./ui-range.js\";\nimport \"./ui-sessionlist.js\";\nimport { hoturl } from \"./hoturl.js\";\nimport { api_conditioner } from \"./xhr.js\";\nimport { tooltip } from \"./tooltip.js\";\nimport \"./pset.js\";\nimport { Filediff } from \"./diff.js\";\nimport \"./diff-markdown.js\";\nimport { Note } from \"./note.js\";\nimport \"./note-edit.js\";\nimport { render_text, feedback } from \"./render.js\";\nimport \"./render-terminal.js\";\nimport { run } from \"./run.js\";\nimport { run_settings_load } from \"./run-settings.js\";\nimport { grgraph } from \"./grgraph-ui.js\";\nimport \"./grgraph-highlight.js\";\nimport { GradeEntry, GradeSheet } from \"./gradeentry.js\";\nimport \"./gc-checkbox.js\";\nimport \"./gc-letter.js\";\nimport \"./gc-multicheckbox.js\";\nimport \"./gc-select.js\";\nimport \"./gc-markdown.js\";\nimport \"./gc-timermark.js\";\nimport \"./gc-text.js\";\nimport \"./ptable-grades.js\";\nimport \"./ptable-diff.js\";\nimport \"./ptable-run.js\";\nimport \"./cluster-diff.js\";\nimport { resolve_pinnable } from \"./pinnable.js\";\nimport { pa_pset_table } from \"./ptable.js\";\nimport { SearchParser, SearchExpr } from \"./search.js\";\nimport LinkifyIt from \"linkify-it\";\nwindow.markdownit.linkify = LinkifyIt();\nwindow.markdownit.linkify.set({fuzzyEmail: false, \"---\": true});\n\nfunction $$(id) {\n    return document.getElementById(id);\n}\n\n// geometry\n$.fn.extend({\n    geometry: function (outer) {\n        var g, d;\n        if (this[0] == window) {\n            g = {left: this.scrollLeft(), top: this.scrollTop()};\n        } else if (this.length == 1 && this[0].getBoundingClientRect) {\n            g = $.extend({}, this[0].getBoundingClientRect());\n            if ((d = window.pageXOffset))\n                g.left += d, g.right += d;\n            if ((d = window.pageYOffset))\n                g.top += d, g.bottom += d;\n            if (!(\"width\" in g)) {\n                g.width = g.right - g.left;\n                g.height = g.bottom - g.top;\n            }\n            return g;\n        } else {\n            g = this.offset();\n        }\n        if (g) {\n            g.width = outer ? this.outerWidth() : this.width();\n            g.height = outer ? this.outerHeight() : this.height();\n            g.right = g.left + g.width;\n            g.bottom = g.top + g.height;\n        }\n        return g;\n    },\n    scrollIntoView: function (opts) {\n        opts = opts || {};\n        for (let i = 0; i !== this.length; ++i) {\n            let p = $(this[i]).geometry(), x = this[i].parentNode;\n            while (x && x.tagName && $(x).css(\"overflow-y\") === \"visible\") {\n                x = x.parentNode;\n            }\n            x = x && x.tagName ? x : window;\n            let w = $(x).geometry();\n            if (p.top < w.top + (opts.marginTop || 0) || opts.atTop) {\n                let pos = Math.max(p.top - (opts.marginTop || 0), 0);\n                if (x === window) {\n                    x.scrollTo(x.scrollX, pos);\n                } else {\n                    x.scrollTop = pos;\n                }\n            } else if (p.bottom > w.bottom - (opts.marginBottom || 0)) {\n                let pos = Math.max(p.bottom + (opts.marginBottom || 0) - w.height, 0);\n                if (x === window) {\n                    x.scrollTo(x.scrollX, pos);\n                } else {\n                    x.scrollTop = pos;\n                }\n            }\n        }\n        return this;\n    },\n    serializeWith: function(data) {\n        var s = this.serialize();\n        if (s != null && data) {\n            let sep = s.length && s[s.length - 1] != \"&\" ? \"&\" : \"\";\n            for (let i in data) {\n                if (data[i] != null) {\n                    s += sep + encodeURIComponent(i) + \"=\" + encodeURIComponent(data[i]);\n                    sep = \"&\";\n                }\n            }\n        }\n        return s;\n    }\n});\n\n\n// initialization\nvar set_local_time = (function () {\nvar servhr24, showdifference = false;\nfunction set_local_time(elt, servtime) {\n    var d, s;\n    if (elt && typeof elt == \"string\")\n        elt = $$(elt);\n    if (elt && showdifference) {\n        d = new Date(servtime * 1000);\n        if (servhr24)\n            s = strftime(\"%A %#e %b %Y %#R your time\", d);\n        else\n            s = strftime(\"%A %#e %b %Y %#r your time\", d);\n        if (elt.tagName == \"SPAN\") {\n            elt.textContent = \" (\" + s + \")\";\n            elt.style.display = \"inline\";\n        } else {\n            elt.textContent = s;\n            elt.style.display = \"block\";\n        }\n    }\n}\nset_local_time.initialize = function (servzone, hr24) {\n    servhr24 = hr24;\n    // print local time if server time is in a different time zone\n    showdifference = Math.abs((new Date).getTimezoneOffset() - servzone) >= 60;\n};\nreturn set_local_time;\n})();\n\n\nvar hotcrp_onload = [];\nfunction hotcrp_load(arg) {\n    if (!arg)\n        for (var x = 0; x < hotcrp_onload.length; ++x)\n            hotcrp_onload[x]();\n    else if (typeof arg === \"string\")\n        hotcrp_onload.push(hotcrp_load[arg]);\n    else\n        hotcrp_onload.push(arg);\n}\nhotcrp_load.time = function (servzone, hr24) {\n    set_local_time.initialize(servzone, hr24);\n};\n\n\nvar foldmap = {}, foldsession_unique = 1;\nfunction fold(which, dofold, foldtype) {\n    var i, elt, selt, opentxt, closetxt, foldnum, foldnumid;\n    if (which instanceof Array) {\n        for (i = 0; i < which.length; i++)\n            fold(which[i], dofold, foldtype);\n\n    } else if (typeof which == \"string\") {\n        foldnum = foldtype;\n        if (foldmap[which] != null && foldmap[which][foldtype] != null)\n            foldnum = foldmap[which][foldtype];\n        foldnumid = foldnum ? foldnum : \"\";\n\n        elt = $$(\"fold\" + which) || $$(which);\n        fold(elt, dofold, foldnum);\n\n        // check for session\n        if ((selt = $$('foldsession.' + which + foldnumid)))\n            selt.src = selt.src.replace(/val=.*/, 'val=' + (dofold ? 1 : 0) + '&u=' + foldsession_unique++);\n        else if ((selt = $$('foldsession.' + which)))\n            selt.src = selt.src.replace(/val=.*/, 'val=' + (dofold ? 1 : 0) + '&sub=' + (foldtype || foldnumid) + '&u=' + foldsession_unique++);\n\n        // check for focus\n        if (!dofold && (selt = $$(\"fold\" + which + foldnumid + \"_d\"))) {\n            if (selt.setSelectionRange && selt.hotcrp_ever_focused == null) {\n                selt.setSelectionRange(selt.value.length, selt.value.length);\n                selt.hotcrp_ever_focused = true;\n            }\n            selt.focus();\n        }\n\n    } else if (which) {\n        foldnumid = foldtype ? foldtype : \"\";\n        opentxt = \"fold\" + foldnumid + \"o\";\n        closetxt = \"fold\" + foldnumid + \"c\";\n        if (dofold == null && which.className.indexOf(opentxt) >= 0)\n            dofold = true;\n        if (dofold)\n            which.className = which.className.replace(opentxt, closetxt);\n        else\n            which.className = which.className.replace(closetxt, opentxt);\n        // IE won't actually do the fold unless we yell at it\n        if (document.recalc)\n            try {\n                which.innerHTML = which.innerHTML + \"\";\n            } catch {\n            }\n    }\n\n    return false;\n}\n\nfunction foldup(evt, opts) {\n    let e = this, wantopen, m;\n    if (typeof opts === \"number\") {\n        opts = {n: opts};\n    } else if (!opts) {\n        opts = {};\n    }\n    if (this.tagName === \"DIV\"\n        && evt\n        && evt.target.closest(\"a\")\n        && !opts.required) {\n        return;\n    }\n    if (!(\"n\" in opts)\n        && e.hasAttribute(\"data-fold-target\")\n        && (m = e.getAttribute(\"data-fold-target\").match(/^((?![#\\d]|[couU]$)[^#]*)#?(\\d*)([couU]?)$/))) {\n        if (m[1] !== \"\") {\n            e = document.getElementById(m[1]);\n        }\n        opts.n = parseInt(m[2]) || 0;\n        if (!(\"open\" in opts) && m[3] !== \"\") {\n            if (this.tagName === \"INPUT\"\n                && input_is_checkboxlike(this)\n                && (this.checked ? m[3] === \"u\" : m[3] === \"U\")) {\n                m[3] = \"c\";\n            }\n            opts.open = m[3] !== \"c\";\n        }\n    }\n    var foldname = \"fold\" + (opts.n || \"\");\n    while (e && ((!hasClass(e, \"has-fold\") && (!e.id || !e.id.startsWith(\"fold\")))\n                 || (opts.n != null && !hasClass(e, foldname + \"c\") && !hasClass(e, foldname + \"o\")))) {\n        e = e.parentNode;\n    }\n    if (!e) {\n        return true;\n    }\n    if (opts.n == null) {\n        for (const cl of classList(e)) {\n            if (cl.startsWith(\"fold\")\n                && (m = cl.match(/^fold(\\d*)[oc]$/))\n                && (opts.n == null || +m[1] < opts.n)) {\n                opts.n = +m[1];\n                foldname = \"fold\" + (opts.n || \"\");\n            }\n        }\n    }\n    if (!(\"open\" in opts)\n        && (this.tagName === \"INPUT\" || this.tagName === \"SELECT\" || this.tagName === \"TEXTAREA\")) {\n        let value = null;\n        if (this.type === \"checkbox\") {\n            opts.open = this.checked;\n        } else if (this.type === \"radio\") {\n            if (!this.checked)\n                return true;\n            value = this.value;\n        } else if (this.type === \"select-one\") {\n            value = this.selectedIndex < 0 ? \"\" : this.options[this.selectedIndex].value;\n        } else if (this.type === \"text\" || this.type === \"textarea\") {\n            opts.open = this.value !== \"\";\n        }\n        if (value !== null) {\n            const vstr = e.getAttribute(\"data-\" + foldname + \"-values\") || \"\",\n                values = $.trim(vstr) === \"\" ? [] : vstr.split(/\\s+/);\n            opts.open = values.indexOf(value) >= 0;\n        }\n    }\n    wantopen = hasClass(e, foldname + \"c\");\n    if (!(\"open\" in opts) || !!opts.open === wantopen) {\n        opts.open = wantopen;\n        fold(e, !wantopen, opts.n || 0);\n        $(e).trigger($.Event(\"foldtoggle\", {which: opts}));\n    }\n    if (this.hasAttribute(\"aria-expanded\")) {\n        this.setAttribute(\"aria-expanded\", wantopen ? \"true\" : \"false\");\n    }\n    if (evt\n        && typeof evt === \"object\"\n        && evt.type === \"click\"\n        && !hasClass(evt.target, \"uic\")) {\n        handle_ui.stopPropagation(evt);\n        evt.preventDefault(); // needed for expanders despite handle_ui!\n    }\n}\n\nhandle_ui.on(\"js-foldup\", foldup);\n\nhandle_ui.on(\"js-hide-error\", function () {\n    addClass(this, \"hidden\");\n});\n\nhandle_ui.on(\"js-pset-upload-grades\", function () {\n    $(\"#upload\").removeClass(\"hidden\");\n});\n\nhandle_ui.on(\"pa-signin-radio\", function () {\n    let v;\n    if (this.value === \"login\") {\n        fold(\"logingroup\", false);\n        fold(\"logingroup\", false, 2);\n        v = \"Sign in\";\n    } else if (this.value === \"forgot\") {\n        fold(\"logingroup\", true);\n        fold(\"logingroup\", false, 2);\n        v = \"Reset password\";\n    } else if (this.value === \"new\") {\n        fold(\"logingroup\", true);\n        fold(\"logingroup\", true, 2);\n        v = \"Create account\";\n    }\n    document.getElementById(\"signin\").value = v;\n});\n\n\n// SAVE FLOW\n// * Every form containing unsaved grades has `.pa-dirty`\n// * Every psetinfo containing unsaved grades is included in `gv_dirtypi`\n//\n// When a grade entry changes:\n// * Mark the form with `.pa-dirty`, add the psetinfo to `gv_dirtypi`\n// * Soon, call `api_conditioner.then(gv_save_some)`\n// * That dequeues a psetinfo.\n//   * If psetinfo has `.pa-outstanding`, requeue it.\n//   * Otherwise:\n//     * Mark psetinfo as `.pa-outstanding`\n//     * Collect all changed grades, removing `.pa-dirty`\n//     * Save the grades\n//     * On response, remove `.pa-outstanding`\n\nlet gv_dirtypi = [], gv_save_queued = false;\n\nhandle_ui.on(\"input.pa-gradevalue\", function () {\n    const f = this.form;\n    if (f && hasClass(f, \"pa-pv\") && !hasClass(f, \"pa-dirty\")) {\n        gv_save_after(f, 8000);\n    }\n});\n\nhandle_ui.on(\"change.pa-gradevalue\", function () {\n    const f = this.form;\n    let ge;\n    if (f && hasClass(f, \"pa-pv\")) {\n        gv_save_after(f, 0);\n    } else if (this.type === \"hidden\" && (ge = GradeEntry.closest(this))) {\n        queueMicrotask(() => { ge.gc.update_edit.call(ge, this, +this.value, {}); });\n    }\n});\n\nhandle_ui.on(\"click.pa-gradevalue\", function () {\n    if (this.type === \"checkbox\" || this.type === \"radio\") {\n        queueMicrotask(() => { $(this).trigger(\"change\"); });\n    }\n});\n\nhandle_ui.on(\"pa-pv\", function (event) {\n    event.preventDefault();\n    gv_save_after(this, 0);\n});\n\nfunction gv_save_after(f, t) {\n    if (t > 0 && !hasClass(f, \"pa-dirty\")) {\n        setTimeout(gv_mark_changed, t);\n    }\n    addClass(f, \"pa-dirty\");\n    const pi = f.closest(\".pa-psetinfo\");\n    if (gv_dirtypi.indexOf(pi) < 0) {\n        gv_dirtypi.push(pi);\n    }\n    if (t === 0) {\n        gv_add_spinner(f);\n        gv_mark_changed();\n    }\n}\n\nfunction gv_add_spinner(f) {\n    let sm = f.querySelector(\".pa-save-message\");\n    sm || f.appendChild((sm = $e(\"span\", \"pa-save-message compact\")));\n    sm.className = \"pa-save-message compact\";\n    sm.replaceChildren($e(\"span\", \"spinner\"));\n}\n\nfunction gv_mark_changed() {\n    if (gv_dirtypi.length > 0 && !gv_save_queued) {\n        gv_save_queued = true;\n        api_conditioner.then(gv_save_some);\n    }\n}\n\nfunction gv_save_some() {\n    gv_save_queued = false;\n    const pi = gv_dirtypi[0];\n    if (!pi) {\n        api_conditioner.done();\n        return;\n    } else if (hasClass(pi, \"pa-outstanding\")) {\n        api_conditioner.retry(gv_save_some);\n        return;\n    }\n    gv_dirtypi.shift();\n\n    const g = {}, og = {}, gi = GradeSheet.closest(pi), fs = [];\n    $(pi).find(\".pa-dirty .pa-gradevalue\").each(function () {\n        if (this.tagName !== \"INPUT\" && this.tagName !== \"TEXTAREA\" && this.tagName !== \"SELECT\") {\n            return;\n        }\n        const ge = gi.xentry(this.name),\n            ov = ge ? ge.value_in(gi) : null;\n        let nv;\n        if ((this.type !== \"checkbox\" && this.type !== \"radio\")\n            || this.checked) {\n            nv = this.value;\n        } else if (this.type === \"checkbox\") {\n            nv = 0;\n        }\n        if (nv != null && (ov == null || nv != ov)) {\n            og[this.name] = ov;\n            g[this.name] = nv;\n            if (fs.indexOf(this.form) < 0) {\n                fs.push(this.form);\n            }\n        }\n    });\n\n    $(pi).find(\".pa-dirty .pa-save-message.compact\").remove();\n    $(pi).find(\".pa-dirty\").removeClass(\"pa-dirty\");\n\n    if (fs.length === 0) {\n        api_conditioner.done();\n    } else {\n        addClass(pi, \"pa-outstanding\");\n        for (const f of fs) {\n            gv_add_spinner(f);\n        }\n        $.ajax(hoturl(\"=api/grade\", {psetinfo: pi}), {\n            data: {grades: g, oldgrades: og},\n            method: \"POST\", cache: false, dataType: \"json\",\n            success: function (data) {\n                for (const f of fs) {\n                    gv_resolve_change(f, data);\n                }\n                removeClass(pi, \"pa-outstanding\");\n                data.ok && GradeSheet.store(pi, data);\n                api_conditioner.done();\n            }\n        });\n    }\n\n    gv_mark_changed();\n}\n\nfunction gv_resolve_change(f, data) {\n    const sm = f.querySelector(\".pa-save-message\");\n    let ge;\n    if (data.ok) {\n        if (data.answer_timeout\n            && (ge = f.closest(\".pa-grade\"))\n            && hasClass(ge, \"pa-ans\")) {\n            removeClass(sm, \"compact\");\n            sm.replaceChildren($e(\"strong\", \"err\", \"Your exam period has closed.\"), \" Your change was saved anyway, but the version used for grading will be selected from within the exam window.\");\n        } else if (hasClass(f, \"pa-dirty\")) {\n            sm.remove();\n        } else {\n            addClass(sm, \"compact\");\n            addClass(sm, \"fadeout\");\n            sm.replaceChildren($e(\"span\", \"savesuccess\"));\n        }\n    } else {\n        removeClass(sm, \"compact\"),\n        sm.replaceChildren(feedback.render_xhr_error_onto($e(\"strong\", \"err\"), data));\n    }\n}\n\n\nfunction pa_resolve_grade() {\n    removeClass(this, \"need-pa-grade\");\n    const ge = GradeEntry.closest(this),\n        gi = GradeSheet.closest(this);\n    if (ge && gi) {\n        const e = ge.render(gi);\n        this.parentElement.replaceChild(this, e);\n        gi.update_at(e);\n        if (ge.landmark_range && this.closest(\".pa-gradebox\")) {\n            // XXX maybe calling compute_landmark_range_grade too often\n            ge.landmark_grade(this.firstChild);\n        }\n        if (this.hasAttribute(\"data-pa-landmark-buttons\")) {\n            const lb = JSON.parse(this.getAttribute(\"data-pa-landmark-buttons\"));\n            for (const lbb of lb) {\n                if (typeof lbb === \"string\") {\n                    $(e).find(\".pa-pv\").append(lbb);\n                } else if (lbb.className) {\n                    $(e).find(\".pa-pv\").append($e(\"button\", {type: \"button\", \"class\": \"uic uikd pa-grade-button\", \"data-pa-grade-button\": lbb.className}, lbb.title));\n                }\n            }\n        }\n    }\n}\n\nhandle_ui.on(\"pa-grade-button\", function (event) {\n    if (event.type === \"keydown\") {\n        var k = event_key(event), gr;\n        if (event.ctrlKey\n            && (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\" || k === \"A\")\n            && (gr = this.closest(\".pa-grade\"))) {\n            var gradekey = gr.getAttribute(\"data-pa-grade\"),\n                buttons = $(\".pa-grade[data-pa-grade=\" + gradekey + \"] .pa-grade-button[data-pa-grade-button=\" + this.getAttribute(\"data-pa-grade-button\") + \"]\").filter(\":visible\"),\n                i = buttons.toArray().indexOf(this);\n            if (i >= 0) {\n                if (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\") {\n                    var delta = k === \"n\" || k === \"N\" ? 1 : buttons.length - 1,\n                        button = buttons[(i + delta) % buttons.length],\n                        dg = button.closest(\".pa-dg\");\n                    dg && $(dg).scrollIntoView({marginTop: 24, atTop: true});\n                    button.focus();\n                    $(button).scrollIntoView();\n                } else {\n                    buttons.click();\n                }\n                event.preventDefault();\n            }\n        }\n    } else if (event.type === \"click\") {\n        handle_ui.trigger.call(this, this.getAttribute(\"data-pa-grade-button\"), event);\n    }\n});\n\nfunction button_position_delta(button) {\n    return button.getBoundingClientRect().top - window.scrollY;\n}\n\nfunction button_reposition_delta(button, delta) {\n    queueMicrotask(() => {\n        const y = button.getBoundingClientRect().top - delta;\n        window.scrollBy(0, y - window.scrollY);\n    })\n}\n\nhandle_ui.on(\"pa-grade-toggle-description\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        show = hasClass(me, \"pa-hide-description\"),\n        tep = button_position_delta(this);\n    tooltip.close();\n    $es.each(function () {\n        toggleClass(this, \"pa-hide-description\", !show);\n        $(this).find(\".pa-grade-toggle-description > span\").toggleClass(\"filter-gray\", !show);\n    });\n    button_reposition_delta(this, tep);\n});\n\nhandle_ui.on(\"pa-grade-toggle-markdown\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        show = hasClass(this.firstChild, \"filter-gray\"),\n        tep = button_position_delta(this);\n    tooltip.close();\n    $es.each(function () {\n        const gi = GradeSheet.closest(this);\n        $(this).find(\".pa-grade\").each(function () {\n            const ge = gi.entries[this.getAttribute(\"data-pa-grade\")];\n            if (ge.type === \"markdown\"\n                && hasClass(this, \"pa-markdown\") !== show) {\n                toggleClass(this, \"pa-markdown\", show);\n                if (!hasClass(this, \"e\")) {\n                    gi.remount_at(this, 0);\n                    gi.update_at(this);\n                }\n            }\n        });\n        $(this).find(\".pa-grade-toggle-markdown > span\").toggleClass(\"filter-gray\", !show);\n    });\n    button_reposition_delta(this, tep);\n});\n\nhandle_ui.on(\"pa-grade-toggle-answer\", function (event) {\n    const me = this.closest(\".pa-gsection\"),\n        $es = event.metaKey ? $(\".pa-gsection\") : $(me),\n        mode = hasClass(this.firstChild, \"filter-gray\") ? 2 : 0,\n        tep = button_position_delta(this);\n    tooltip.close();\n    $es.each(function () {\n        const gi = GradeSheet.closest(this);\n        $(this).find(\".pa-grade\").each(function () {\n            const ge = gi.entries[this.getAttribute(\"data-pa-grade\")];\n            if (ge.answer) {\n                gi.remount_at(this, mode);\n                gi.update_at(this, {reset: true});\n            }\n        });\n        $(this).find(\".pa-grade-toggle-answer > span\").toggleClass(\"filter-gray\", mode === 0);\n        $(this).find(\".pa-grade-toggle-markdown\").toggleClass(\"hidden\", mode !== 0);\n    });\n    button_reposition_delta(this, tep);\n});\n\nfunction gradelist_elementmap(glelt) {\n    const geltmap = {};\n    let ch = glelt.firstChild;\n    while (ch) {\n        if (hasClass(ch, \"pa-grade\")) {\n            geltmap[ch.getAttribute(\"data-pa-grade\")] = ch;\n        }\n        if (hasClass(ch, \"pa-dg\")) {\n            ch = ch.firstChild;\n        } else {\n            while (!ch.nextSibling && hasClass(ch.parentElement, \"pa-dg\")) {\n                ch = ch.parentElement;\n            }\n            ch = ch.nextSibling;\n        }\n    }\n    return geltmap;\n}\n\nfunction gradelist_make_sections(glelt, gi) {\n    const section_class = \"pa-dg pa-gsection\".concat(\n        gi.scores_editable ? \" pa-hide-description\" : \"\",\n        hasClass(glelt, \"is-main\") ? \" is-main\" : \"\"),\n        new_sections = [];\n    let ch = glelt.firstChild, section = null;\n    for (const k of gi.value_order) {\n        const ge = gi.entries[k];\n        if ((ge.concealed && !gi.scores_editable)\n            || (section !== null && ge.type !== \"section\")) {\n            continue;\n        }\n        while (ch && !hasClass(ch, \"pa-dg\") && !hasClass(ch, \"pa-grade\")) {\n            ch = ch.nextSibling;\n        }\n        if (!ch\n            || !hasClass(ch, \"pa-gsection\")\n            || ch.getAttribute(\"data-pa-grade\") !== k) {\n            const div = document.createElement(\"div\");\n            div.className = section_class;\n            div.setAttribute(\"data-pa-grade\", k);\n            glelt.insertBefore(div, ch);\n            ch = div;\n            new_sections.push(ch);\n        }\n        if (gi.section_wants_sidebar(ge)\n            && !hasClass(ch, \"pa-with-sidebar\")) {\n            addClass(ch, \"pa-with-sidebar\");\n            const sb = document.createElement(\"div\");\n            sb.className = \"pa-sidebar\";\n            const sdiv = document.createElement(\"div\");\n            sdiv.className = \"pa-dg is-mainsb\";\n            ch.append(sb, sdiv);\n        }\n        section = ch;\n        ch = ch.nextSibling;\n    }\n    return new_sections;\n}\n\nfunction gradelist_section_button(klass, label) {\n    const button = document.createElement(\"button\");\n    button.className = \"btn-t ui small need-tooltip \" + klass;\n    button.setAttribute(\"aria-label\", label);\n    button.append(document.createElement(\"span\"));\n    button.firstChild.className = \"filter-gray\";\n    button.tabIndex = -1;\n    return button;\n}\n\nfunction gradelist_resolve_section(gi, sectione) {\n    const ge = gi.entries[sectione.getAttribute(\"data-pa-grade\")];\n\n    // mark user prefix\n    let prefix = null;\n    if (gi.user && hasClass(document.body, \"pa-multiuser\")) {\n        prefix = document.createElement(\"span\");\n        prefix.className = \"pa-fileref-context\";\n        prefix.textContent = gi.user + \" / \";\n    }\n\n    // mark buttons\n    const buttons = [];\n    if (gi.scores_editable && gi.section_has(ge, xge => xge.description)) {\n        const e = gradelist_section_button(\"pa-grade-toggle-description\", \"Toggle description\");\n        toggleClass(e.firstChild, \"filter-gray\", hasClass(sectione, \"pa-hide-description\"));\n        e.firstChild.textContent = \"\";\n        buttons.push(e);\n    }\n    if (gi.scores_editable && gi.section_has(ge, xge => xge.answer && xge.type !== \"section\")) {\n        const e = gradelist_section_button(\"pa-grade-toggle-answer\", \"Toggle answer editing\");\n        e.firstChild.textContent = \"\";\n        buttons.push(e);\n    }\n    if (!gi.answers_editable && gi.section_has(ge, xge => xge.type === \"markdown\")) {\n        const e = gradelist_section_button(\"pa-grade-toggle-markdown\", \"Toggle Markdown\");\n        e.firstChild.className = \"icon-markdown filter-gray\";\n        buttons.push(e);\n    }\n\n    // find grade parent\n    let parente = sectione;\n    while (!parente.firstChild || !hasClass(parente.firstChild, \"pa-p\")) {\n        parente = hasClass(parente, \"pa-dg\") ? parente.firstChild : parente.nextSibling;\n    }\n\n    // add section header if required\n    let headere = parente.firstChild;\n    if (!hasClass(headere, \"pa-p-section\")) {\n        if (!prefix && !buttons.length) {\n            return;\n        }\n        headere = document.createElement(\"div\");\n        headere.className = \"pa-p pa-p-section\";\n        const e = document.createElement(\"label\");\n        e.className = \"pa-pt\";\n        e.textContent = \"\";\n        headere.appendChild(e);\n        parente.insertBefore(headere, parente.firstChild);\n    }\n\n    // decorate section header\n    if (prefix) {\n        headere.firstChild.insertBefore(prefix, headere.firstChild.firstChild);\n    }\n    if (buttons.length) {\n        const e = document.createElement(\"div\");\n        e.className = \"btnbox ml-3\";\n        e.append(...buttons);\n        headere.firstChild.append(e);\n    }\n\n    // set stickiness and move description out of sticky region\n    addClass(parente, \"pa-with-sticky\");\n    addClass(headere, \"pa-sticky\");\n    const desce = headere.firstChild.nextSibling;\n    if (desce && hasClass(desce, \"pa-pdesc\")) {\n        addClass(desce, \"pa-ptop\");\n        hasClass(headere, \"pa-p-hidden\") && addClass(desce, \"pa-p-hidden\");\n        parente.insertBefore(desce, headere.nextSibling);\n    }\n}\n\nfunction gradelist_finish_sidebar(sidebar, sidebarch) {\n    while (sidebarch) {\n        const next = sidebarch.nextSibling;\n        sidebarch.remove();\n        sidebarch = next;\n    }\n    while (!sidebar.firstChild) {\n        const next = sidebar.parentElement;\n        sidebar.remove();\n        sidebar = next;\n    }\n}\n\nfunction pa_resolve_gradelist() {\n    removeClass(this, \"need-pa-gradelist\");\n    addClass(this, \"pa-gradelist\");\n    const pi = this.closest(\".pa-psetinfo\"),\n        gi = GradeSheet.closest(pi);\n    if (!gi) {\n        return;\n    }\n\n    // obtain list of grade entries\n    const geltmap = gradelist_elementmap(this);\n\n    // set up sections\n    const sectioned = gi.has(xge => xge.description ||\n            xge.answer ||\n            xge.type === \"section\" ||\n            (xge.type === \"markdown\" && gi.answers_editable === false)),\n        new_sections = sectioned ? gradelist_make_sections(this, gi) : [];\n\n    // fill out list of grades\n    let chp = this, ch = chp.firstChild,\n        sidebar = null, sidebarch = null;\n    for (let i = 0; i !== gi.value_order.length; ++i) {\n        const k = gi.value_order[i], ge = gi.entries[k];\n        if (!gi.scores_editable && ge.concealed) {\n            continue;\n        }\n\n        // exit current section if required\n        if (sectioned && chp !== this && ge.type === \"section\") {\n            while (chp !== this) {\n                ch = chp.nextSibling;\n                chp = chp.parentElement;\n            }\n            if (sidebar) {\n                gradelist_finish_sidebar(sidebar, sidebarch);\n                sidebar = sidebarch = null;\n            }\n        }\n\n        // move into group\n        while (ch && !hasClass(ch, \"pa-grade\")) {\n            if (hasClass(ch, \"pa-dg\")) {\n                chp = ch;\n                ch = ch.firstChild;\n            } else {\n                if (hasClass(ch, \"pa-sidebar\")) {\n                    sidebar = ch;\n                }\n                ch = ch.nextSibling;\n            }\n        }\n\n        // add grade\n        let gelt = geltmap[k];\n        if (!gelt || gelt !== ch) {\n            if (gelt) {\n                ge.unmount_at(gelt);\n            } else {\n                gelt = ge.render(gi);\n            }\n            chp.insertBefore(gelt, ch);\n            gi.update_at(gelt);\n            ch = gelt;\n        }\n        delete geltmap[k];\n\n        // add grade to sidebar\n        if (sidebar && ge.want_sidebar()) {\n            if (sidebar.className === \"pa-sidebar\") {\n                if (sidebar.firstChild === null) {\n                    const e = document.createElement(\"div\");\n                    e.className = \"pa-gradebox pa-ps\";\n                    sidebar.appendChild(e);\n                }\n                sidebar = sidebar.firstChild;\n                sidebarch = sidebar.firstChild;\n            }\n            if (sidebarch && sidebarch.getAttribute(\"data-pa-grade\") === k) {\n                sidebarch = sidebarch.nextSibling;\n            } else {\n                const e = ge.render(gi);\n                sidebar.insertBefore(e, sidebarch);\n                gi.update_at(e, {sidebar: true});\n            }\n        }\n\n        ch = ch.nextSibling;\n    }\n\n    // finish sidebar\n    if (sidebar) {\n        gradelist_finish_sidebar(sidebar, sidebarch);\n    }\n\n    // remove remaining grades\n    for (const k in geltmap) {\n        const gelt = geltmap[k],\n            ge = gi.entries[gelt.getAttribute(\"data-pa-grade\")];\n        ge.unmount_at(gelt);\n    }\n\n    // resolve sections\n    for (const sectione of new_sections) {\n        gradelist_resolve_section(gi, sectione);\n    }\n\n    // add links\n    if (this.classList.contains(\"want-psetinfo-links\")) {\n        this.classList.remove(\"want-psetinfo-links\");\n        const bb = document.createElement(\"div\");\n        bb.className = \"pa-psetinfo-links btnbox mt-2 mb-2 hidden\";\n        this.append(bb);\n        for (const dir of [true, false]) {\n            const sib = psetinfo_sibling(this, dir);\n            if (sib) {\n                psetinfo_sibling_button(bb, dir);\n                psetinfo_sibling_button(sib.querySelector(\".pa-psetinfo-links\"), !dir);\n            }\n        }\n    }\n\n    $(\".pinnable\").each(resolve_pinnable);\n}\n\n$(function () {\n    $(\".need-pa-grade\").each(pa_resolve_grade);\n    $(\".need-pa-gradelist\").each(pa_resolve_gradelist);\n});\n\nfunction psetinfo_sibling(elt, prev) {\n    const sibling = prev ? \"previousSibling\" : \"nextSibling\",\n        pi = elt.closest(\".pa-psetinfo\");\n    let xpi = pi;\n    while (xpi && (xpi === pi || xpi.nodeType !== 1 || !xpi.classList.contains(\"pa-psetinfo\"))) {\n        xpi = xpi[sibling];\n    }\n    return xpi;\n}\n\nfunction psetinfo_sibling_button(bbox, prev) {\n    if (bbox && !bbox.querySelector(prev ? \".prev\" : \".next\")) {\n        bbox.classList.remove(\"hidden\");\n        const btn = document.createElement(\"button\");\n        btn.textContent = prev ? \"\" : \"\";\n        btn.className = \"ui pa-psetinfo-link \" + (prev ? \"prev\" : \"next\");\n        btn.type = \"button\";\n        bbox[prev ? \"prepend\" : \"append\"](btn);\n    }\n}\n\nhandle_ui.on(\"pa-psetinfo-link\", function () {\n    const xpi = psetinfo_sibling(this, this.classList.contains(\"prev\"));\n    if (xpi && xpi.id) {\n        location.hash = \"#\" + xpi.id;\n    }\n});\n\nfunction pa_render_total(gi, tm) {\n    let ne = 0, nv = 0;\n    for (const k in gi.entries) {\n        const ge = gi.entries[k];\n        if (ge.in_total) {\n            ++ne;\n            if (ge.student_visible(gi)) {\n                ++nv;\n            }\n        }\n    }\n    const pv = $e(\"div\", \"pa-pv\", $e(\"span\", \"pa-gradevalue pa-gradewidth\"));\n    if (tm[1] != null) {\n        pv.append(\" \", $e(\"span\", \"pa-gradedesc\", \"of \" + tm[1]));\n    }\n    return $e(\"div\", \"pa-total pa-p\" + (ne <= 1 ? \" hidden\" : \"\") + (nv < ne ? \" pa-p-hidden\" : \"\"),\n        $e(\"div\", \"pa-pt\", gi.total_type === \"subset\" ? \"subtotal\" : \"total\"),\n        pv);\n}\n\nfunction pa_loadgrades() {\n    if (!hasClass(this, \"pa-psetinfo\")) {\n        throw new Error(\"bad pa_loadgrades\");\n    }\n    const gi = GradeSheet.closest(this);\n    if (!gi || !gi.value_order) {\n        return;\n    }\n\n    $(this).find(\".need-pa-grade\").each(function () {\n        pa_resolve_grade.call(this, true);\n    });\n\n    $(this).find(\".pa-gradelist\").each(function () {\n        pa_resolve_gradelist.call(this, true);\n    });\n\n    $(this).find(\".pa-grade\").each(function () {\n        gi.update_at(this, {reset: true});\n    });\n\n    // print totals\n    const tm = gi.total_type === \"hidden\" ? [null, null] : [gi.grade_total(), gi.grade_maxtotal()],\n          total = tm[0] === null ? \"\" : \"\" + tm[0];\n    if (tm[0] !== null) {\n        $(this).find(\".pa-gradelist:not(.pa-gradebox)\").each(function () {\n            const $t = $(this).find(\".pa-total\");\n            $t.length || $(this).prepend(pa_render_total(gi, tm));\n        });\n    }\n    let drawgraph = false;\n    $(this).find(\".pa-total\").each(function () {\n        toggleClass(this, \"hidden\", total === \"\");\n        const $v = $(this).find(\".pa-gradevalue\");\n        if ($v.text() !== total) {\n            $v.text(total);\n            drawgraph = true;\n        }\n    });\n    if (drawgraph) {\n        $(this).find(\".pa-grgraph\").trigger(\"redrawgraph\");\n    }\n}\n\nhandle_ui.on(\"pa-notes-grade\", function (event) {\n    if (event.type === \"keydown\") {\n        var k = event_key(event), gr;\n        if (event.ctrlKey\n            && (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\" || k === \"A\")\n            && (gr = this.closest(\".pa-grade\"))) {\n            var gradekey = gr.getAttribute(\"data-pa-grade\"),\n                links = $(\".pa-grade[data-pa-grade=\" + gradekey + \"] .pa-notes-grade\").filter(\":visible\"),\n                i = links.toArray().indexOf(this);\n            if (i >= 0) {\n                if (k === \"n\" || k === \"N\" || k === \"p\" || k === \"P\") {\n                    var delta = k === \"n\" || k === \"N\" ? 1 : links.length - 1,\n                        link = links[(i + delta) % links.length],\n                        dg = link.closest(\".pa-dg\");\n                    dg && $(dg).scrollIntoView({marginTop: 24, atTop: true});\n                    link.focus();\n                    $(link).scrollIntoView();\n                } else {\n                    links.click();\n                }\n                event.preventDefault();\n            }\n        }\n    } else if (event.type === \"click\") {\n        const gv = this.closest(\".pa-grade\").querySelector(\".pa-gradevalue\");\n        if (gv && gv.value != gv.getAttribute(\"data-pa-notes-grade\")) {\n            $(gv).val(gv.getAttribute(\"data-pa-notes-grade\")).change();\n        }\n        event.preventDefault();\n    }\n});\n\n\nfunction pa_beforeunload(evt) {\n    let e = document.querySelector(\".pa-dirty, .pa-outstanding\");\n    if (e) {\n        evt.preventDefault();\n        return;\n    }\n    for (const ta of document.querySelectorAll(\".pa-gw textarea\")) {\n        const tr = ta.closest(\".pa-dl\"), note = Note.at(tr);\n        if (!text_eq(ta.value, note.text) && !hasClass(tr, \"pa-save-failed\")) {\n            evt.preventDefault();\n            return;\n        }\n    }\n}\n\nfunction pa_runmany(chain) {\n    const f = document.getElementById(\"pa-runmany-form\"),\n        doneinfo = [];\n    let timeout, cursor = 0;\n    if (f && !f.hasAttribute(\"data-pa-runmany-unload\")) {\n        $(window).on(\"beforeunload\", function () {\n            const progress = document.getElementById(\"pa-runmany-progress\");\n            if (progress && progress.max < progress.value) {\n                return \"Several server requests are outstanding.\";\n            }\n        });\n        f.setAttribute(\"data-pa-runmany-unload\", \"\");\n        const runner = document.getElementById(\"run-\" + f.elements.run.value);\n        addClass(runner, \"has-hotlist\");\n        runner.addEventListener(\"pa-hotlist\", make_hotlist);\n    }\n    function make_hotlist(event) {\n        const j = [];\n        for (const s of doneinfo) {\n            let t = `~${s.u}/pset/${s.pset}`;\n            if (s.commit) {\n                t += `/${s.commit}`;\n            }\n            j.push(t);\n        }\n        const u = f.elements.u.value;\n        if (u) {\n            let t = `~${u}/pset/${f.elements.pset.value}`;\n            if (f.elements.commit.value) {\n                t += `/${f.elements.commit.value}`;\n            }\n            j.push(t);\n        }\n        event.detail.hotlist = {items: j};\n    }\n    function mark_job_complete(category, timestamp) {\n        doneinfo.push({\n            u: f.elements.u.value,\n            pset: f.elements.pset.value,\n            commit: f.elements.commit.value,\n            run: category,\n            timestamp: timestamp\n        });\n        f.elements.jobs.value = JSON.stringify(doneinfo);\n        f.elements.u.value = \"\";\n        if (doneinfo.length === 1) { // just added first output\n            statusui().lastChild.append($e(\"button\", {type: \"button\", class: \"ui js-runmany-download\"}, \"Download\"));\n        }\n    }\n    function check() {\n        const button = f.elements.run,\n            category = button.getAttribute(\"data-pa-run-category\") || button.value,\n            therun = document.getElementById(\"pa-run-\" + category);\n        timeout && clearTimeout(timeout);\n        timeout = null;\n        if (therun && hasClass(therun, \"pa-run-active\")) {\n            timeout = setTimeout(check, 2000);\n            return;\n        }\n        if (f.elements.jobs && category && therun && therun.hasAttribute(\"data-pa-timestamp\")) {\n            mark_job_complete(category, +therun.getAttribute(\"data-pa-timestamp\"));\n            therun.removeAttribute(\"data-pa-timestamp\");\n        }\n        $.ajax(hoturl(\"=api/runchainhead\", {chain: chain, cursor: cursor}), {\n            type: \"POST\", cache: false, dataType: \"json\", timeout: 30000,\n            success: success\n        });\n    }\n    function statusui() {\n        let e = document.getElementById(\"pa-runmany-statusui\");\n        if (!e) {\n            e = document.createElement(\"div\");\n            e.id = \"pa-runmany-statusui\";\n            e.className = \"d-flex justify-content-between\";\n            const progress = document.createElement(\"div\"),\n                download = document.createElement(\"div\");\n            progress.className = \"flex-grow-1\";\n            e.append(progress, download);\n            $(\"#run-\" + f.elements.run.value).after(e);\n        }\n        return e;\n    }\n    function progress(nleft, njobs) {\n        let progress = document.getElementById(\"pa-runmany-progress\");\n        if (!progress) {\n            progress = document.createElement(\"progress\");\n            progress.id = \"pa-runmany-progress\";\n            progress.className = \"ml-3 mr-3\";\n            statusui().firstChild.append(\"Progress: \", progress);\n        }\n        progress.max = Math.max(njobs, nleft + 1);\n        progress.value = progress.max - nleft;\n        progress.textContent = sprintf(\"%d%%\", progress.value / progress.max);\n        const have_done = progress.nextElementSibling && hasClass(progress.nextElementSibling, \"pa-runmany-done\");\n        if (nleft === 0 && !have_done) {\n            progress.after($e(\"span\", \"pa-runmany-done\", \"Done!\"));\n        } else if (nleft !== 0 && have_done) {\n            progress.nextElementSibling.remove();\n        }\n    }\n    function success(data) {\n        timeout && clearTimeout(timeout);\n        timeout = null;\n        if (data && data.active && data.active.length) {\n            const aqi = data.active[0];\n            f.elements.u.value = aqi.u;\n            f.elements.pset.value = aqi.pset;\n            f.elements.commit.value = aqi.hash || \"\";\n            let url = `${siteinfo.site_relative}~${encodeURIComponent(aqi.u)}/pset/${aqi.pset}`;\n            if (aqi.hash) {\n                url += `/${aqi.hash}`;\n            }\n            run(f.elements.run, {clear: false, queueid: aqi.queueid, timestamp: aqi.timestamp, headline: `\\x1b]8;;${url}\\x07${aqi.u}\\x1b]8;;\\x07`, done_function: check, timed: false});\n            cursor = aqi.cursor;\n            timeout = setTimeout(check, 30000);\n        } else if (!data || data.nleft !== 0) {\n            timeout = setTimeout(check, 4000);\n        }\n        if (data && data.njobs != null) {\n            progress(data.nleft || 0, data.njobs);\n        }\n    }\n    check();\n}\n\nhandle_ui.on(\"js-runmany-download\", function () {\n    const f = document.getElementById(\"pa-runmany-form\");\n    if (f.elements.jobs && f.elements.jobs.value) {\n        const download = document.createElement(\"input\");\n        download.type = \"hidden\";\n        download.name = \"download\";\n        download.value = \"1\";\n        f.elements.jobs.disabled = false;\n        f.append(download);\n        f.submit();\n        f.elements.jobs.disabled = true;\n        f.removeChild(download);\n    }\n});\n\n$(function () {\ndocument.body.setAttribute(\"data-time-skew\", Math.floor(new Date().getTime() / 1000) - +document.body.getAttribute(\"data-now\"));\n});\n\n$(\".pa-download-timed\").each(function () {\n    var that = this, timer = setInterval(show, 15000);\n    function show() {\n        const downloadat = +that.getAttribute(\"data-pa-download-at\"),\n            commitat = +that.getAttribute(\"data-pa-commit-at\"),\n            expiry = +that.getAttribute(\"data-pa-download-expiry\"),\n            now = new Date().getTime() / 1000 + +document.body.getAttribute(\"data-time-skew\");\n        let t;\n        if (now > expiry) {\n            t = strftime(\"%Y/%m/%d %H:%M\", downloadat);\n        } else {\n            t = Math.round((now - downloadat) / 60) + \" min\";\n        }\n        if (commitat > downloadat) {\n            t += \"  \" + Math.round((commitat - downloadat) / 60) + \" min before commit\";\n        }\n        $(that).find(\".pa-download-timer\").text(t);\n        if (now > expiry) {\n            clearInterval(timer);\n        }\n    }\n    show();\n});\n\nhandle_ui.on(\"submit.pa-setrepo\", function (evt) {\n    let f = this;\n    this.classList.remove(\"has-error\", \"has-warning\");\n    if (hasClass(this.firstChild, \"feedback-list\")) {\n        this.removeChild(this.firstChild);\n    }\n    this.querySelector(\"button[type=submit]\").disabled = true;\n    $.ajax(hoturl(\"=api/repo\", {\n        pset: this.getAttribute(\"data-pa-pset\"),\n        u: siteinfo.uservalue\n    }), {\n        type: \"POST\", cache: false, data: $(this).serialize(),\n        success: function (data) {\n            f.querySelector(\"button[type=submit]\").disabled = false;\n            if (data.message_list) {\n                f.insertBefore(feedback.render_list(data.message_list), f.firstChild);\n            } else {\n                location.reload();\n            }\n        }\n    })\n    evt.preventDefault();\n});\n\nhandle_ui.on(\"submit.pa-setbranch\", function (evt) {\n    let f = this;\n    this.classList.remove(\"has-error\", \"has-warning\");\n    if (hasClass(this.firstChild, \"feedback-list\")) {\n        this.removeChild(this.firstChild);\n    }\n    this.querySelector(\"button[type=submit]\").disabled = true;\n    $.ajax(hoturl(\"=api/branch\", {\n        pset: this.getAttribute(\"data-pa-pset\"),\n        u: siteinfo.uservalue\n    }), {\n        type: \"POST\", cache: false, data: $(this).serialize(),\n        success: function (data) {\n            f.querySelector(\"button[type=submit]\").disabled = false;\n            if (data.message_list) {\n                f.insertBefore(feedback.render_list(data.message_list), f.firstChild);\n            } else {\n                location.reload();\n            }\n        }\n    })\n    evt.preventDefault();\n});\n\nfunction repo_branches(repoid) {\n    let bl = document.getElementById(\"branchlist-\" + repoid);\n    if (bl) {\n        return Promise.resolve(bl);\n    }\n    bl = document.createElement(\"datalist\");\n    bl.id = \"branchlist-\" + repoid;\n    document.body.appendChild(bl);\n    return new Promise(function (resolve, reject) {\n        $.ajax(hoturl(\"api/branches\", {repoid: repoid}), {\n            \"type\": \"GET\", cache: false, success: function (data) {\n                if (data.ok) {\n                    for (const br of data.branches) {\n                        const e = document.createElement(\"option\");\n                        e.value = br;\n                        bl.appendChild(e);\n                    }\n                    resolve(bl);\n                } else {\n                    reject(data);\n                }\n            }\n        });\n    });\n}\n\nhandle_ui.on(\"focusin.pa-branch-datalist\", function () {\n    removeClass(this, \"ui-focusin\");\n    if (!this.hasAttribute(\"list\") && this.hasAttribute(\"data-pa-repoid\")) {\n        repo_branches(this.getAttribute(\"data-pa-repoid\")).then((bl) => { this.setAttribute(\"list\", bl.id); }).catch((e) => console.log(e));\n    }\n});\n\nfunction pa_checklatest(pset) {\n    var start = (new Date).getTime(), timeout;\n\n    function checkdata(d) {\n        if (d && d.commits) {\n            $(\".pa-commitcontainer\").each(function () {\n                var pset = this.getAttribute(\"data-pa-pset\"),\n                    latesthash = this.getAttribute(\"data-pa-checkhash\");\n                for (var c of d.commits) {\n                    if (c.pset == pset\n                        && c.hash\n                        && c.hash !== latesthash\n                        && c.snaphash !== latesthash) {\n                        $(this).find(\".pa-pv\").append(\"<div class=\\\"pa-inf-error\\\"><span class=\\\"pa-inf-alert\\\">Newer commits are available.</span> <a href=\\\"\" + hoturl(\"pset\", {u: siteinfo.uservalue, pset: pset, commit: c.hash}) + \"\\\">Load them</a></div>\");\n                        clearTimeout(timeout);\n                        break;\n                    }\n                }\n            });\n        }\n    }\n\n    function docheck() {\n        var now = (new Date).getTime(),\n            anyhash = $(\".pa-commitcontainer[data-pa-checkhash]\").length > 0;\n        if (now - start <= 60000)\n            timeout = setTimeout(docheck, anyhash ? 10000 : 2000);\n        else if (now - start <= 600000)\n            timeout = setTimeout(docheck, anyhash ? 20000 : 10000);\n        else if (now - start <= 3600000)\n            timeout = setTimeout(docheck, (now - start) * 1.25);\n        else\n            timeout = null;\n        $.ajax(hoturl(\"=api/latestcommit\", {u: siteinfo.uservalue, pset: pset}), {\n                type: \"GET\", cache: false, dataType: \"json\", success: checkdata\n            });\n    }\n\n    setTimeout(docheck, 2000);\n}\n\nfunction pa_pset_actions() {\n    var $f = $(this);\n    function update() {\n        var st = $f.find(\"select[name='state']\").val();\n        $f.find(\".pa-if-enabled\").toggleClass(\"hidden\", st === \"disabled\");\n        $f.find(\".pa-if-visible\").toggleClass(\"hidden\", st === \"disabled\" || st === \"invisible\");\n    }\n    update();\n    $f.find(\"select[name='state']\").on(\"change\", update);\n    $f.find(\"input, select\").on(\"change\", function () {\n        $f.find(\"[type='submit']\").addClass(\"alert\");\n    });\n    $f.removeClass(\"need-pa-pset-actions\");\n}\n\nhandle_ui.on(\"pa-anonymized-link\", function (event) {\n    var link = this.getAttribute(\"data-pa-link\");\n    if (event && event.metaKey) {\n        window.open(link);\n    } else {\n        window.location = link;\n    }\n});\n\nhandle_ui.on(\"js-multiresolveflag\", function () {\n    const form = this.closest(\"form\"),\n        ptconf = form.pa__ptconf, flags = [];\n    $(form).find(\".papsel:checked\").each(function () {\n        const s = ptconf.smap[this.closest(\"tr\").getAttribute(\"data-pa-spos\")];\n        flags.push({pset: s.pset, uid: s.uid, hash: s.commit, flagid: s.flagid});\n    });\n    if (flags.length !== 0) {\n        $.ajax(hoturl(\"=api/multiresolveflag\"), {\n                type: \"POST\", cache: false, data: {flags: JSON.stringify(flags)}\n            });\n    } else {\n        window.alert(\"No flags selected.\");\n    }\n});\n\nfunction pa_register_psets(psets) {\n    siteinfo.psets = siteinfo.psets || {};\n    for (const p of psets) {\n        siteinfo.psets[p.psetid] = siteinfo.psets[p.pset] = p;\n    }\n}\n\nwindow.$pa = {\n    beforeunload: pa_beforeunload,\n    checklatest: pa_checklatest,\n    decorate_diff_page: Filediff.decorate_page,\n    fold: fold,\n    gradeentry_closest: GradeEntry.closest,\n    gradesheet_closest: GradeSheet.closest,\n    gradesheet_store: GradeSheet.store,\n    grgraph: grgraph,\n    hoturl: hoturl,\n    loadgrades: pa_loadgrades,\n    load_runsettings: run_settings_load,\n    note_near: Note.near,\n    on: handle_ui.on,\n    onload: hotcrp_load,\n    pset_actions: pa_pset_actions,\n    pset_table: pa_pset_table,\n    register_psets: pa_register_psets,\n    render_text_page: render_text.on_page,\n    runmany: pa_runmany,\n    text_eq: text_eq,\n    tooltip: tooltip,\n    string_utf8_index: string_utf8_index,\n    SearchParser: SearchParser,\n    SearchExpr: SearchExpr\n};\n"],"names":["autogrowers","shadows","get_shadow","elt","width","css","window","getComputedStyle","t","concat","fontSize","fontFamily","fontWeight","fontStyle","lineHeight","tagName","pl","parseFloat","paddingLeft","pr","paddingRight","bl","borderLeftWidth","br","borderRightWidth","minWidth","style","maxWidth","classList","contains","s","signature","document","createElement","refcount","setAttribute","body","appendChild","resizer","ag","remover","self","shadow","$","removeData","Element","remove","delete","fn","autogrow","this","each","minHeight","$self","f","data","event","clientWidth","clientHeight","innerText","val","value","type","keyCode","wh","Math","max","height","min","offsetWidth","outerWidth","make_input_autogrower","on","Map","resize","set","unautogrow","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","wstorage","localStorage","JSON","is_session","key","sessionStorage","getItem","removeItem","setItem","stringify","sprintf","fmt","wordno","word","arg","argno","conv","pad","words","split","length","charAt","arguments","match","toString","Number","toPrecision","replace","p1","p2","toFixed","toExponential","floor","toUpperCase","parseInt","num","str","n","substring","unparse_q","d","alt","is24","getSeconds","strftime","getMinutes","json","x","parse","site","siteinfo","base","site_json","unparsers","a","getDay","A","getDate","e","u","w","b","getMonth","B","h","m","y","getFullYear","Y","H","getHours","k","I","l","M","X","p","P","q","r","R","S","T","D","F","getTime","Date","sec2text","round","abs","parseJSON","prototype","closest","replaceChildren","lastChild","removeChild","i","append","checkVisibility","offsetParent","String","startsWith","search","pos","endsWith","this_len","trimStart","Object","hasOwn","defineProperty","hasOwnProperty","configurable","writable","ImmediatePromise","constructor","then","executor","v","Promise","reject","text_eq","string_utf8_index","index","re","len","lastIndex","exec","hasClass","addClass","removeClass","toggleClass","test","navigator","userAgent","add","toggle","trim","className","callbacks","collect_callbacks","cbs","c","etype","j","splice","call_callbacks","element","isImmediatePropagationStopped","call","handle_ui","target","preventDefault","callback","priority","dot","indexOf","push","trigger","Event","in_tab","fold61","sel","arrowholder","direction","fa","querySelector","input_is_checkboxlike","input_default_value","hasAttribute","getAttribute","checked","defaultChecked","defaultValue","input_set_default_value","removeAttribute","input_differs","RadioNodeList","form_differs","form","coll","HTMLFormElement","elements","find","filter","colllen","name","disabled","$e","tag","attr","awakenf","$pa","tooltip","addEventListener","metaKey","nodeName","requestAnimationFrame","scrollIntoView","select","awaken","key_map","charCode_map","keyCode_map","nonprintable_map","event_key","evt","charCode","fromCharCode","encodeURIComponentPlus","encodeURIComponent","hoturl_clean_before","page_component","prefix","first","pt","hoturl_clean","last","hoturl_psetinfo","page","args","sheet","uservalue","pa__gradesheet","enames","entries","join","hoturl","options","xv","anchor","site_relative","suffix","postvalue","substr","defaults","serialize_object","hoturl_get_go","location","log_jserror","errormsg","error","noconsole","Error","fileName","url","lineNumber","lineno","columnNumber","colno","stack","ajax","global","method","cache","console","printable","ctrlKey","is_modifier","is_default_a","shiftKey","button","modcode","altKey","SHIFT","CTRL","ALT","META","rangeclick_state","jsRangeClick","kind","__clicking__","cbgs","cb","querySelectorAll","values","thispos","lastpos","lastelt","focus","group","single_group","cbg","state","changed","indeterminate","CustomEvent","bubbles","cancelable","detail","rangeType","rangeGroup","newState","dispatchEvent","old_onerror","onerror","nerrors_logged","jqxhr_error_ftext","jqxhr","status","check_message_list","message_list","isArray","message","warning","apply","err","id","parentElement","reverse","locator","log","ajaxError","settings","httperror","readyState","responseText","msg","URL","baseURI","href","user","email","tracked_out","tracked_after","after_outstanding","ajaxPrefilter","success","sessioninfo","cid","action","post","sessionreport","check_sessioninfo","Array","rjson","getResponseHeader","ok","timeout","dataType","trackOutstanding","ajaxComplete","shift","cookie_set_at","cond_out","cond_wait","cond_retry","api_conditioner","resolve","assign","done","api_conditioner_next","list_digest_update","info","digests","found","now","digest","list_digest_resolve","xinfo","set_cookie","sitehref","list_digest_create","want1","want2","pset","idx","items","cur","prev","next","set_prevnext","cookie","cookie_params","absolute_base","handle_list","hl","is_listable","hotlist","list_default_click","hash","unshift","retry","ee_re","ee_rep","escape_entities","regexp_quote","charclass","html_id_encode","charCodeAt","html_id_decode","decodeURIComponent","capdir","lcdir","szdir","cssborder","dir","cssbc","roundpixel","dpr","Bubble","content","bubopt","color","nearpos","dirspec","bubdiv","bubtail0","bubcontent","bubtail1","bubch","childNodes","sizes","divbw","change_tail_direction","bw","trw","trh","borderWidth","trdelta","sqrt","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","yc","constrainmid","wpos","ds","ds2","z0","z1","z","constrain","za","bpos","noconstrain","bdim","bpos_wconstraint","xw","left","right","make_bpos","$b","bg","geometry","wconstraint","top","bottom","remake_bpos","parse_dirspec","res","csscornerradius","corner","divbr","constrainradius","x0","x1","show","model","div","tail","make_model","$tail","children","calculate_sizes","noflip","dsx","xa","ya","wedge","visibility","bubble","near","epos","reference","jquery","g","offset","extend","at","newcolor","html","innerHTML","appendTo","text","createTextNode","text_to_html","content_node","firstChild","hover","enter","leave","removeOn","jq","outerHTML","devicePixelRatio","builders","global_tooltip","show_tooltip","disable_tooltip","builder","HTMLElement","delay","prepare_info","tt","bub","to","delayto","close","clearTimeout","show_bub","nc","exit","setTimeout","_element","new_content","new_text","noDelayClass","tx","ttenter","ttleave","skip_space","ch","skip_name","pos0","lch","parse_tag","result","open","tag0","toLowerCase","name0","name1","attrname","nextquote","nextnl","val0","minihtml_inline","silent","src","posMax","tag1","token","attrs","title","md","inline","env","lt","nl","markdownit_minihtml","ruler","after","close_under","add_builder","attr_re","attribute_block","startLine","endLine","sCount","blkIndent","bMarks","tShift","last_token","tokens","dest","nest","nesting","find_opener","mm","matchAll","attrGet","attrSet","line","markdownit_attributes","block","isSpace","skipMarker","start","eMarks","skipSpaces","deflist","ddIndent","nextLine","isEmpty","contentStart","listTokIdx","tight","listLines","map","dtLine","ddLine","OUTER","prevEmptyEnd","token_i","getLines","itemLines","oldTight","oldDDIndent","oldIndent","oldTShift","oldSCount","oldParentType","parentType","tokenize","level","hidden","markTightParagraphs","markdownit_deflist","utils","before","parse_ftext","renderers","add_format","format","link_urls","md2","try_highlight","lang","langAttr","hljs","getLanguage","hlstr","highlight","language","ignoreIllegals","classIndex","attrIndex","lineIndex","pfx","minlen","sfx","padStart","lines","pop","linestart","render_link_open_3","renderToken","render_with","context","renderer","want_inline","display","render_inline","render","replaceWith","render_onto","ft","render_this","textContent","on_page","markdownit","linkify","use","markdownit_katex","attributes","rules","link_open","render_text","ftext","unparse","message_list_status","ml","field","mi","render_list","ul","append_item","render_alert_onto","li","landmark","redundant_item","sklass","feedback","append_item_near","item","owner","fl","firstElementChild","nextElementSibling","nfl","insertBefore","list_status","maybe_render_list","render_alert","render_xhr_error_onto","make_flagger","what","psetinfo","grade","pv","gradecommit","gradelock","apply_flagger","node","range","createRange","selectNode","getSelection","removeAllRanges","addRange","execCommand","repositories","insertAfter","nextSibling","parentNode","$form","serializeWith","grader_email","submit","flagreason","flagid","reason","placeholder","class","stopImmediatePropagation","click","dropmenu_builders","dropmenu_close","modal","getElementById","previousSibling","matches","dropmenu_close1","dropmenu_clickable","bs","as","dropmenu_click","tgt","details","queueMicrotask","ke","stopPropagation","dropmenu_selection","menu","activeElement","dropmenu_clickable_starting_with","normalize","dmkey_menu","dmkey_time","dmkey_string","dropmenu_keydown","up","timeStamp","dropmenu_mousemove","maxHeight","drect","getBoundingClientRect","visualViewport","dropmenu_open","decorators","Filediff","nodeType","Node","ELEMENT_NODE","ed","referenced","fd","by_hash","by_file","by_href","add_decorator","load","wdiff","file","base_commit","commit","content_html","decorate","render_text_page","load_if","df","decorate_page","h3","h3fd","isarrow","toggle_show_left","toggle_show_comments","sl","lineid_anchor","lineid","Linediff","all","isb","ln","base_contains","expansion_contains","expand","_psetinfo","repourl","scroll_position","scrollY","preve","define_method","enumerable","el","filediff","_filediff","note_lineid","lm","dash","linea","linea_within","Infinity","lineb","bound","uf","is_visible","visible_predecessor","visible_source","is_source","is_base","is_expandable","em","delta","a0","b0","fromline","linecount","is_annotation","is_note","upper_bound","curlineno","curlm","BACKWARD","ANYFILE","GRADES","flags","extreme","inp","dg","ttp","lo","hi","selector","goto_hash","scrollTo","innerHeight","catch","diffmany_dropmenu_toggle","zIndex","lastElementChild","removeEventListener","mdcontext","$es","collapse","originalEvent","currentTarget","psim","pme","role","nonwsre","hljs_line","hlstate","ns","render_map","add_landmark","add_landmark_1","fix_landmark_html","sp","gt","modify_landmark","fix_list_item","dc","nd","hidelm","drclass","this_lineno","lr","dx","fence","code_block","unescapeAll","xtoken","slice","langPrefix","xattrs","renderAttrs","xl","ln0","escapeHtml","render_landmark_fence","image","fix","pi","m2","srci","modify_landmark_image","list_item_open","make_markdownit","lp","la","lb","l1","l2","klass","ee","langclass","hlstatei","hlstated","ce","ishl","xe","et","markdown","shown","unmarkdown","Note","iscomment","empty","source","editable_text","myftext","users","version","force_element","insertion","box","cancel_edit","transition","$text","blur","$td","$content","slideUp","queue","fix_links_at","contdiv","authorids","authors","pc","nick","nicklen","authordiv","markdiv","notediv","hide","slideDown","save_ftext","editing","tr","grb","oldversion","linenotes","add_linenotes","count","gradeentry_closest","save_landmark_grade","resolve_grade_range","save_text","isNaN","set_link","next_tr","tabindex","trs","notepos","prevpos","nextpos","color_map","GradeClass","basic_text","basic_mount_edit","opts","max_text","DocumentFragment","long_page","basic_mount_show","es","basic_unmount","basic_update_edit","ve","simple_text","mixed","basic_configure_column","col","ge","gabbr","abbr","justify","gc","sort_forward","sort","gkey","ptconf","total_key","readonly","table_color","make_compare","basic_make_compare","gidx","erev","grades","_sort_user","localeCompare","basic_tcell_width","initialize","type_tabular","want_sidebar","configure_column","tcell_width","tcell","mount_show","mount_edit","update_edit","unmount","numeric","update_show","DGSELECTOR","tabgroup_traverse","sb","bwd","sidebar","childdir","parent","down","tab_traverse","sbtabs","tn","focusVisible","setSelectionRange","late_hours_entry","id_counter","gradesheet_props","pa_resetgrade","gi","GradeSheet","gr","update_at","title_span","GradeEntry","normal","_abbr","_all","student_visible","visible","answer","scores_visible","title_node","title_html","title_text","textContext","compute_abbr","order","value_order","pabbr","grade_titles","abbrx","rest","mode","answers_editable","scores_editable","pge","le","pde","htmlFor","description","de","mount_at","edit","vt","has_max","gd","autograde","txt","fresh","reset","clg","update_landmark","tabIndex","required","gl","pgbr","directory","filename","unmount_at","landmark_lines","landmark_range","landmark_grade","sum","note","gch","$nd","ceil","gh","gnv","gv","sumstr","gval","change","value_order_in","vpos","value_in","autovalue_in","autogrades","has_later_value_in","grades_latest","late_hours","LateHoursEntry","super","auto_late_hours","root","make_child","set_entry","old_value_order","fixed_value_order","merge_grades","scores_visible_pinned","myg","ing","inorder","xentry","value_entries","remount_at","pdx","replaceChild","label","xopts","gradesheet","grade_total","noextra","total","in_total","is_extra","grade_maxtotal","maxtotal","file_anchor","has_sections","has","section_has","gei","section_wants_sidebar","show_text_as_diff","fileid","pos1","dl","pos2","ndl","da","db","dd","lns","store","loadgrades","curline","curgrade","down_event","scrolled_x","scrolled_y","scrolled_at","set_scrolled_at","screenX","screenY","arrowcapture","uncapture","modkey","make_linenote","arrowcapture_enter","lnx","arrowcapture_focusat","arrowcapture_arrow","wf","marginTop","offsetHeight","capture","keydown","off","unedit","ctr","cancel","textarea_keydown","nearby","dy","$ta","$tr","prop","pa_save_my_note","render_form","my_note_feedback","uid","like","dislike","my_note_compare","af","bf","localeString","note_suggestions","suggdata","searchre","suggctr","search_suggestions_re","aa","known","Set","mf","gf","bbox","b1","b2","display_note_suggestions","notelist","more","linenotemark","mark","ld","patterns","RegExp","locate","clientX","clientY","base_handout","neighborhood","my_neighborhood","regex","ne","ansistyle_map","rv","du","fg","ansistyle_keymap","ansistyle_parse","dst","cmp","isEmptyObject","ansistyle_combine","a1","a2","ansistyle_unparse","ansistyle_hexcolor","render_terminal","container","string","return_html","clear","lastfull","styles","fragment","directoryre","addlinepart","link","jQuery","backgroundColor","ansistyle_render","addfragment","createDocumentFragment","render_line","isnew","displaylen","lineend","curstyle","parts","partno","lsplit","glen","clearafter","rpos","clean_cr","filematch","add_file_link","cursor","laststyles","divlen","toggle_grade_history","gelt","run","category","therun","therunout","thepre","thexterm","checkt","kill_checkt","queueid","was_onqueue","eventsource","sendtimeout","completed","unfold","timestamp","Terminal","cols","rows","fontsize","trunc","terminal_char_width","attachCustomKeyEventHandler","write","send","mod","clipboard","readText","scroll_therun","scrollHeight","scrollTop","ibuffer","preamble_offset","backoff","times","hide_cursor","complete","isdone","done_function","send_after","append_data","matchIndex","utf8_length","tsmsg","set_time_data","at_end","tpos","tstart","tlast","running","partial_time","partial_outstanding","ebutton","erange","etime","espeed","factor","time_factor","runspeed","set_time","load_more","end_offset","xdata","size","tpos_offset","time","npos","tpos_lower_bound","nlnl","add_data","boffset","eoffset","maxdata","lpos","moffset","time_data","parse_times","prepend","step","altscr","xtpos","offset_lower_bound","send_out","send_args","succeed_eventsource","msge","succeed","error_eventsource","ms","send_from_timeout","onqueue","nahead","headage","btn","stop","stop_button","loggedout","errorcode","conflict_timestamp","EventSource","onmessage","trim_data_to_offset","timed","succeed_add_times","check","headline","$j","$x","eval_function_path","getTotalLength","getPointAtLength","runsettings","save","PATHSEG_ARGMAP","Z","L","V","C","Q","push_history_state","normalized_path_cache","normalized_path_cache_size","normalized_path_complaint","SVGPathElement","preva","cx","cy","cx0","cy0","copen","sincb","coscb","parser","next_cmd","make_svg_path_parser","cos","sin","closest_point","pathNode","point","inbest","dist","oob","bounds","npsl","pathNodeMayBeNearer","distance","best","bestLength","pathLength","pathSegments","precision","bestDistance2","pLength","d2","xx","xdb","pdist","xd","yd","xmin","xmax","fill","path_x_distance2_buckets","IntervalSeq","is","lower","overlaps","mksvg","createElementNS","GradeGraph","plot_type","$parent","mainplot","series","ddmin","entry","cutoff","svg","gg","gx","gy","xt","yl","yt","tw","th","maxp","hoveranno","hoveron","digits","domr","getBBox","xdw","xdh","xlw","log10","mt","mr","mb","minyaxis","yfmt","labelcap","ymax","ylu","yltext","removeText","gw","xfactor","xax","yax","unxax","ax","unyax","ay","tics","xtics","xfmt","hlcurve","hlcurve_series","hlcurve_priority","hlcurve_ucdf","ndigit_max","labelw","unitbase","pow","nunits","unit","total_done","draw","xxv","label_restrictions","tic_restrictions","notic","lw","label_space","xaxis","yaxis","prio","path","append_cdf","cdf","nr","append_pdf","kde","bins","nrdy","xcutoff","xs","ys","la2","epsilon","i2","i0","i1","i3","y1","x2","y2","binwidth","remove_if","predicate","cdfu","ispdf","nrgh","ui","yv","typed_annotation","star_annotation","rs","PI","star","annotate","yv0","user_x","ucdf","highlight_users","last_highlight","desired","uids","uidm","uidx","elnext","animVal","that","handle","loc","ownerSVGElement","createSVGPoint","matrixTransform","getScreenCTM","inverse","rect","clientLeft","clientTop","paths","hlpt","closer_mark","ha","bb","pa__ptconf","uidmap","render_tooltip_name","hlpaths","hlp","distance2","GradeSeries","mean","median","stddev","from_sorted_array","ci","count_at","quantile","poslb","sumsq","rci","GradeKde","hfrac","nbins","maxg","ming","iH","epanechnikov","cdf0","GradeStats","psetid","grgraph_draw","pa__gradedata","user_extension","old_plot_type","plotarg","plot_types","grgraph_type","want_all","want_extension","extension","want_noextra","$plot","grgr","pa__gradegraph","filtered","has_hidden","kde_nbins","kde_hfactor","kdes","main","last_curve_series","stt","spec","hash_parse","hash_modify","changes","newhash","hash_unparse","origin","pathname","want_grgraph_hash","update","where","old_attr","update_course","tries","ranges","colors","any","course_xcdf","ui0","hr","update_hash","hs","history","replaceState","pushState","change_highlight","Checkbox_GradeClass","finish_mount_edit","want_checkbox","recheckbox","uncheckbox","parse_search","fb","friendly_boolean","ss","chsp","fr","mouseover","colon","make_multicheckbox","extraclass","repeat","chhidden","object_options","opt","nonee","oe","selectedIndex","ot","descspan","desclink","descp","ta","hr1","hr2","inner","timefmt","timeout_value","toge","tov","timeout_entry","remove_tmto","tm","makesticky","pa__tmto","pa__tmsticky","gsection","tms","timermark_interval","dt","deadline","tmch","start_at_text","tmelt","stelt","nextdt","alarmdelay","$popup","forme","enctype","form_class","modale","prior_focus","actionse","dialog_keydown","preventScroll","bgelt","anchorPos","wg","po","focus_at","popup_near","append_actions","actions","show_errors","filter_fields","gmlist","felt","hotcrp_ever_focused","grade_update","uid2tr","refreshflags","su","oldgrades","ngrades","refreshable","td","gdialog_gradelist_change","gdialog_section_click","$checkbox","$save_action","ptable_gdialog","checked_spos","table","hlgrade","$gdialog","gdialog_su","make_uid2tr","tBodies","gdialog_store_start","render_xmsg","errf","gdialog_store","byuid","url_gradeparts","grade_commit","commit_is_grade","us","rvu","gdialog_traverse","next_spos","gdialog_fill","spos","smap","render_gdialog_users","su1","tr1","_spos","gdialog_fill_user","sv","suv","gdialog_key","gdialog_gradelist_input","gdialog_mode_values","bsubmit","clearauto","gdialog_settings_submit","gs","gvisarg","gradertype","gradercid","gri","grn","random","clearrepo","adoptoldrepo","dropped","usc","progress","usci","gdialog_settings_gvis_click","gdialog_settings_dropped_click","gdialog_settings_grader_click","noauto","te","itype","gradertable","__order__","gitless","has_older_repo","is_admin","gdialog_fill_settings","gvis","ggr","ggra","gdropped","grcid","ngr","ngra","gdialog_mode_settings","analyze_multiple_choice","mcallow","vx","mx","vxx","zz","student_timestamp","sts","strong","but","is_pclike","rbut","forEach","sus","users_in","CHECKED_USERS","alert","gdform","sus_uids","do_submit","diff","anonymous","otherdiff","files","landmark_range_file","landmark_range_first","landmark_range_last","do_diff","$gsi","do_gradesheet","report","writeText","do_report","do_key","mode_diff","dv","sep","diff_files","collate","input","reports","mode_report","in_section","gcl","ccl","mode_gradesheet","ptable_diffdialog","SOME_USERS","slist","runner","ifneeded","skeys","param","runmany","ukey","selectcommits","commitq","____empty____","hoturl_post_go","ru","rn","runners","gdialog","cgi","cpi","sxs","max_index","any_unindexed","sgi","sorted","sx","ckey","carg","Intl","Collator","aid","bid","compare","cluster_by_none","mcarg","multiple_choice","amc","bmc","cluster_by_multiple_choice","av","bv","cluster_by_length","pinmap","WeakMap","dragging","drag_rect","drag_x1","drag_y1","resizing","resolve_pinnable","dragstart","dataTransfer","dropEffect","effectAllowed","setData","setDragImage","dragover","drop","dragend","resizestart","resizeover","resizeend","unpin","orig","get","opacity","ecopy","cloneNode","img","draggable","par","pag","pine","position","sge","gge","tebr","drage","SearchOperator","precedence","subtype","UNARY","ALLOW_SUBTYPE","SUBTYPE","UNNAMED","NOT","AND","OR","XOR","unary","allow_subtype","make_subtype","REGEXP_TERMINATOR","SearchOperatorSet","static","define","op","lookup","xop","nop","alnum","safe_terminator","simple_operators","notop","OP_UNARY","spaceop","OP_UNNAMED","andop","xorop","orop","SPACE","simple_operator","SearchExpr","kword","kwpos1","child","make_simple","make_keyword","make_op_start","combine","opname","is_complete","is_incomplete_paren","unquoted_text","SearchParser","unquote","complete_paren","flattened_children","indent","ctx","ts","nindent","prepare_simple","evaluate_simple","REGEXP_STICKYSPACE","REGEXP_KEYWORD","last_pos","set_pos","shift_keyword","kw","shift_past","skip_whitespace","shift_balanced_parens","endchars","allow_empty","span_balanced_parens","starts_with","opset","pstack","plast","quote","startpos","pcleared","pslen","split_balanced_parens","parse_expression","max_ops","cure","parens","nops","nexte","render_name","last_first","grader_name","__nickname","render_year","yr","user_compare","grader_compare","ap","bp","stre","user_hover","PtableConf","gitless_grades","frozen","has_nonanonymous","overridable_anonymous","flagged_commits","no_sort","checkbox","need_total","requested_columns","pincol","colmap","input_timeout","pconf","original_anonymous","rev","set_gradesheet","in_total_indexes","answer_indexes","add_column","pin","pin_index","columns","pinned_columns","columns_in","column_index_in","anon_user","psets","urlkey","is_grade","make_student_ae","ae","make_pset_ae","render_username_td","tde","render_user_td","render_display_name","is2","render_checkbox_name","render_table_row","tre","tbody_rowmap","tbody","pa__rowmap","rowmap","user_row_checkbox","overlay","cbidx","ALL_USERS","tb","chsus","ptable_head_click","deblind","sf","ptable_head_click_change_sort","ptable_body_click","ptable_make_hotlist","ptable_track_header","ctr2","IntersectionObserver","ctr0","tctable","tHead","thead_bounds","ctr0_bounds","ctr2_bounds","ctrh","marginLeft","scrollLeft","ptable_body_scroller","passive","ptable_decorate_name_th","the","ptable_thead","tfixed","rem","current_width","scope","documentElement","thead","queue_update_microtask_scheduled","queue_update_microtask_tds","update_microtask","gcoldef","rownumber","ariaLabel","cbe","flagcheckbox","classname","username","name2","year","grader","latehours","notes","grade_status","has_notes","has_nongrader_notes","repo","repo_broken","repo_unconfirmed","repo_too_open","repo_handout_old","repo_partner_error","repo_sharing","conversation","conversation_pfx","sa","ptables_cellpos","tables","ptables_rerender_key","keys","ti","ptable_rangechange","ptable_boring_row","colSpan","ptable_permute","klasses","was_boringness","trn","boringness","any_visible","partners","pa_render_pset_table","slist_input","$alltables","hdrtable","lpintable","lpinhdrtable","active_nameflag","assign_slist","rerender_rownumber","render_user_compare","sort_data","nf","set_user_sorters","colr","be","checkbox_click","wanto","tr0","rowIndex","cb1","set_tables_width","lastc","rerender_sort_header","sortchange","osort","nsort","anon","override_anonymous","ngrades_expected","has_late_hours","emptydiff","need_ngrades","psu","overlay_div","prependTo","table_hit","left_hit","observer","isIntersecting","otr","make_overlay","observe","make_overlay_observer","events","ptable_recolor","boring","rownum","search_ptconf","search_target","maindiv","imageid","idiv","userae","nameae","search_keywords","se","mcids","includes","grade_search_keywords","none","eq","parse_search_compar","prepare_search","user_data","make_search_name","skw","collator","usage","sensitivity","matchge","titlege","sfunc","compar","make_search_keyword_compare","find_search_keyword","evaluate_search","ptable_search","ptable_search_results","ptable_search_api","pexpr","change_state","reload","obj","_class","isFunction","escapeRE","defaultOptions","fuzzyLink","fuzzyEmail","fuzzyIP","defaultSchemas","validate","http","src_auth","src_host_port_strict","src_path","no_http","src_domain","src_domain_root","src_port","src_host_terminator","mailto","src_email_name","src_host_strict","tlds_default","compile","src_Any","src_Cc","src_Z","src_P","src_ZPCc","src_ZCc","src_pseudo_letter","src_ip4","src_xn","src_host","tpl_host_fuzzy","tpl_host_no_ip_fuzzy","tpl_host_fuzzy_strict","tpl_host_port_fuzzy_strict","tpl_host_port_no_ip_fuzzy_strict","tpl_host_fuzzy_test","tpl_email_fuzzy","tpl_link_fuzzy","tpl_link_no_ip_fuzzy","__opts__","tlds","__tlds__","untpl","tpl","src_tlds","onCompile","__tlds_replaced__","email_fuzzy","link_fuzzy","link_no_ip_fuzzy","host_fuzzy_test","aliases","schemaError","__compiled__","__schemas__","compiled","createValidator","isString","alias","schema_test","schema_search","schema_at_start","pretest","__index__","__text_cache__","resetScanCache","Match","end","__last_index__","schema","__schema__","raw","createMatch","LinkifyIt","schemas","reduce","acc","definition","me","tld_pos","at_pos","testSchemaAt","matchAtStart","list","keepOld","arr","$$","outer","pageXOffset","pageYOffset","outerHeight","atTop","scrollX","marginBottom","serialize","set_local_time","servhr24","showdifference","servtime","servzone","hr24","getTimezoneOffset","hotcrp_onload","hotcrp_load","foldmap","foldsession_unique","fold","which","dofold","foldtype","selt","opentxt","closetxt","foldnum","foldnumid","recalc","wantopen","foldname","cl","vstr","gv_dirtypi","gv_save_queued","gv_save_after","gv_mark_changed","gv_add_spinner","sm","gv_save_some","og","fs","ov","nv","gv_resolve_change","answer_timeout","pa_resolve_grade","lbb","button_position_delta","button_reposition_delta","scrollBy","gradelist_section_button","gradelist_resolve_section","sectione","buttons","xge","parente","headere","desce","gradelist_finish_sidebar","sidebarch","pa_resolve_gradelist","geltmap","glelt","gradelist_elementmap","sectioned","new_sections","section_class","section","concealed","sdiv","gradelist_make_sections","chp","sib","psetinfo_sibling","psetinfo_sibling_button","sibling","xpi","gradekey","toArray","tep","links","jobs","download","timer","setInterval","downloadat","commitat","expiry","clearInterval","repoid","branches","repo_branches","beforeunload","checklatest","checkdata","commits","latesthash","snaphash","docheck","anyhash","decorate_diff_page","gradesheet_closest","gradesheet_store","grgraph","grgraph_set_types","total_type","pa_render_total","drawgraph","$v","load_runsettings","$n","removeAttr","note_near","onload","pset_actions","$f","st","pset_table","register_psets","chain","doneinfo","statusui","mark_job_complete","active","aqi","nleft","njobs","have_done"],"ignoreList":[],"sourceRoot":""}